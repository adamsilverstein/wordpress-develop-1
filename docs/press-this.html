<!DOCTYPE html>

<html>
<head>
  <title>press-this.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>press-this.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * PressThis App
 *
 */</span>
( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $, window </span>) </span>{
	<span class="hljs-keyword">var</span> PressThis = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> editor, $mediaList, $mediaThumbWrap,
			$<span class="hljs-built_in">window</span>               = $( <span class="hljs-built_in">window</span> ),
			$<span class="hljs-built_in">document</span>             = $( <span class="hljs-built_in">document</span> ),
			saveAlert             = <span class="hljs-literal">false</span>,
			textarea              = <span class="hljs-built_in">document</span>.createElement( <span class="hljs-string">'textarea'</span> ),
			sidebarIsOpen         = <span class="hljs-literal">false</span>,
			settings              = <span class="hljs-built_in">window</span>.wpPressThisConfig || {},
			data                  = <span class="hljs-built_in">window</span>.wpPressThisData || {},
			smallestWidth         = <span class="hljs-number">128</span>,
			hasSetFocus           = <span class="hljs-literal">false</span>,
			catsCache             = [],
			isOffScreen           = <span class="hljs-string">'is-off-screen'</span>,
			isHidden              = <span class="hljs-string">'is-hidden'</span>,
			offscreenHidden       = isOffScreen + <span class="hljs-string">' '</span> + isHidden,
			iOS                   = <span class="hljs-regexp">/iPad|iPod|iPhone/</span>.test( <span class="hljs-built_in">window</span>.navigator.userAgent ),
			$textEditor           = $( <span class="hljs-string">'#pressthis'</span> ),
			textEditor            = $textEditor[<span class="hljs-number">0</span>],
			textEditorMinHeight   = <span class="hljs-number">600</span>,
			textLength            = <span class="hljs-number">0</span>,
			transitionEndEvent    = ( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> style = <span class="hljs-built_in">document</span>.documentElement.style;

				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> style.transition !== <span class="hljs-string">'undefined'</span> ) {
					<span class="hljs-keyword">return</span> <span class="hljs-string">'transitionend'</span>;
				}

				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> style.WebkitTransition !== <span class="hljs-string">'undefined'</span> ) {
					<span class="hljs-keyword">return</span> <span class="hljs-string">'webkitTransitionEnd'</span>;
				}

				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}() );

		<span class="hljs-comment">/* ***************************************************************
		 * HELPER FUNCTIONS
		 *************************************************************** */</span>

		<span class="hljs-comment">/**
		 * Emulates our PHP __() gettext function, powered by the strings exported in pressThisL10n.
		 *
		 * @param key string Key of the string to be translated, as found in pressThisL10n.
		 * @returns string Original or translated string, or empty string if no key.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__</span>(<span class="hljs-params"> key </span>) </span>{
			<span class="hljs-keyword">if</span> ( key &amp;&amp; <span class="hljs-built_in">window</span>.pressThisL10n ) {
				<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.pressThisL10n[key] || key;
			}

			<span class="hljs-keyword">return</span> key || <span class="hljs-string">''</span>;
		}

		<span class="hljs-comment">/**
		 * Strips HTML tags
		 *
		 * @param string string Text to have the HTML tags striped out of.
		 * @returns string Stripped text.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripTags</span>(<span class="hljs-params"> string </span>) </span>{
			string = string || <span class="hljs-string">''</span>;

			<span class="hljs-keyword">return</span> string
				.replace( <span class="hljs-regexp">/&lt;!--[\s\S]*?(--&gt;|$)/g</span>, <span class="hljs-string">''</span> )
				.replace( <span class="hljs-regexp">/&lt;(script|style)[^&gt;]*&gt;[\s\S]*?(&lt;\/\1&gt;|$)/ig</span>, <span class="hljs-string">''</span> )
				.replace( <span class="hljs-regexp">/&lt;\/?[a-z][\s\S]*?(&gt;|$)/ig</span>, <span class="hljs-string">''</span> );
		}

		<span class="hljs-comment">/**
		 * Strip HTML tags and convert HTML entities.
		 *
		 * @param text string Text.
		 * @returns string Sanitized text.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sanitizeText</span>(<span class="hljs-params"> text </span>) </span>{
			<span class="hljs-keyword">var</span> _text = stripTags( text );

			<span class="hljs-keyword">try</span> {
				textarea.innerHTML = _text;
				_text = stripTags( textarea.value );
			} <span class="hljs-keyword">catch</span> ( er ) {}

			<span class="hljs-keyword">return</span> _text;
		}

		<span class="hljs-comment">/**
		 * Allow only HTTP or protocol relative URLs.
		 *
		 * @param url string The URL.
		 * @returns string Processed URL.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkUrl</span>(<span class="hljs-params"> url </span>) </span>{
			url = $.trim( url || <span class="hljs-string">''</span> );

			<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^(?:https?:)?\/\//</span>.test( url ) ) {
				url = stripTags( url );
				<span class="hljs-keyword">return</span> url.replace( <span class="hljs-regexp">/["\\]+/g</span>, <span class="hljs-string">''</span> );
			}

			<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
		}

		<span class="hljs-comment">/**
		 * Show UX spinner
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showSpinner</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'.spinner'</span> ).addClass( <span class="hljs-string">'is-active'</span> );
			$( <span class="hljs-string">'.post-actions button'</span> ).attr( <span class="hljs-string">'disabled'</span>, <span class="hljs-string">'disabled'</span> );
		}

		<span class="hljs-comment">/**
		 * Hide UX spinner
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hideSpinner</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'.spinner'</span> ).removeClass( <span class="hljs-string">'is-active'</span> );
			$( <span class="hljs-string">'.post-actions button'</span> ).removeAttr( <span class="hljs-string">'disabled'</span> );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">textEditorResize</span>(<span class="hljs-params"> reset </span>) </span>{
			<span class="hljs-keyword">var</span> pageYOffset, height;

			<span class="hljs-keyword">if</span> ( editor &amp;&amp; ! editor.isHidden() ) {
 				<span class="hljs-keyword">return</span>;
 			}

			reset = ( reset === <span class="hljs-string">'reset'</span> ) || ( textLength &amp;&amp; textLength &gt; textEditor.value.length );
			height = textEditor.style.height;

			<span class="hljs-keyword">if</span> ( reset ) {
				pageYOffset = <span class="hljs-built_in">window</span>.pageYOffset;

				textEditor.style.height = <span class="hljs-string">'auto'</span>;
				textEditor.style.height = <span class="hljs-built_in">Math</span>.max( textEditor.scrollHeight, textEditorMinHeight ) + <span class="hljs-string">'px'</span>;
				<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, pageYOffset );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">parseInt</span>( textEditor.style.height, <span class="hljs-number">10</span> ) &lt; textEditor.scrollHeight ) {
				textEditor.style.height = textEditor.scrollHeight + <span class="hljs-string">'px'</span>;
 			}

 			textLength = textEditor.value.length;
 		}

 		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceGetCursorOffset</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( ! editor ) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}

			<span class="hljs-keyword">var</span> node = editor.selection.getNode(),
				range, view, offset;

			<span class="hljs-keyword">if</span> ( editor.wp &amp;&amp; editor.wp.getView &amp;&amp; ( view = editor.wp.getView( node ) ) ) {
				offset = view.getBoundingClientRect();
			} <span class="hljs-keyword">else</span> {
				range = editor.selection.getRng();

				<span class="hljs-keyword">try</span> {
					offset = range.getClientRects()[<span class="hljs-number">0</span>];
				} <span class="hljs-keyword">catch</span>( er ) {}

				<span class="hljs-keyword">if</span> ( ! offset ) {
					offset = node.getBoundingClientRect();
				}
			}

			<span class="hljs-keyword">return</span> offset.height ? offset : <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Make sure the caret is always visible.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceKeyup</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> VK = <span class="hljs-built_in">window</span>.tinymce.util.VK,
				key = event.keyCode;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Bail on special keys.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( key &lt;= <span class="hljs-number">47</span> &amp;&amp; ! ( key === VK.SPACEBAR || key === VK.ENTER || key === VK.DELETE || key === VK.BACKSPACE || key === VK.UP || key === VK.LEFT || key === VK.DOWN || key === VK.UP ) ) {
				<span class="hljs-keyword">return</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>OS keys, function keys, num lock, scroll lock</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( ( key &gt;= <span class="hljs-number">91</span> &amp;&amp; key &lt;= <span class="hljs-number">93</span> ) || ( key &gt;= <span class="hljs-number">112</span> &amp;&amp; key &lt;= <span class="hljs-number">123</span> ) || key === <span class="hljs-number">144</span> || key === <span class="hljs-number">145</span> ) {
				<span class="hljs-keyword">return</span>;
			}

			mceScroll( key );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceScroll</span>(<span class="hljs-params"> key </span>) </span>{
			<span class="hljs-keyword">var</span> cursorTop, cursorBottom, editorBottom,
				offset = mceGetCursorOffset(),
				bufferTop = <span class="hljs-number">50</span>,
				bufferBottom = <span class="hljs-number">65</span>,
				VK = <span class="hljs-built_in">window</span>.tinymce.util.VK;

			<span class="hljs-keyword">if</span> ( ! offset ) {
				<span class="hljs-keyword">return</span>;
			}

			cursorTop = offset.top + editor.iframeElement.getBoundingClientRect().top;
			cursorBottom = cursorTop + offset.height;
			cursorTop = cursorTop - bufferTop;
			cursorBottom = cursorBottom + bufferBottom;
			editorBottom = $<span class="hljs-built_in">window</span>.height();</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Dont scroll if the node is taller than the visible part of the editor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( editorBottom &lt; offset.height ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( cursorTop &lt; <span class="hljs-number">0</span> &amp;&amp; ( key === VK.UP || key === VK.LEFT || key === VK.BACKSPACE ) ) {
				<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, cursorTop + <span class="hljs-built_in">window</span>.pageYOffset );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( cursorBottom &gt; editorBottom ) {
				<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, cursorBottom + <span class="hljs-built_in">window</span>.pageYOffset - editorBottom );
			}
		}

		<span class="hljs-comment">/**
		 * Replace emoji images with chars and sanitize the text content.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTitleText</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $element = $( <span class="hljs-string">'#title-container'</span> );

			$element.find( <span class="hljs-string">'img.emoji'</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $image = $( <span class="hljs-keyword">this</span> );
				$image.replaceWith( $( <span class="hljs-string">'&lt;span&gt;'</span> ).text( $image.attr( <span class="hljs-string">'alt'</span> ) ) );
			});

			<span class="hljs-keyword">return</span> sanitizeText( $element.text() );
		}

		<span class="hljs-comment">/**
		 * Prepare the form data for saving.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareFormData</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $form = $( <span class="hljs-string">'#pressthis-form'</span> ),
				$input = $( <span class="hljs-string">'&lt;input type="hidden" name="post_category[]" value=""&gt;'</span> );

			editor &amp;&amp; editor.save();

			$( <span class="hljs-string">'#post_title'</span> ).val( getTitleText() );</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Make sure to flush out the tags with tagBox before saving</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.tagBox ) {
				$( <span class="hljs-string">'div.tagsdiv'</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-built_in">window</span>.tagBox.flushTags( <span class="hljs-keyword">this</span>, <span class="hljs-literal">false</span>, <span class="hljs-number">1</span> );
				} );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Get selected categories</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'.categories-select .category'</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i, element </span>) </span>{
				<span class="hljs-keyword">var</span> $cat = $( element );

				<span class="hljs-keyword">if</span> ( $cat.hasClass( <span class="hljs-string">'selected'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Have to append a node as we submit the actual form on preview</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$form.append( $input.clone().val( $cat.attr( <span class="hljs-string">'data-term-id'</span> ) || <span class="hljs-string">''</span> ) );
				}
			});
		}

		<span class="hljs-comment">/**
		 * Submit the post form via AJAX, and redirect to the proper screen if published vs saved as a draft.
		 *
		 * @param action string publish|draft
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">submitPost</span>(<span class="hljs-params"> action </span>) </span>{
			<span class="hljs-keyword">var</span> data;

			saveAlert = <span class="hljs-literal">false</span>;
			showSpinner();

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'publish'</span> === action ) {
				$( <span class="hljs-string">'#post_status'</span> ).val( <span class="hljs-string">'publish'</span> );
			}

			prepareFormData();
			data = $( <span class="hljs-string">'#pressthis-form'</span> ).serialize();

			$.ajax( {
				<span class="hljs-attr">type</span>: <span class="hljs-string">'post'</span>,
				<span class="hljs-attr">url</span>: <span class="hljs-built_in">window</span>.ajaxurl,
				<span class="hljs-attr">data</span>: data
			}).always( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				hideSpinner();
				clearNotices();
				$( <span class="hljs-string">'.publish-button'</span> ).removeClass( <span class="hljs-string">'is-saving'</span> );
			}).done( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
				<span class="hljs-keyword">if</span> ( ! response.success ) {
					renderError( response.data.errorMessage );
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( response.data.redirect ) {
					<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.opener &amp;&amp; ( settings.redirInParent || response.data.force ) ) {
						<span class="hljs-keyword">try</span> {
							<span class="hljs-built_in">window</span>.opener.location.href = response.data.redirect;

							<span class="hljs-built_in">window</span>.setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
								<span class="hljs-built_in">window</span>.self.close();
							}, <span class="hljs-number">200</span> );
						} <span class="hljs-keyword">catch</span>( er ) {
							<span class="hljs-built_in">window</span>.location.href = response.data.redirect;
						}
					} <span class="hljs-keyword">else</span> {
						<span class="hljs-built_in">window</span>.location.href = response.data.redirect;
					}
				}
			}).fail( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				renderError( __( <span class="hljs-string">'serverError'</span> ) );
			});
		}

		<span class="hljs-comment">/**
		 * Inserts the media a user has selected from the presented list inside the editor, as an image or embed, based on type
		 *
		 * @param type string img|embed
		 * @param src string Source URL
		 * @param link string Optional destination link, for images (defaults to src)
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insertSelectedMedia</span>(<span class="hljs-params"> $element </span>) </span>{
			<span class="hljs-keyword">var</span> src, link, newContent = <span class="hljs-string">''</span>;

			src = checkUrl( $element.attr( <span class="hljs-string">'data-wp-src'</span> ) || <span class="hljs-string">''</span> );
			link = checkUrl( data.u );

			<span class="hljs-keyword">if</span> ( $element.hasClass( <span class="hljs-string">'is-image'</span> ) ) {
				<span class="hljs-keyword">if</span> ( ! link ) {
					link = src;
				}

				newContent = <span class="hljs-string">'&lt;a href="'</span> + link + <span class="hljs-string">'"&gt;&lt;img class="alignnone size-full" src="'</span> + src + <span class="hljs-string">'" alt="" /&gt;&lt;/a&gt;'</span>;
			} <span class="hljs-keyword">else</span> {
				newContent = <span class="hljs-string">'[embed]'</span> + src + <span class="hljs-string">'[/embed]'</span>;
			}

			<span class="hljs-keyword">if</span> ( editor &amp;&amp; ! editor.isHidden() ) {
				<span class="hljs-keyword">if</span> ( ! hasSetFocus ) {
					editor.setContent( <span class="hljs-string">'&lt;p&gt;'</span> + newContent + <span class="hljs-string">'&lt;/p&gt;'</span> + editor.getContent() );
				} <span class="hljs-keyword">else</span> {
					editor.execCommand( <span class="hljs-string">'mceInsertContent'</span>, <span class="hljs-literal">false</span>, newContent );
				}
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.QTags ) {
				<span class="hljs-built_in">window</span>.QTags.insertContent( newContent );
			}
		}

		<span class="hljs-comment">/**
		 * Save a new user-generated category via AJAX
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveNewCategory</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> data,
				name = $( <span class="hljs-string">'#new-category'</span> ).val();

			<span class="hljs-keyword">if</span> ( ! name ) {
				<span class="hljs-keyword">return</span>;
			}

			data = {
				<span class="hljs-attr">action</span>: <span class="hljs-string">'press-this-add-category'</span>,
				<span class="hljs-attr">post_id</span>: $( <span class="hljs-string">'#post_ID'</span> ).val() || <span class="hljs-number">0</span>,
				<span class="hljs-attr">name</span>: name,
				<span class="hljs-attr">new_cat_nonce</span>: $( <span class="hljs-string">'#_ajax_nonce-add-category'</span> ).val() || <span class="hljs-string">''</span>,
				<span class="hljs-attr">parent</span>: $( <span class="hljs-string">'#new-category-parent'</span> ).val() || <span class="hljs-number">0</span>
			};

			$.post( <span class="hljs-built_in">window</span>.ajaxurl, data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
				<span class="hljs-keyword">if</span> ( ! response.success ) {
					renderError( response.data.errorMessage );
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">var</span> $parent, $ul,
						$wrap = $( <span class="hljs-string">'ul.categories-select'</span> );

					$.each( response.data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i, newCat </span>) </span>{
						<span class="hljs-keyword">var</span> $node = $( <span class="hljs-string">'&lt;li&gt;'</span> ).append( $( <span class="hljs-string">'&lt;div class="category selected" tabindex="0" role="checkbox" aria-checked="true"&gt;'</span> )
							.attr( <span class="hljs-string">'data-term-id'</span>, newCat.term_id )
							.text( newCat.name ) );

						<span class="hljs-keyword">if</span> ( newCat.parent ) {
							<span class="hljs-keyword">if</span> ( ! $ul || ! $ul.length ) {
								$parent = $wrap.find( <span class="hljs-string">'div[data-term-id="'</span> + newCat.parent + <span class="hljs-string">'"]'</span> ).parent();
								$ul = $parent.find( <span class="hljs-string">'ul.children:first'</span> );

								<span class="hljs-keyword">if</span> ( ! $ul.length ) {
									$ul = $( <span class="hljs-string">'&lt;ul class="children"&gt;'</span> ).appendTo( $parent );
								}
							}

							$ul.prepend( $node );
						} <span class="hljs-keyword">else</span> {
							$wrap.prepend( $node );
						}

						$node.focus();
					} );

					refreshCatsCache();
				}
			} );
		}

		<span class="hljs-comment">/* ***************************************************************
		 * RENDERING FUNCTIONS
		 *************************************************************** */</span>

		<span class="hljs-comment">/**
		 * Hide the form letting users enter a URL to be scanned, if a URL was already passed.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderToolsVisibility</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( data.hasData ) {
				$( <span class="hljs-string">'#scanbar'</span> ).hide();
			}
		}

		<span class="hljs-comment">/**
		 * Render error notice
		 *
		 * @param msg string Notice/error message
		 * @param error string error|notice CSS class for display
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderNotice</span>(<span class="hljs-params"> msg, error </span>) </span>{
			<span class="hljs-keyword">var</span> $alerts = $( <span class="hljs-string">'.editor-wrapper div.alerts'</span> ),
				className = error ? <span class="hljs-string">'is-error'</span> : <span class="hljs-string">'is-notice'</span>;

			$alerts.append( $( <span class="hljs-string">'&lt;p class="alert '</span> + className + <span class="hljs-string">'"&gt;'</span> ).text( msg ) );
		}

		<span class="hljs-comment">/**
		 * Render error notice
		 *
		 * @param msg string Error message
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderError</span>(<span class="hljs-params"> msg </span>) </span>{
			renderNotice( msg, <span class="hljs-literal">true</span> );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearNotices</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'div.alerts'</span> ).empty();
		}

		<span class="hljs-comment">/**
		 * Render notices on page load, if any already
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderStartupNotices</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Render errors sent in the data, if any</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( data.errors ) {
				$.each( data.errors, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i, msg </span>) </span>{
					renderError( msg );
				} );
			}
		}

		<span class="hljs-comment">/**
		 * Add an image to the list of found images.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addImg</span>(<span class="hljs-params"> src, displaySrc, i </span>) </span>{
			<span class="hljs-keyword">var</span> $element = $mediaThumbWrap.clone().addClass( <span class="hljs-string">'is-image'</span> );

			$element.attr( <span class="hljs-string">'data-wp-src'</span>, src ).css( <span class="hljs-string">'background-image'</span>, <span class="hljs-string">'url('</span> + displaySrc + <span class="hljs-string">')'</span> )
				.find( <span class="hljs-string">'span'</span> ).text( __( <span class="hljs-string">'suggestedImgAlt'</span> ).replace( <span class="hljs-string">'%d'</span>, i + <span class="hljs-number">1</span> ) );

			$mediaList.append( $element );
		}

		<span class="hljs-comment">/**
		 * Render the detected images and embed for selection, if any
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderDetectedMedia</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> found = <span class="hljs-number">0</span>;

			$mediaList = $( <span class="hljs-string">'ul.media-list'</span> );
			$mediaThumbWrap = $( <span class="hljs-string">'&lt;li class="suggested-media-thumbnail" tabindex="0"&gt;&lt;span class="screen-reader-text"&gt;&lt;/span&gt;&lt;/li&gt;'</span> );

			<span class="hljs-keyword">if</span> ( data._embeds ) {
				$.each( data._embeds, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> i, src </span>) </span>{
					<span class="hljs-keyword">var</span> displaySrc = <span class="hljs-string">''</span>,
						cssClass = <span class="hljs-string">''</span>,
						$element = $mediaThumbWrap.clone().addClass( <span class="hljs-string">'is-embed'</span> );

					src = checkUrl( src );

					<span class="hljs-keyword">if</span> ( src.indexOf( <span class="hljs-string">'youtube.com/'</span> ) &gt; <span class="hljs-number">-1</span> ) {
						displaySrc = <span class="hljs-string">'https://i.ytimg.com/vi/'</span> + src.replace( <span class="hljs-regexp">/.+v=([^&amp;]+).*/</span>, <span class="hljs-string">'$1'</span> ) + <span class="hljs-string">'/hqdefault.jpg'</span>;
						cssClass += <span class="hljs-string">' is-video'</span>;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( src.indexOf( <span class="hljs-string">'youtu.be/'</span> ) &gt; <span class="hljs-number">-1</span> ) {
						displaySrc = <span class="hljs-string">'https://i.ytimg.com/vi/'</span> + src.replace( <span class="hljs-regexp">/\/([^\/])$/</span>, <span class="hljs-string">'$1'</span> ) + <span class="hljs-string">'/hqdefault.jpg'</span>;
						cssClass += <span class="hljs-string">' is-video'</span>;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( src.indexOf( <span class="hljs-string">'dailymotion.com'</span> ) &gt; <span class="hljs-number">-1</span> ) {
						displaySrc = src.replace( <span class="hljs-string">'/video/'</span>, <span class="hljs-string">'/thumbnail/video/'</span> );
						cssClass += <span class="hljs-string">' is-video'</span>;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( src.indexOf( <span class="hljs-string">'soundcloud.com'</span> ) &gt; <span class="hljs-number">-1</span> ) {
						cssClass += <span class="hljs-string">' is-audio'</span>;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( src.indexOf( <span class="hljs-string">'twitter.com'</span> ) &gt; <span class="hljs-number">-1</span> ) {
						cssClass += <span class="hljs-string">' is-tweet'</span>;
					} <span class="hljs-keyword">else</span> {
						cssClass += <span class="hljs-string">' is-video'</span>;
					}

					$element.attr( <span class="hljs-string">'data-wp-src'</span>, src ).find( <span class="hljs-string">'span'</span> ).text( __( <span class="hljs-string">'suggestedEmbedAlt'</span> ).replace( <span class="hljs-string">'%d'</span>, i + <span class="hljs-number">1</span> ) );

					<span class="hljs-keyword">if</span> ( displaySrc ) {
						$element.css( <span class="hljs-string">'background-image'</span>, <span class="hljs-string">'url('</span> + displaySrc + <span class="hljs-string">')'</span> );
					}

					$mediaList.append( $element );
					found++;
				} );
			}

			<span class="hljs-keyword">if</span> ( data._images ) {
				$.each( data._images, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i, src </span>) </span>{
					<span class="hljs-keyword">var</span> displaySrc, img = <span class="hljs-keyword">new</span> Image();

					src = checkUrl( src );
					displaySrc = src.replace( <span class="hljs-regexp">/^(http[^\?]+)(\?.*)?$/</span>, <span class="hljs-string">'$1'</span> );

					<span class="hljs-keyword">if</span> ( src.indexOf( <span class="hljs-string">'files.wordpress.com/'</span> ) &gt; <span class="hljs-number">-1</span> ) {
						displaySrc = displaySrc.replace( <span class="hljs-regexp">/\?.*$/</span>, <span class="hljs-string">''</span> ) + <span class="hljs-string">'?w='</span> + smallestWidth;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( src.indexOf( <span class="hljs-string">'gravatar.com/'</span> ) &gt; <span class="hljs-number">-1</span> ) {
						displaySrc = displaySrc.replace( <span class="hljs-regexp">/\?.*$/</span>, <span class="hljs-string">''</span> ) + <span class="hljs-string">'?s='</span> + smallestWidth;
					} <span class="hljs-keyword">else</span> {
						displaySrc = src;
					}

					img.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						<span class="hljs-keyword">if</span> ( ( img.width &amp;&amp; img.width &lt; <span class="hljs-number">256</span> ) ||
							( img.height &amp;&amp; img.height &lt; <span class="hljs-number">128</span> ) ) {

							<span class="hljs-keyword">return</span>;
						}

						addImg( src, displaySrc, i );
					};

					img.src = src;
					found++;
				} );
			}

			<span class="hljs-keyword">if</span> ( found ) {
				$( <span class="hljs-string">'.media-list-container'</span> ).addClass( <span class="hljs-string">'has-media'</span> );
			}
		}

		<span class="hljs-comment">/* ***************************************************************
		 * MONITORING FUNCTIONS
		 *************************************************************** */</span>

		<span class="hljs-comment">/**
		 * Interactive navigation behavior for the options modal (post format, tags, categories)
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">monitorOptionsModal</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $postOptions  = $( <span class="hljs-string">'.post-options'</span> ),
				$postOption   = $( <span class="hljs-string">'.post-option'</span> ),
				$settingModal = $( <span class="hljs-string">'.setting-modal'</span> ),
				$modalClose   = $( <span class="hljs-string">'.modal-close'</span> );

			$postOption.on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> index = $( <span class="hljs-keyword">this</span> ).index(),
					$targetSettingModal = $settingModal.eq( index );

				$postOptions.addClass( isOffScreen )
					.one( transitionEndEvent, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						$( <span class="hljs-keyword">this</span> ).addClass( isHidden );
					} );

				$targetSettingModal.removeClass( offscreenHidden )
					.one( transitionEndEvent, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						$( <span class="hljs-keyword">this</span> ).find( <span class="hljs-string">'.modal-close'</span> ).focus();
					} );
			} );

			$modalClose.on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $targetSettingModal = $( <span class="hljs-keyword">this</span> ).parent(),
					index = $targetSettingModal.index();

				$postOptions.removeClass( offscreenHidden );
				$targetSettingModal.addClass( isOffScreen );

				<span class="hljs-keyword">if</span> ( transitionEndEvent ) {
					$targetSettingModal.one( transitionEndEvent, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						$( <span class="hljs-keyword">this</span> ).addClass( isHidden );
						$postOption.eq( index - <span class="hljs-number">1</span> ).focus();
					} );
				} <span class="hljs-keyword">else</span> {
					setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						$targetSettingModal.addClass( isHidden );
						$postOption.eq( index - <span class="hljs-number">1</span> ).focus();
					}, <span class="hljs-number">350</span> );
				}
			} );
		}

		<span class="hljs-comment">/**
		 * Interactive behavior for the sidebar toggle, to show the options modals
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">openSidebar</span>(<span class="hljs-params"></span>) </span>{
			sidebarIsOpen = <span class="hljs-literal">true</span>;

			$( <span class="hljs-string">'.options'</span> ).removeClass( <span class="hljs-string">'closed'</span> ).addClass( <span class="hljs-string">'open'</span> );
			$( <span class="hljs-string">'.press-this-actions, #scanbar'</span> ).addClass( isHidden );
			$( <span class="hljs-string">'.options-panel-back'</span> ).removeClass( isHidden );

			$( <span class="hljs-string">'.options-panel'</span> ).removeClass( offscreenHidden )
				.one( transitionEndEvent, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$( <span class="hljs-string">'.post-option:first'</span> ).focus();
				} );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeSidebar</span>(<span class="hljs-params"></span>) </span>{
			sidebarIsOpen = <span class="hljs-literal">false</span>;

			$( <span class="hljs-string">'.options'</span> ).removeClass( <span class="hljs-string">'open'</span> ).addClass( <span class="hljs-string">'closed'</span> );
			$( <span class="hljs-string">'.options-panel-back'</span> ).addClass( isHidden );
			$( <span class="hljs-string">'.press-this-actions, #scanbar'</span> ).removeClass( isHidden );

			$( <span class="hljs-string">'.options-panel'</span> ).addClass( isOffScreen )
				.one( transitionEndEvent, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$( <span class="hljs-keyword">this</span> ).addClass( isHidden );</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Reset to options list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$( <span class="hljs-string">'.post-options'</span> ).removeClass( offscreenHidden );
					$( <span class="hljs-string">'.setting-modal'</span>).addClass( offscreenHidden );
				});
		}

		<span class="hljs-comment">/**
		 * Interactive behavior for the post title's field placeholder
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">monitorPlaceholder</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $titleField = $( <span class="hljs-string">'#title-container'</span> ),
				$placeholder = $( <span class="hljs-string">'.post-title-placeholder'</span> );

			$titleField.on( <span class="hljs-string">'focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				$placeholder.addClass( <span class="hljs-string">'is-hidden'</span> );
			}).on( <span class="hljs-string">'blur'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( ! $titleField.text() &amp;&amp; ! $titleField.html() ) {
					$placeholder.removeClass( <span class="hljs-string">'is-hidden'</span> );
				}
			}).on( <span class="hljs-string">'keyup'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				saveAlert = <span class="hljs-literal">true</span>;
			}).on( <span class="hljs-string">'paste'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">var</span> text, range,
					clipboard = event.originalEvent.clipboardData || <span class="hljs-built_in">window</span>.clipboardData;

				<span class="hljs-keyword">if</span> ( clipboard ) {
					<span class="hljs-keyword">try</span>{
						text = clipboard.getData( <span class="hljs-string">'Text'</span> ) || clipboard.getData( <span class="hljs-string">'text/plain'</span> );

						<span class="hljs-keyword">if</span> ( text ) {
							text = $.trim( text.replace( <span class="hljs-regexp">/\s+/g</span>, <span class="hljs-string">' '</span> ) );

							<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.getSelection ) {
								range = <span class="hljs-built_in">window</span>.getSelection().getRangeAt(<span class="hljs-number">0</span>);

								<span class="hljs-keyword">if</span> ( range ) {
									<span class="hljs-keyword">if</span> ( ! range.collapsed ) {
										range.deleteContents();
									}

									range.insertNode( <span class="hljs-built_in">document</span>.createTextNode( text ) );
								}
							} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.selection ) {
								range = <span class="hljs-built_in">document</span>.selection.createRange();

								<span class="hljs-keyword">if</span> ( range ) {
									range.text = text;
								}
							}
						}
					} <span class="hljs-keyword">catch</span> ( er ) {}

					event.preventDefault();
				}

				saveAlert = <span class="hljs-literal">true</span>;

				setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$titleField.text( getTitleText() );
				}, <span class="hljs-number">50</span> );
			});

			<span class="hljs-keyword">if</span> ( $titleField.text() || $titleField.html() ) {
				$placeholder.addClass(<span class="hljs-string">'is-hidden'</span>);
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggleCatItem</span>(<span class="hljs-params"> $element </span>) </span>{
			<span class="hljs-keyword">if</span> ( $element.hasClass( <span class="hljs-string">'selected'</span> ) ) {
				$element.removeClass( <span class="hljs-string">'selected'</span> ).attr( <span class="hljs-string">'aria-checked'</span>, <span class="hljs-string">'false'</span> );
			} <span class="hljs-keyword">else</span> {
				$element.addClass( <span class="hljs-string">'selected'</span> ).attr( <span class="hljs-string">'aria-checked'</span>, <span class="hljs-string">'true'</span> );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">monitorCatList</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'.categories-select'</span> ).on( <span class="hljs-string">'click.press-this keydown.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">var</span> $element = $( event.target );

				<span class="hljs-keyword">if</span> ( $element.is( <span class="hljs-string">'div.category'</span> ) ) {
					<span class="hljs-keyword">if</span> ( event.type === <span class="hljs-string">'keydown'</span> &amp;&amp; event.keyCode !== <span class="hljs-number">32</span> ) {
						<span class="hljs-keyword">return</span>;
					}

					toggleCatItem( $element );
					event.preventDefault();
				}
			});
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">splitButtonClose</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'.split-button'</span> ).removeClass( <span class="hljs-string">'is-open'</span> );
			$( <span class="hljs-string">'.split-button-toggle'</span> ).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
		}

		<span class="hljs-comment">/* ***************************************************************
		 * PROCESSING FUNCTIONS
		 *************************************************************** */</span>

		<span class="hljs-comment">/**
		 * Calls all the rendring related functions to happen on page load
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Were on!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			renderToolsVisibility();
			renderDetectedMedia();
			renderStartupNotices();

			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.tagBox ) {
				<span class="hljs-built_in">window</span>.tagBox.init();
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>iOS doesnt fire click events on standard elements without this</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( iOS ) {
				$( <span class="hljs-built_in">document</span>.body ).css( <span class="hljs-string">'cursor'</span>, <span class="hljs-string">'pointer'</span> );
			}
		}

		<span class="hljs-comment">/**
		 * Set app events and other state monitoring related code.
		 */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">monitor</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $splitButton = $( <span class="hljs-string">'.split-button'</span> );

			$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'tinymce-editor-init'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, ed </span>) </span>{
				editor = ed;

				editor.on( <span class="hljs-string">'nodechange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					hasSetFocus = <span class="hljs-literal">true</span>;
				});

				editor.on( <span class="hljs-string">'focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					splitButtonClose();
				});

				editor.on( <span class="hljs-string">'show'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						editor.execCommand( <span class="hljs-string">'wpAutoResize'</span> );
					}, <span class="hljs-number">300</span> );
				});

				editor.on( <span class="hljs-string">'hide'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						textEditorResize( <span class="hljs-string">'reset'</span> );
					}, <span class="hljs-number">100</span> );
				});

				editor.on( <span class="hljs-string">'keyup'</span>, mceKeyup );
				editor.on( <span class="hljs-string">'undo redo'</span>, mceScroll );

			}).on( <span class="hljs-string">'click.press-this keypress.press-this'</span>, <span class="hljs-string">'.suggested-media-thumbnail'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( event.type === <span class="hljs-string">'click'</span> || event.keyCode === <span class="hljs-number">13</span> ) {
					insertSelectedMedia( $( <span class="hljs-keyword">this</span> ) );
				}
			}).on( <span class="hljs-string">'click.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( ! $( event.target ).closest( <span class="hljs-string">'button'</span> ).hasClass( <span class="hljs-string">'split-button-toggle'</span> ) ) {
					splitButtonClose();
				}
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Publish, Draft and Preview buttons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'.post-actions'</span> ).on( <span class="hljs-string">'click.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">var</span> location,
					$target = $( event.target ),
					$button = $target.closest( <span class="hljs-string">'button'</span> );

				<span class="hljs-keyword">if</span> ( $button.length ) {
					<span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'draft-button'</span> ) ) {
						$( <span class="hljs-string">'.publish-button'</span> ).addClass( <span class="hljs-string">'is-saving'</span> );
						submitPost( <span class="hljs-string">'draft'</span> );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'publish-button'</span> ) ) {
						$button.addClass( <span class="hljs-string">'is-saving'</span> );

						<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.history.replaceState ) {
							location = <span class="hljs-built_in">window</span>.location.href;
							location += ( location.indexOf( <span class="hljs-string">'?'</span> ) !== <span class="hljs-number">-1</span> ) ? <span class="hljs-string">'&amp;'</span> : <span class="hljs-string">'?'</span>;
							location += <span class="hljs-string">'wp-press-this-reload=true'</span>;

							<span class="hljs-built_in">window</span>.history.replaceState( <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, location );
						}

						submitPost( <span class="hljs-string">'publish'</span> );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'preview-button'</span> ) ) {
						prepareFormData();
						<span class="hljs-built_in">window</span>.opener &amp;&amp; <span class="hljs-built_in">window</span>.opener.focus();

						$( <span class="hljs-string">'#wp-preview'</span> ).val( <span class="hljs-string">'dopreview'</span> );
						$( <span class="hljs-string">'#pressthis-form'</span> ).attr( <span class="hljs-string">'target'</span>, <span class="hljs-string">'_blank'</span> ).submit().attr( <span class="hljs-string">'target'</span>, <span class="hljs-string">''</span> );
						$( <span class="hljs-string">'#wp-preview'</span> ).val( <span class="hljs-string">''</span> );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'standard-editor-button'</span> ) ) {
						$( <span class="hljs-string">'.publish-button'</span> ).addClass( <span class="hljs-string">'is-saving'</span> );
						$( <span class="hljs-string">'#pt-force-redirect'</span> ).val( <span class="hljs-string">'true'</span> );
						submitPost( <span class="hljs-string">'draft'</span> );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'split-button-toggle'</span> ) ) {
						<span class="hljs-keyword">if</span> ( $splitButton.hasClass( <span class="hljs-string">'is-open'</span> ) ) {
							$splitButton.removeClass( <span class="hljs-string">'is-open'</span> );
							$button.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
						} <span class="hljs-keyword">else</span> {
							$splitButton.addClass( <span class="hljs-string">'is-open'</span> );
							$button.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
						}
					}
				}
			});

			monitorOptionsModal();
			monitorPlaceholder();
			monitorCatList();

			$( <span class="hljs-string">'.options'</span> ).on( <span class="hljs-string">'click.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( $( <span class="hljs-keyword">this</span> ).hasClass( <span class="hljs-string">'open'</span> ) ) {
					closeSidebar();
				} <span class="hljs-keyword">else</span> {
					openSidebar();
				}
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Close the sidebar when focus moves outside of it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'.options-panel, .options-panel-back'</span> ).on( <span class="hljs-string">'focusout.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> node = <span class="hljs-built_in">document</span>.activeElement,
						$node = $( node );

					<span class="hljs-keyword">if</span> ( sidebarIsOpen &amp;&amp; node &amp;&amp; ! $node.hasClass( <span class="hljs-string">'options-panel-back'</span> ) &amp;&amp;
						( node.nodeName === <span class="hljs-string">'BODY'</span> ||
							( ! $node.closest( <span class="hljs-string">'.options-panel'</span> ).length &amp;&amp;
							! $node.closest( <span class="hljs-string">'.options'</span> ).length ) ) ) {

						closeSidebar();
					}
				}, <span class="hljs-number">50</span> );
			});

			$( <span class="hljs-string">'#post-formats-select input'</span> ).on( <span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $( <span class="hljs-keyword">this</span> );

				<span class="hljs-keyword">if</span> ( $<span class="hljs-keyword">this</span>.is( <span class="hljs-string">':checked'</span> ) ) {
					$( <span class="hljs-string">'#post-option-post-format'</span> ).text( $( <span class="hljs-string">'label[for="'</span> + $<span class="hljs-keyword">this</span>.attr( <span class="hljs-string">'id'</span> ) + <span class="hljs-string">'"]'</span> ).text() || <span class="hljs-string">''</span> );
				}
			} );

			$<span class="hljs-built_in">window</span>.on( <span class="hljs-string">'beforeunload.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( saveAlert || ( editor &amp;&amp; editor.isDirty() ) ) {
					<span class="hljs-keyword">return</span> __( <span class="hljs-string">'saveAlert'</span> );
				}
			} ).on( <span class="hljs-string">'resize.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( ! editor || editor.isHidden() ) {
					textEditorResize( <span class="hljs-string">'reset'</span> );
				}
			});

			$( <span class="hljs-string">'button.add-cat-toggle'</span> ).on( <span class="hljs-string">'click.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $( <span class="hljs-keyword">this</span> );

				$<span class="hljs-keyword">this</span>.toggleClass( <span class="hljs-string">'is-toggled'</span> );
				$<span class="hljs-keyword">this</span>.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> === $<span class="hljs-keyword">this</span>.attr( <span class="hljs-string">'aria-expanded'</span> ) ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span> );
				$( <span class="hljs-string">'.setting-modal .add-category, .categories-search-wrapper'</span> ).toggleClass( <span class="hljs-string">'is-hidden'</span> );
			} );

			$( <span class="hljs-string">'button.add-cat-submit'</span> ).on( <span class="hljs-string">'click.press-this'</span>, saveNewCategory );

			$( <span class="hljs-string">'.categories-search'</span> ).on( <span class="hljs-string">'keyup.press-this'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> search = $( <span class="hljs-keyword">this</span> ).val().toLowerCase() || <span class="hljs-string">''</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Dont search when less thasn 3 extended ASCII chars</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/[\x20-\xFF]+/</span>.test( search ) &amp;&amp; search.length &lt; <span class="hljs-number">2</span> ) {
					<span class="hljs-keyword">return</span>;
				}

				$.each( catsCache, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i, cat </span>) </span>{
					cat.node.removeClass( <span class="hljs-string">'is-hidden searched-parent'</span> );
				} );

				<span class="hljs-keyword">if</span> ( search ) {
					$.each( catsCache, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i, cat </span>) </span>{
						<span class="hljs-keyword">if</span> ( cat.text.indexOf( search ) === <span class="hljs-number">-1</span> ) {
							cat.node.addClass( <span class="hljs-string">'is-hidden'</span> );
						} <span class="hljs-keyword">else</span> {
							cat.parents.addClass( <span class="hljs-string">'searched-parent'</span> );
						}
					} );
				}
			} );

			$textEditor.on( <span class="hljs-string">'focus.press-this input.press-this propertychange.press-this'</span>, textEditorResize );

			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">refreshCatsCache</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'.categories-select'</span> ).find( <span class="hljs-string">'li'</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $( <span class="hljs-keyword">this</span> );

				catsCache.push( {
					<span class="hljs-attr">node</span>: $<span class="hljs-keyword">this</span>,
					<span class="hljs-attr">parents</span>: $<span class="hljs-keyword">this</span>.parents( <span class="hljs-string">'li'</span> ),
					<span class="hljs-attr">text</span>: $<span class="hljs-keyword">this</span>.children( <span class="hljs-string">'.category'</span> ).text().toLowerCase()
				} );
			} );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Lets go!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$<span class="hljs-built_in">document</span>.ready( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			render();
			monitor();
			refreshCatsCache();
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Expose public methods?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">return</span> {
			<span class="hljs-attr">renderNotice</span>: renderNotice,
			<span class="hljs-attr">renderError</span>: renderError
		};
	};

	<span class="hljs-built_in">window</span>.wp = <span class="hljs-built_in">window</span>.wp || {};
	<span class="hljs-built_in">window</span>.wp.pressThis = <span class="hljs-keyword">new</span> PressThis();

}( jQuery, <span class="hljs-built_in">window</span> ));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
