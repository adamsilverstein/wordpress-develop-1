<!DOCTYPE html>

<html>
<head>
  <title>sortable.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>sortable.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*!
 * jQuery UI Sortable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> factory </span>) </span>{
	<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> define === <span class="hljs-string">"function"</span> &amp;&amp; define.amd ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>AMD. Register as an anonymous module.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		define([
			<span class="hljs-string">"jquery"</span>,
			<span class="hljs-string">"./core"</span>,
			<span class="hljs-string">"./mouse"</span>,
			<span class="hljs-string">"./widget"</span>
		], factory );
	} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Browser globals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		factory( jQuery );
	}
}(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $ </span>) </span>{

<span class="hljs-keyword">return</span> $.widget(<span class="hljs-string">"ui.sortable"</span>, $.ui.mouse, {
	<span class="hljs-attr">version</span>: <span class="hljs-string">"1.11.4"</span>,
	<span class="hljs-attr">widgetEventPrefix</span>: <span class="hljs-string">"sort"</span>,
	<span class="hljs-attr">ready</span>: <span class="hljs-literal">false</span>,
	<span class="hljs-attr">options</span>: {
		<span class="hljs-attr">appendTo</span>: <span class="hljs-string">"parent"</span>,
		<span class="hljs-attr">axis</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">connectWith</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">containment</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">cursor</span>: <span class="hljs-string">"auto"</span>,
		<span class="hljs-attr">cursorAt</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">dropOnEmpty</span>: <span class="hljs-literal">true</span>,
		<span class="hljs-attr">forcePlaceholderSize</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">forceHelperSize</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">grid</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">handle</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">helper</span>: <span class="hljs-string">"original"</span>,
		<span class="hljs-attr">items</span>: <span class="hljs-string">"&gt; *"</span>,
		<span class="hljs-attr">opacity</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">placeholder</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">revert</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">scroll</span>: <span class="hljs-literal">true</span>,
		<span class="hljs-attr">scrollSensitivity</span>: <span class="hljs-number">20</span>,
		<span class="hljs-attr">scrollSpeed</span>: <span class="hljs-number">20</span>,
		<span class="hljs-attr">scope</span>: <span class="hljs-string">"default"</span>,
		<span class="hljs-attr">tolerance</span>: <span class="hljs-string">"intersect"</span>,
		<span class="hljs-attr">zIndex</span>: <span class="hljs-number">1000</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		activate: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">beforeStop</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">change</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">deactivate</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">out</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">over</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">receive</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">remove</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">sort</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">start</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">stop</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">update</span>: <span class="hljs-literal">null</span>
	},

	<span class="hljs-attr">_isOverAxis</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> x, reference, size </span>) </span>{
		<span class="hljs-keyword">return</span> ( x &gt;= reference ) &amp;&amp; ( x &lt; ( reference + size ) );
	},

	<span class="hljs-attr">_isFloating</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> item </span>) </span>{
		<span class="hljs-keyword">return</span> (<span class="hljs-regexp">/left|right/</span>).test(item.css(<span class="hljs-string">"float"</span>)) || (<span class="hljs-regexp">/inline|table-cell/</span>).test(item.css(<span class="hljs-string">"display"</span>));
	},

	<span class="hljs-attr">_create</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>.containerCache = {};
		<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-string">"ui-sortable"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Get the items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.refresh();</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Lets determine the parents offset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offset = <span class="hljs-keyword">this</span>.element.offset();</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Initialize mouse events for interaction</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._mouseInit();

		<span class="hljs-keyword">this</span>._setHandleClassName();</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Were ready to go</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.ready = <span class="hljs-literal">true</span>;

	},

	<span class="hljs-attr">_setOption</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> key, value </span>) </span>{
		<span class="hljs-keyword">this</span>._super( key, value );

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"handle"</span> ) {
			<span class="hljs-keyword">this</span>._setHandleClassName();
		}
	},

	<span class="hljs-attr">_setHandleClassName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-sortable-handle"</span> ).removeClass( <span class="hljs-string">"ui-sortable-handle"</span> );
		$.each( <span class="hljs-keyword">this</span>.items, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			( <span class="hljs-keyword">this</span>.instance.options.handle ?
				<span class="hljs-keyword">this</span>.item.find( <span class="hljs-keyword">this</span>.instance.options.handle ) : <span class="hljs-keyword">this</span>.item )
				.addClass( <span class="hljs-string">"ui-sortable-handle"</span> );
		});
	},

	<span class="hljs-attr">_destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>.element
			.removeClass( <span class="hljs-string">"ui-sortable ui-sortable-disabled"</span> )
			.find( <span class="hljs-string">".ui-sortable-handle"</span> )
				.removeClass( <span class="hljs-string">"ui-sortable-handle"</span> );
		<span class="hljs-keyword">this</span>._mouseDestroy();

		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- ) {
			<span class="hljs-keyword">this</span>.items[i].item.removeData(<span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">"-item"</span>);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	<span class="hljs-attr">_mouseCapture</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, overrideHandle</span>) </span>{
		<span class="hljs-keyword">var</span> currentItem = <span class="hljs-literal">null</span>,
			validHandle = <span class="hljs-literal">false</span>,
			that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.reverting) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.disabled || <span class="hljs-keyword">this</span>.options.type === <span class="hljs-string">"static"</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>We have to refresh the items data once first</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._refreshItems(event);</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Find out if the clicked node (or one of its parents) is a actual item in this.items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$(event.target).parents().each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span>($.data(<span class="hljs-keyword">this</span>, that.widgetName + <span class="hljs-string">"-item"</span>) === that) {
				currentItem = $(<span class="hljs-keyword">this</span>);
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
		});
		<span class="hljs-keyword">if</span>($.data(event.target, that.widgetName + <span class="hljs-string">"-item"</span>) === that) {
			currentItem = $(event.target);
		}

		<span class="hljs-keyword">if</span>(!currentItem) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.handle &amp;&amp; !overrideHandle) {
			$(<span class="hljs-keyword">this</span>.options.handle, currentItem).find(<span class="hljs-string">"*"</span>).addBack().each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span> === event.target) {
					validHandle = <span class="hljs-literal">true</span>;
				}
			});
			<span class="hljs-keyword">if</span>(!validHandle) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
		}

		<span class="hljs-keyword">this</span>.currentItem = currentItem;
		<span class="hljs-keyword">this</span>._removeCurrentsFromItems();
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

	},

	<span class="hljs-attr">_mouseStart</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, overrideHandle, noActivation</span>) </span>{

		<span class="hljs-keyword">var</span> i, body,
			o = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-keyword">this</span>.currentContainer = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.refreshPositions();</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Create and append the visible helper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.helper = <span class="hljs-keyword">this</span>._createHelper(event);</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Cache the helper size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._cacheHelperProportions();

		<span class="hljs-comment">/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Cache the margins of the original element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._cacheMargins();</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Get the next scrolling parent</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.scrollParent = <span class="hljs-keyword">this</span>.helper.scrollParent();</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>The elements absolute position on the page minus margins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offset = <span class="hljs-keyword">this</span>.currentItem.offset();
		<span class="hljs-keyword">this</span>.offset = {
			<span class="hljs-attr">top</span>: <span class="hljs-keyword">this</span>.offset.top - <span class="hljs-keyword">this</span>.margins.top,
			<span class="hljs-attr">left</span>: <span class="hljs-keyword">this</span>.offset.left - <span class="hljs-keyword">this</span>.margins.left
		};

		$.extend(<span class="hljs-keyword">this</span>.offset, {
			<span class="hljs-attr">click</span>: { <span class="hljs-comment">//Where the click happened, relative to the element</span>
				left: event.pageX - <span class="hljs-keyword">this</span>.offset.left,
				<span class="hljs-attr">top</span>: event.pageY - <span class="hljs-keyword">this</span>.offset.top
			},
			<span class="hljs-attr">parent</span>: <span class="hljs-keyword">this</span>._getParentOffset(),
			<span class="hljs-attr">relative</span>: <span class="hljs-keyword">this</span>._getRelativeOffset() <span class="hljs-comment">//This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper</span>
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Only after we got the offset, we can change the helpers position to absolute
TODO: Still need to figure out a way to make relative sorting possible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"position"</span>, <span class="hljs-string">"absolute"</span>);
		<span class="hljs-keyword">this</span>.cssPosition = <span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"position"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Generate the original position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.originalPosition = <span class="hljs-keyword">this</span>._generatePosition(event);
		<span class="hljs-keyword">this</span>.originalPageX = event.pageX;
		<span class="hljs-keyword">this</span>.originalPageY = event.pageY;</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Adjust the mouse offset relative to the helper if cursorAt is supplied</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		(o.cursorAt &amp;&amp; <span class="hljs-keyword">this</span>._adjustOffsetFromHelper(o.cursorAt));</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Cache the former DOM position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.domPosition = { <span class="hljs-attr">prev</span>: <span class="hljs-keyword">this</span>.currentItem.prev()[<span class="hljs-number">0</span>], <span class="hljs-attr">parent</span>: <span class="hljs-keyword">this</span>.currentItem.parent()[<span class="hljs-number">0</span>] };</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>If the helper is not the original, hide the original so its not playing any role during the drag, wont cause anything bad this way</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">this</span>.currentItem.hide();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Create the placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._createPlaceholder();</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Set a containment if given in the options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(o.containment) {
			<span class="hljs-keyword">this</span>._setContainment();
		}

		<span class="hljs-keyword">if</span>( o.cursor &amp;&amp; o.cursor !== <span class="hljs-string">"auto"</span> ) { <span class="hljs-comment">// cursor option</span>
			body = <span class="hljs-keyword">this</span>.document.find( <span class="hljs-string">"body"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>support: IE</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.storedCursor = body.css( <span class="hljs-string">"cursor"</span> );
			body.css( <span class="hljs-string">"cursor"</span>, o.cursor );

			<span class="hljs-keyword">this</span>.storedStylesheet = $( <span class="hljs-string">"&lt;style&gt;*{ cursor: "</span>+o.cursor+<span class="hljs-string">" !important; }&lt;/style&gt;"</span> ).appendTo( body );
		}

		<span class="hljs-keyword">if</span>(o.opacity) { <span class="hljs-comment">// opacity option</span>
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>)) {
				<span class="hljs-keyword">this</span>._storedOpacity = <span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>);
			}
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>, o.opacity);
		}

		<span class="hljs-keyword">if</span>(o.zIndex) { <span class="hljs-comment">// zIndex option</span>
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>)) {
				<span class="hljs-keyword">this</span>._storedZIndex = <span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>);
			}
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>, o.zIndex);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Prepare scrolling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>] &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].tagName !== <span class="hljs-string">"HTML"</span>) {
			<span class="hljs-keyword">this</span>.overflowOffset = <span class="hljs-keyword">this</span>.scrollParent.offset();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Call callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"start"</span>, event, <span class="hljs-keyword">this</span>._uiHash());</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Recache the helper size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._preserveHelperProportions) {
			<span class="hljs-keyword">this</span>._cacheHelperProportions();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Post activate events to possible containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( !noActivation ) {
			<span class="hljs-keyword">for</span> ( i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- ) {
				<span class="hljs-keyword">this</span>.containers[ i ]._trigger( <span class="hljs-string">"activate"</span>, event, <span class="hljs-keyword">this</span>._uiHash( <span class="hljs-keyword">this</span> ) );
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Prepare possible droppables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>($.ui.ddmanager) {
			$.ui.ddmanager.current = <span class="hljs-keyword">this</span>;
		}

		<span class="hljs-keyword">if</span> ($.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(<span class="hljs-keyword">this</span>, event);
		}

		<span class="hljs-keyword">this</span>.dragging = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">this</span>.helper.addClass(<span class="hljs-string">"ui-sortable-helper"</span>);
		<span class="hljs-keyword">this</span>._mouseDrag(event); <span class="hljs-comment">//Execute the drag once - this causes the helper not to be visible before getting its correct position</span>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

	},

	<span class="hljs-attr">_mouseDrag</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
		<span class="hljs-keyword">var</span> i, item, itemElement, intersection,
			o = <span class="hljs-keyword">this</span>.options,
			scrolled = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Compute the helpers position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.position = <span class="hljs-keyword">this</span>._generatePosition(event);
		<span class="hljs-keyword">this</span>.positionAbs = <span class="hljs-keyword">this</span>._convertPositionTo(<span class="hljs-string">"absolute"</span>);

		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.lastPositionAbs) {
			<span class="hljs-keyword">this</span>.lastPositionAbs = <span class="hljs-keyword">this</span>.positionAbs;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Do scrolling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.scroll) {
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>] &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].tagName !== <span class="hljs-string">"HTML"</span>) {

				<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.overflowOffset.top + <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].offsetHeight) - event.pageY &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop + o.scrollSpeed;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.overflowOffset.top &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop - o.scrollSpeed;
				}

				<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.overflowOffset.left + <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].offsetWidth) - event.pageX &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft + o.scrollSpeed;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.overflowOffset.left &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft - o.scrollSpeed;
				}

			} <span class="hljs-keyword">else</span> {

				<span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.document.scrollTop() &lt; o.scrollSensitivity) {
					scrolled = <span class="hljs-keyword">this</span>.document.scrollTop(<span class="hljs-keyword">this</span>.document.scrollTop() - o.scrollSpeed);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.window.height() - (event.pageY - <span class="hljs-keyword">this</span>.document.scrollTop()) &lt; o.scrollSensitivity) {
					scrolled = <span class="hljs-keyword">this</span>.document.scrollTop(<span class="hljs-keyword">this</span>.document.scrollTop() + o.scrollSpeed);
				}

				<span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.document.scrollLeft() &lt; o.scrollSensitivity) {
					scrolled = <span class="hljs-keyword">this</span>.document.scrollLeft(<span class="hljs-keyword">this</span>.document.scrollLeft() - o.scrollSpeed);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.window.width() - (event.pageX - <span class="hljs-keyword">this</span>.document.scrollLeft()) &lt; o.scrollSensitivity) {
					scrolled = <span class="hljs-keyword">this</span>.document.scrollLeft(<span class="hljs-keyword">this</span>.document.scrollLeft() + o.scrollSpeed);
				}

			}

			<span class="hljs-keyword">if</span>(scrolled !== <span class="hljs-literal">false</span> &amp;&amp; $.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
				$.ui.ddmanager.prepareOffsets(<span class="hljs-keyword">this</span>, event);
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Regenerate the absolute position used for position checks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.positionAbs = <span class="hljs-keyword">this</span>._convertPositionTo(<span class="hljs-string">"absolute"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Set the helper position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.options.axis || <span class="hljs-keyword">this</span>.options.axis !== <span class="hljs-string">"y"</span>) {
			<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].style.left = <span class="hljs-keyword">this</span>.position.left+<span class="hljs-string">"px"</span>;
		}
		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.options.axis || <span class="hljs-keyword">this</span>.options.axis !== <span class="hljs-string">"x"</span>) {
			<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].style.top = <span class="hljs-keyword">this</span>.position.top+<span class="hljs-string">"px"</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Rearrange</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Cache variables and intersection, continue if no intersection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			item = <span class="hljs-keyword">this</span>.items[i];
			itemElement = item.item[<span class="hljs-number">0</span>];
			intersection = <span class="hljs-keyword">this</span>._intersectsWithPointer(item);
			<span class="hljs-keyword">if</span> (!intersection) {
				<span class="hljs-keyword">continue</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Only put the placeholder inside the current Container, skip all
items from other containers. This works because when moving
an item from one container to another the
currentContainer is switched before the placeholder is moved.</p>
<p>Without this, moving items in sub-sortables can cause
the placeholder to jitter between the outer and inner container.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (item.instance !== <span class="hljs-keyword">this</span>.currentContainer) {
				<span class="hljs-keyword">continue</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>cannot intersect with itself
no useless actions that have been done before
no action if the item moved is the parent of the item checked</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (itemElement !== <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>] &amp;&amp;
				<span class="hljs-keyword">this</span>.placeholder[intersection === <span class="hljs-number">1</span> ? <span class="hljs-string">"next"</span> : <span class="hljs-string">"prev"</span>]()[<span class="hljs-number">0</span>] !== itemElement &amp;&amp;
				!$.contains(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>], itemElement) &amp;&amp;
				(<span class="hljs-keyword">this</span>.options.type === <span class="hljs-string">"semi-dynamic"</span> ? !$.contains(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], itemElement) : <span class="hljs-literal">true</span>)
			) {

				<span class="hljs-keyword">this</span>.direction = intersection === <span class="hljs-number">1</span> ? <span class="hljs-string">"down"</span> : <span class="hljs-string">"up"</span>;

				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.tolerance === <span class="hljs-string">"pointer"</span> || <span class="hljs-keyword">this</span>._intersectsWithSides(item)) {
					<span class="hljs-keyword">this</span>._rearrange(event, item);
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">break</span>;
				}

				<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"change"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
				<span class="hljs-keyword">break</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Post events to containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._contactContainers(event);</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Interconnect with droppables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>($.ui.ddmanager) {
			$.ui.ddmanager.drag(<span class="hljs-keyword">this</span>, event);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Call callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"sort"</span>, event, <span class="hljs-keyword">this</span>._uiHash());

		<span class="hljs-keyword">this</span>.lastPositionAbs = <span class="hljs-keyword">this</span>.positionAbs;
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

	},

	<span class="hljs-attr">_mouseStop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, noPropagation</span>) </span>{

		<span class="hljs-keyword">if</span>(!event) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>If we are using droppables, inform the manager about the drop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ($.ui.ddmanager &amp;&amp; !<span class="hljs-keyword">this</span>.options.dropBehaviour) {
			$.ui.ddmanager.drop(<span class="hljs-keyword">this</span>, event);
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.revert) {
			<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
				cur = <span class="hljs-keyword">this</span>.placeholder.offset(),
				axis = <span class="hljs-keyword">this</span>.options.axis,
				animation = {};

			<span class="hljs-keyword">if</span> ( !axis || axis === <span class="hljs-string">"x"</span> ) {
				animation.left = cur.left - <span class="hljs-keyword">this</span>.offset.parent.left - <span class="hljs-keyword">this</span>.margins.left + (<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].body ? <span class="hljs-number">0</span> : <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].scrollLeft);
			}
			<span class="hljs-keyword">if</span> ( !axis || axis === <span class="hljs-string">"y"</span> ) {
				animation.top = cur.top - <span class="hljs-keyword">this</span>.offset.parent.top - <span class="hljs-keyword">this</span>.margins.top + (<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].body ? <span class="hljs-number">0</span> : <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].scrollTop);
			}
			<span class="hljs-keyword">this</span>.reverting = <span class="hljs-literal">true</span>;
			$(<span class="hljs-keyword">this</span>.helper).animate( animation, <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.options.revert, <span class="hljs-number">10</span>) || <span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				that._clear(event);
			});
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>._clear(event, noPropagation);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

	},

	<span class="hljs-attr">cancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.dragging) {

			<span class="hljs-keyword">this</span>._mouseUp({ <span class="hljs-attr">target</span>: <span class="hljs-literal">null</span> });

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.helper === <span class="hljs-string">"original"</span>) {
				<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-keyword">this</span>._storedCSS).removeClass(<span class="hljs-string">"ui-sortable-helper"</span>);
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.currentItem.show();
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Post deactivating events to containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				<span class="hljs-keyword">this</span>.containers[i]._trigger(<span class="hljs-string">"deactivate"</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers[i].containerCache.over) {
					<span class="hljs-keyword">this</span>.containers[i]._trigger(<span class="hljs-string">"out"</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
					<span class="hljs-keyword">this</span>.containers[i].containerCache.over = <span class="hljs-number">0</span>;
				}
			}

		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.placeholder) {</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>].parentNode) {
				<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>].parentNode.removeChild(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>]);
			}
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.helper !== <span class="hljs-string">"original"</span> &amp;&amp; <span class="hljs-keyword">this</span>.helper &amp;&amp; <span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].parentNode) {
				<span class="hljs-keyword">this</span>.helper.remove();
			}

			$.extend(<span class="hljs-keyword">this</span>, {
				<span class="hljs-attr">helper</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">dragging</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">reverting</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">_noFinalSort</span>: <span class="hljs-literal">null</span>
			});

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.domPosition.prev) {
				$(<span class="hljs-keyword">this</span>.domPosition.prev).after(<span class="hljs-keyword">this</span>.currentItem);
			} <span class="hljs-keyword">else</span> {
				$(<span class="hljs-keyword">this</span>.domPosition.parent).prepend(<span class="hljs-keyword">this</span>.currentItem);
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

	},

	<span class="hljs-attr">serialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{

		<span class="hljs-keyword">var</span> items = <span class="hljs-keyword">this</span>._getItemsAsjQuery(o &amp;&amp; o.connected),
			str = [];
		o = o || {};

		$(items).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> res = ($(o.item || <span class="hljs-keyword">this</span>).attr(o.attribute || <span class="hljs-string">"id"</span>) || <span class="hljs-string">""</span>).match(o.expression || (<span class="hljs-regexp">/(.+)[\-=_](.+)/</span>));
			<span class="hljs-keyword">if</span> (res) {
				str.push((o.key || res[<span class="hljs-number">1</span>]+<span class="hljs-string">"[]"</span>)+<span class="hljs-string">"="</span>+(o.key &amp;&amp; o.expression ? res[<span class="hljs-number">1</span>] : res[<span class="hljs-number">2</span>]));
			}
		});

		<span class="hljs-keyword">if</span>(!str.length &amp;&amp; o.key) {
			str.push(o.key + <span class="hljs-string">"="</span>);
		}

		<span class="hljs-keyword">return</span> str.join(<span class="hljs-string">"&amp;"</span>);

	},

	<span class="hljs-attr">toArray</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{

		<span class="hljs-keyword">var</span> items = <span class="hljs-keyword">this</span>._getItemsAsjQuery(o &amp;&amp; o.connected),
			ret = [];

		o = o || {};

		items.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ ret.push($(o.item || <span class="hljs-keyword">this</span>).attr(o.attribute || <span class="hljs-string">"id"</span>) || <span class="hljs-string">""</span>); });
		<span class="hljs-keyword">return</span> ret;

	},

	<span class="hljs-comment">/* Be careful with the following core functions */</span>
	_intersectsWith: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{

		<span class="hljs-keyword">var</span> x1 = <span class="hljs-keyword">this</span>.positionAbs.left,
			x2 = x1 + <span class="hljs-keyword">this</span>.helperProportions.width,
			y1 = <span class="hljs-keyword">this</span>.positionAbs.top,
			y2 = y1 + <span class="hljs-keyword">this</span>.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = <span class="hljs-keyword">this</span>.offset.click.top,
			dxClick = <span class="hljs-keyword">this</span>.offset.click.left,
			isOverElementHeight = ( <span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"x"</span> ) || ( ( y1 + dyClick ) &gt; t &amp;&amp; ( y1 + dyClick ) &lt; b ),
			isOverElementWidth = ( <span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"y"</span> ) || ( ( x1 + dxClick ) &gt; l &amp;&amp; ( x1 + dxClick ) &lt; r ),
			isOverElement = isOverElementHeight &amp;&amp; isOverElementWidth;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.tolerance === <span class="hljs-string">"pointer"</span> ||
			<span class="hljs-keyword">this</span>.options.forcePointerForContainers ||
			(<span class="hljs-keyword">this</span>.options.tolerance !== <span class="hljs-string">"pointer"</span> &amp;&amp; <span class="hljs-keyword">this</span>.helperProportions[<span class="hljs-keyword">this</span>.floating ? <span class="hljs-string">"width"</span> : <span class="hljs-string">"height"</span>] &gt; item[<span class="hljs-keyword">this</span>.floating ? <span class="hljs-string">"width"</span> : <span class="hljs-string">"height"</span>])
		) {
			<span class="hljs-keyword">return</span> isOverElement;
		} <span class="hljs-keyword">else</span> {

			<span class="hljs-keyword">return</span> (l &lt; x1 + (<span class="hljs-keyword">this</span>.helperProportions.width / <span class="hljs-number">2</span>) &amp;&amp; <span class="hljs-comment">// Right Half</span>
				x2 - (<span class="hljs-keyword">this</span>.helperProportions.width / <span class="hljs-number">2</span>) &lt; r &amp;&amp; <span class="hljs-comment">// Left Half</span>
				t &lt; y1 + (<span class="hljs-keyword">this</span>.helperProportions.height / <span class="hljs-number">2</span>) &amp;&amp; <span class="hljs-comment">// Bottom Half</span>
				y2 - (<span class="hljs-keyword">this</span>.helperProportions.height / <span class="hljs-number">2</span>) &lt; b ); <span class="hljs-comment">// Top Half</span>

		}
	},

	<span class="hljs-attr">_intersectsWithPointer</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{

		<span class="hljs-keyword">var</span> isOverElementHeight = (<span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"x"</span>) || <span class="hljs-keyword">this</span>._isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.top + <span class="hljs-keyword">this</span>.offset.click.top, item.top, item.height),
			isOverElementWidth = (<span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"y"</span>) || <span class="hljs-keyword">this</span>._isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.left + <span class="hljs-keyword">this</span>.offset.click.left, item.left, item.width),
			isOverElement = isOverElementHeight &amp;&amp; isOverElementWidth,
			verticalDirection = <span class="hljs-keyword">this</span>._getDragVerticalDirection(),
			horizontalDirection = <span class="hljs-keyword">this</span>._getDragHorizontalDirection();

		<span class="hljs-keyword">if</span> (!isOverElement) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.floating ?
			( ((horizontalDirection &amp;&amp; horizontalDirection === <span class="hljs-string">"right"</span>) || verticalDirection === <span class="hljs-string">"down"</span>) ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span> )
			: ( verticalDirection &amp;&amp; (verticalDirection === <span class="hljs-string">"down"</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>) );

	},

	<span class="hljs-attr">_intersectsWithSides</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{

		<span class="hljs-keyword">var</span> isOverBottomHalf = <span class="hljs-keyword">this</span>._isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.top + <span class="hljs-keyword">this</span>.offset.click.top, item.top + (item.height/<span class="hljs-number">2</span>), item.height),
			isOverRightHalf = <span class="hljs-keyword">this</span>._isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.left + <span class="hljs-keyword">this</span>.offset.click.left, item.left + (item.width/<span class="hljs-number">2</span>), item.width),
			verticalDirection = <span class="hljs-keyword">this</span>._getDragVerticalDirection(),
			horizontalDirection = <span class="hljs-keyword">this</span>._getDragHorizontalDirection();

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.floating &amp;&amp; horizontalDirection) {
			<span class="hljs-keyword">return</span> ((horizontalDirection === <span class="hljs-string">"right"</span> &amp;&amp; isOverRightHalf) || (horizontalDirection === <span class="hljs-string">"left"</span> &amp;&amp; !isOverRightHalf));
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> verticalDirection &amp;&amp; ((verticalDirection === <span class="hljs-string">"down"</span> &amp;&amp; isOverBottomHalf) || (verticalDirection === <span class="hljs-string">"up"</span> &amp;&amp; !isOverBottomHalf));
		}

	},

	<span class="hljs-attr">_getDragVerticalDirection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> delta = <span class="hljs-keyword">this</span>.positionAbs.top - <span class="hljs-keyword">this</span>.lastPositionAbs.top;
		<span class="hljs-keyword">return</span> delta !== <span class="hljs-number">0</span> &amp;&amp; (delta &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"down"</span> : <span class="hljs-string">"up"</span>);
	},

	<span class="hljs-attr">_getDragHorizontalDirection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> delta = <span class="hljs-keyword">this</span>.positionAbs.left - <span class="hljs-keyword">this</span>.lastPositionAbs.left;
		<span class="hljs-keyword">return</span> delta !== <span class="hljs-number">0</span> &amp;&amp; (delta &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"right"</span> : <span class="hljs-string">"left"</span>);
	},

	<span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
		<span class="hljs-keyword">this</span>._refreshItems(event);
		<span class="hljs-keyword">this</span>._setHandleClassName();
		<span class="hljs-keyword">this</span>.refreshPositions();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	<span class="hljs-attr">_connectWith</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">return</span> options.connectWith.constructor === <span class="hljs-built_in">String</span> ? [options.connectWith] : options.connectWith;
	},

	<span class="hljs-attr">_getItemsAsjQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">connected</span>) </span>{

		<span class="hljs-keyword">var</span> i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = <span class="hljs-keyword">this</span>._connectWith();

		<span class="hljs-keyword">if</span>(connectWith &amp;&amp; connected) {
			<span class="hljs-keyword">for</span> (i = connectWith.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				cur = $(connectWith[i], <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>]);
				<span class="hljs-keyword">for</span> ( j = cur.length - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--){
					inst = $.data(cur[j], <span class="hljs-keyword">this</span>.widgetFullName);
					<span class="hljs-keyword">if</span>(inst &amp;&amp; inst !== <span class="hljs-keyword">this</span> &amp;&amp; !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(<span class="hljs-string">".ui-sortable-helper"</span>).not(<span class="hljs-string">".ui-sortable-placeholder"</span>), inst]);
					}
				}
			}
		}

		queries.push([$.isFunction(<span class="hljs-keyword">this</span>.options.items) ? <span class="hljs-keyword">this</span>.options.items.call(<span class="hljs-keyword">this</span>.element, <span class="hljs-literal">null</span>, { <span class="hljs-attr">options</span>: <span class="hljs-keyword">this</span>.options, <span class="hljs-attr">item</span>: <span class="hljs-keyword">this</span>.currentItem }) : $(<span class="hljs-keyword">this</span>.options.items, <span class="hljs-keyword">this</span>.element).not(<span class="hljs-string">".ui-sortable-helper"</span>).not(<span class="hljs-string">".ui-sortable-placeholder"</span>), <span class="hljs-keyword">this</span>]);

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addItems</span>(<span class="hljs-params"></span>) </span>{
			items.push( <span class="hljs-keyword">this</span> );
		}
		<span class="hljs-keyword">for</span> (i = queries.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
			queries[i][<span class="hljs-number">0</span>].each( addItems );
		}

		<span class="hljs-keyword">return</span> $(items);

	},

	<span class="hljs-attr">_removeCurrentsFromItems</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

		<span class="hljs-keyword">var</span> list = <span class="hljs-keyword">this</span>.currentItem.find(<span class="hljs-string">":data("</span> + <span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">"-item)"</span>);

		<span class="hljs-keyword">this</span>.items = $.grep(<span class="hljs-keyword">this</span>.items, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j &lt; list.length; j++) {
				<span class="hljs-keyword">if</span>(list[j] === item.item[<span class="hljs-number">0</span>]) {
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			}
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		});

	},

	<span class="hljs-attr">_refreshItems</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{

		<span class="hljs-keyword">this</span>.items = [];
		<span class="hljs-keyword">this</span>.containers = [<span class="hljs-keyword">this</span>];

		<span class="hljs-keyword">var</span> i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = <span class="hljs-keyword">this</span>.items,
			queries = [[$.isFunction(<span class="hljs-keyword">this</span>.options.items) ? <span class="hljs-keyword">this</span>.options.items.call(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], event, { <span class="hljs-attr">item</span>: <span class="hljs-keyword">this</span>.currentItem }) : $(<span class="hljs-keyword">this</span>.options.items, <span class="hljs-keyword">this</span>.element), <span class="hljs-keyword">this</span>]],
			connectWith = <span class="hljs-keyword">this</span>._connectWith();

		<span class="hljs-keyword">if</span>(connectWith &amp;&amp; <span class="hljs-keyword">this</span>.ready) { <span class="hljs-comment">//Shouldn't be run the first time through due to massive slow-down</span>
			<span class="hljs-keyword">for</span> (i = connectWith.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				cur = $(connectWith[i], <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>]);
				<span class="hljs-keyword">for</span> (j = cur.length - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--){
					inst = $.data(cur[j], <span class="hljs-keyword">this</span>.widgetFullName);
					<span class="hljs-keyword">if</span>(inst &amp;&amp; inst !== <span class="hljs-keyword">this</span> &amp;&amp; !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[<span class="hljs-number">0</span>], event, { <span class="hljs-attr">item</span>: <span class="hljs-keyword">this</span>.currentItem }) : $(inst.options.items, inst.element), inst]);
						<span class="hljs-keyword">this</span>.containers.push(inst);
					}
				}
			}
		}

		<span class="hljs-keyword">for</span> (i = queries.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
			targetData = queries[i][<span class="hljs-number">1</span>];
			_queries = queries[i][<span class="hljs-number">0</span>];

			<span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>, queriesLength = _queries.length; j &lt; queriesLength; j++) {
				item = $(_queries[j]);

				item.data(<span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">"-item"</span>, targetData); <span class="hljs-comment">// Data for target checking (mouse manager)</span>

				items.push({
					<span class="hljs-attr">item</span>: item,
					<span class="hljs-attr">instance</span>: targetData,
					<span class="hljs-attr">width</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">0</span>,
					<span class="hljs-attr">left</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>
				});
			}
		}

	},

	<span class="hljs-attr">refreshPositions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fast</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Determine whether items are being displayed horizontally</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.floating = <span class="hljs-keyword">this</span>.items.length ?
			<span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"x"</span> || <span class="hljs-keyword">this</span>._isFloating( <span class="hljs-keyword">this</span>.items[ <span class="hljs-number">0</span> ].item ) :
			<span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>This has to be redone because due to the item being moved out/into the offsetParent, the offsetParents position will change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.offsetParent &amp;&amp; <span class="hljs-keyword">this</span>.helper) {
			<span class="hljs-keyword">this</span>.offset.parent = <span class="hljs-keyword">this</span>._getParentOffset();
		}

		<span class="hljs-keyword">var</span> i, item, t, p;

		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
			item = <span class="hljs-keyword">this</span>.items[i];</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>We ignore calculating positions of all connected containers when were not over them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(item.instance !== <span class="hljs-keyword">this</span>.currentContainer &amp;&amp; <span class="hljs-keyword">this</span>.currentContainer &amp;&amp; item.item[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
				<span class="hljs-keyword">continue</span>;
			}

			t = <span class="hljs-keyword">this</span>.options.toleranceElement ? $(<span class="hljs-keyword">this</span>.options.toleranceElement, item.item) : item.item;

			<span class="hljs-keyword">if</span> (!fast) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.custom &amp;&amp; <span class="hljs-keyword">this</span>.options.custom.refreshContainers) {
			<span class="hljs-keyword">this</span>.options.custom.refreshContainers.call(<span class="hljs-keyword">this</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				p = <span class="hljs-keyword">this</span>.containers[i].element.offset();
				<span class="hljs-keyword">this</span>.containers[i].containerCache.left = p.left;
				<span class="hljs-keyword">this</span>.containers[i].containerCache.top = p.top;
				<span class="hljs-keyword">this</span>.containers[i].containerCache.width = <span class="hljs-keyword">this</span>.containers[i].element.outerWidth();
				<span class="hljs-keyword">this</span>.containers[i].containerCache.height = <span class="hljs-keyword">this</span>.containers[i].element.outerHeight();
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	<span class="hljs-attr">_createPlaceholder</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">that</span>) </span>{
		that = that || <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">var</span> className,
			o = that.options;

		<span class="hljs-keyword">if</span>(!o.placeholder || o.placeholder.constructor === <span class="hljs-built_in">String</span>) {
			className = o.placeholder;
			o.placeholder = {
				<span class="hljs-attr">element</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

					<span class="hljs-keyword">var</span> nodeName = that.currentItem[<span class="hljs-number">0</span>].nodeName.toLowerCase(),
						element = $( <span class="hljs-string">"&lt;"</span> + nodeName + <span class="hljs-string">"&gt;"</span>, that.document[<span class="hljs-number">0</span>] )
							.addClass(className || that.currentItem[<span class="hljs-number">0</span>].className+<span class="hljs-string">" ui-sortable-placeholder"</span>)
							.removeClass(<span class="hljs-string">"ui-sortable-helper"</span>);

					<span class="hljs-keyword">if</span> ( nodeName === <span class="hljs-string">"tbody"</span> ) {
						that._createTrPlaceholder(
							that.currentItem.find( <span class="hljs-string">"tr"</span> ).eq( <span class="hljs-number">0</span> ),
							$( <span class="hljs-string">"&lt;tr&gt;"</span>, that.document[ <span class="hljs-number">0</span> ] ).appendTo( element )
						);
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( nodeName === <span class="hljs-string">"tr"</span> ) {
						that._createTrPlaceholder( that.currentItem, element );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( nodeName === <span class="hljs-string">"img"</span> ) {
						element.attr( <span class="hljs-string">"src"</span>, that.currentItem.attr( <span class="hljs-string">"src"</span> ) );
					}

					<span class="hljs-keyword">if</span> ( !className ) {
						element.css( <span class="hljs-string">"visibility"</span>, <span class="hljs-string">"hidden"</span> );
					}

					<span class="hljs-keyword">return</span> element;
				},
				<span class="hljs-attr">update</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">container, p</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <ol>
<li>If a className is set as placeholder option, we dont force sizes - the class is responsible for that</li>
<li>The option forcePlaceholderSize can be enabled to force it even if a class name is specified</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>(className &amp;&amp; !o.forcePlaceholderSize) {
						<span class="hljs-keyword">return</span>;
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>If the element doesnt have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>(!p.height()) { p.height(that.currentItem.innerHeight() - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingTop"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingBottom"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)); }
					<span class="hljs-keyword">if</span>(!p.width()) { p.width(that.currentItem.innerWidth() - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingLeft"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingRight"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)); }
				}
			};
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Create the placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Append it after the actual current item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		that.currentItem.after(that.placeholder);</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		o.placeholder.update(that, that.placeholder);

	},

	<span class="hljs-attr">_createTrPlaceholder</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> sourceTr, targetTr </span>) </span>{
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

		sourceTr.children().each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">"&lt;td&gt;&amp;#160;&lt;/td&gt;"</span>, that.document[ <span class="hljs-number">0</span> ] )
				.attr( <span class="hljs-string">"colspan"</span>, $( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">"colspan"</span> ) || <span class="hljs-number">1</span> )
				.appendTo( targetTr );
		});
	},

	<span class="hljs-attr">_contactContainers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
		<span class="hljs-keyword">var</span> i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom, floating, axis,
			innermostContainer = <span class="hljs-literal">null</span>,
			innermostIndex = <span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>get innermost container that intersects with item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>never consider a container thats located within the item itself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>($.contains(<span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.containers[i].element[<span class="hljs-number">0</span>])) {
				<span class="hljs-keyword">continue</span>;
			}

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._intersectsWith(<span class="hljs-keyword">this</span>.containers[i].containerCache)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>if weve already found a container and its more inner than this, then continue</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(innermostContainer &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.containers[i].element[<span class="hljs-number">0</span>], innermostContainer.element[<span class="hljs-number">0</span>])) {
					<span class="hljs-keyword">continue</span>;
				}

				innermostContainer = <span class="hljs-keyword">this</span>.containers[i];
				innermostIndex = i;

			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>container doesnt intersect. trigger out event if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers[i].containerCache.over) {
					<span class="hljs-keyword">this</span>.containers[i]._trigger(<span class="hljs-string">"out"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
					<span class="hljs-keyword">this</span>.containers[i].containerCache.over = <span class="hljs-number">0</span>;
				}
			}

		}</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>if no intersecting containers found, return</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!innermostContainer) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>move the item into the container if its not there already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers.length === <span class="hljs-number">1</span>) {
			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.containers[innermostIndex].containerCache.over) {
				<span class="hljs-keyword">this</span>.containers[innermostIndex]._trigger(<span class="hljs-string">"over"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
				<span class="hljs-keyword">this</span>.containers[innermostIndex].containerCache.over = <span class="hljs-number">1</span>;
			}
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>When entering a new container, we will find the item with the least distance and append our item near it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			dist = <span class="hljs-number">10000</span>;
			itemWithLeastDistance = <span class="hljs-literal">null</span>;
			floating = innermostContainer.floating || <span class="hljs-keyword">this</span>._isFloating(<span class="hljs-keyword">this</span>.currentItem);
			posProperty = floating ? <span class="hljs-string">"left"</span> : <span class="hljs-string">"top"</span>;
			sizeProperty = floating ? <span class="hljs-string">"width"</span> : <span class="hljs-string">"height"</span>;
			axis = floating ? <span class="hljs-string">"clientX"</span> : <span class="hljs-string">"clientY"</span>;

			<span class="hljs-keyword">for</span> (j = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--) {
				<span class="hljs-keyword">if</span>(!$.contains(<span class="hljs-keyword">this</span>.containers[innermostIndex].element[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.items[j].item[<span class="hljs-number">0</span>])) {
					<span class="hljs-keyword">continue</span>;
				}
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.items[j].item[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
					<span class="hljs-keyword">continue</span>;
				}

				cur = <span class="hljs-keyword">this</span>.items[j].item.offset()[posProperty];
				nearBottom = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">if</span> ( event[ axis ] - cur &gt; <span class="hljs-keyword">this</span>.items[ j ][ sizeProperty ] / <span class="hljs-number">2</span> ) {
					nearBottom = <span class="hljs-literal">true</span>;
				}

				<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">Math</span>.abs( event[ axis ] - cur ) &lt; dist ) {
					dist = <span class="hljs-built_in">Math</span>.abs( event[ axis ] - cur );
					itemWithLeastDistance = <span class="hljs-keyword">this</span>.items[ j ];
					<span class="hljs-keyword">this</span>.direction = nearBottom ? <span class="hljs-string">"up"</span>: <span class="hljs-string">"down"</span>;
				}
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Check if dropOnEmpty is enabled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(!itemWithLeastDistance &amp;&amp; !<span class="hljs-keyword">this</span>.options.dropOnEmpty) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.currentContainer === <span class="hljs-keyword">this</span>.containers[innermostIndex]) {
				<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.currentContainer.containerCache.over ) {
					<span class="hljs-keyword">this</span>.containers[ innermostIndex ]._trigger( <span class="hljs-string">"over"</span>, event, <span class="hljs-keyword">this</span>._uiHash() );
					<span class="hljs-keyword">this</span>.currentContainer.containerCache.over = <span class="hljs-number">1</span>;
				}
				<span class="hljs-keyword">return</span>;
			}

			itemWithLeastDistance ? <span class="hljs-keyword">this</span>._rearrange(event, itemWithLeastDistance, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>) : <span class="hljs-keyword">this</span>._rearrange(event, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>.containers[innermostIndex].element, <span class="hljs-literal">true</span>);
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"change"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
			<span class="hljs-keyword">this</span>.containers[innermostIndex]._trigger(<span class="hljs-string">"change"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
			<span class="hljs-keyword">this</span>.currentContainer = <span class="hljs-keyword">this</span>.containers[innermostIndex];</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Update the placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.options.placeholder.update(<span class="hljs-keyword">this</span>.currentContainer, <span class="hljs-keyword">this</span>.placeholder);

			<span class="hljs-keyword">this</span>.containers[innermostIndex]._trigger(<span class="hljs-string">"over"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
			<span class="hljs-keyword">this</span>.containers[innermostIndex].containerCache.over = <span class="hljs-number">1</span>;
		}


	},

	<span class="hljs-attr">_createHelper</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], [event, <span class="hljs-keyword">this</span>.currentItem])) : (o.helper === <span class="hljs-string">"clone"</span> ? <span class="hljs-keyword">this</span>.currentItem.clone() : <span class="hljs-keyword">this</span>.currentItem);</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Add the helper to the DOM if that didnt happen already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!helper.parents(<span class="hljs-string">"body"</span>).length) {
			$(o.appendTo !== <span class="hljs-string">"parent"</span> ? o.appendTo : <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>].parentNode)[<span class="hljs-number">0</span>].appendChild(helper[<span class="hljs-number">0</span>]);
		}

		<span class="hljs-keyword">if</span>(helper[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">this</span>._storedCSS = { <span class="hljs-attr">width</span>: <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>].style.width, <span class="hljs-attr">height</span>: <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>].style.height, <span class="hljs-attr">position</span>: <span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"position"</span>), <span class="hljs-attr">top</span>: <span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"top"</span>), <span class="hljs-attr">left</span>: <span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"left"</span>) };
		}

		<span class="hljs-keyword">if</span>(!helper[<span class="hljs-number">0</span>].style.width || o.forceHelperSize) {
			helper.width(<span class="hljs-keyword">this</span>.currentItem.width());
		}
		<span class="hljs-keyword">if</span>(!helper[<span class="hljs-number">0</span>].style.height || o.forceHelperSize) {
			helper.height(<span class="hljs-keyword">this</span>.currentItem.height());
		}

		<span class="hljs-keyword">return</span> helper;

	},

	<span class="hljs-attr">_adjustOffsetFromHelper</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"string"</span>) {
			obj = obj.split(<span class="hljs-string">" "</span>);
		}
		<span class="hljs-keyword">if</span> ($.isArray(obj)) {
			obj = {<span class="hljs-attr">left</span>: +obj[<span class="hljs-number">0</span>], <span class="hljs-attr">top</span>: +obj[<span class="hljs-number">1</span>] || <span class="hljs-number">0</span>};
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"left"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.left = obj.left + <span class="hljs-keyword">this</span>.margins.left;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"right"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.left = <span class="hljs-keyword">this</span>.helperProportions.width - obj.right + <span class="hljs-keyword">this</span>.margins.left;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"top"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.top = obj.top + <span class="hljs-keyword">this</span>.margins.top;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"bottom"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.top = <span class="hljs-keyword">this</span>.helperProportions.height - obj.bottom + <span class="hljs-keyword">this</span>.margins.top;
		}
	},

	<span class="hljs-attr">_getParentOffset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Get the offsetParent and cache its position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offsetParent = <span class="hljs-keyword">this</span>.helper.offsetParent();
		<span class="hljs-keyword">var</span> po = <span class="hljs-keyword">this</span>.offsetParent.offset();</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>This is a special case where we need to modify a offset calculated on start, since the following happened:</p>
<ol>
<li>The position of the helper is absolute, so its position is calculated based on the next positioned parent</li>
<li>The actual offset parent is a child of the scroll parent, and the scroll parent isnt the document, which means that
the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>] &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) {
			po.left += <span class="hljs-keyword">this</span>.scrollParent.scrollLeft();
			po.top += <span class="hljs-keyword">this</span>.scrollParent.scrollTop();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>This needs to be actually done for all browsers, since pageX/pageY includes this information
with an ugly IE fix</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].body || (<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].tagName &amp;&amp; <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].tagName.toLowerCase() === <span class="hljs-string">"html"</span> &amp;&amp; $.ui.ie)) {
			po = { <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">0</span> };
		}

		<span class="hljs-keyword">return</span> {
			<span class="hljs-attr">top</span>: po.top + (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.offsetParent.css(<span class="hljs-string">"borderTopWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			<span class="hljs-attr">left</span>: po.left + (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.offsetParent.css(<span class="hljs-string">"borderLeftWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>)
		};

	},

	<span class="hljs-attr">_getRelativeOffset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"relative"</span>) {
			<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">this</span>.currentItem.position();
			<span class="hljs-keyword">return</span> {
				<span class="hljs-attr">top</span>: p.top - (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"top"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + <span class="hljs-keyword">this</span>.scrollParent.scrollTop(),
				<span class="hljs-attr">left</span>: p.left - (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"left"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + <span class="hljs-keyword">this</span>.scrollParent.scrollLeft()
			};
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> { <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">0</span> };
		}

	},

	<span class="hljs-attr">_cacheMargins</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>.margins = {
			<span class="hljs-attr">left</span>: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"marginLeft"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			<span class="hljs-attr">top</span>: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"marginTop"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>)
		};
	},

	<span class="hljs-attr">_cacheHelperProportions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>.helperProportions = {
			<span class="hljs-attr">width</span>: <span class="hljs-keyword">this</span>.helper.outerWidth(),
			<span class="hljs-attr">height</span>: <span class="hljs-keyword">this</span>.helper.outerHeight()
		};
	},

	<span class="hljs-attr">_setContainment</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

		<span class="hljs-keyword">var</span> ce, co, over,
			o = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">if</span>(o.containment === <span class="hljs-string">"parent"</span>) {
			o.containment = <span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].parentNode;
		}
		<span class="hljs-keyword">if</span>(o.containment === <span class="hljs-string">"document"</span> || o.containment === <span class="hljs-string">"window"</span>) {
			<span class="hljs-keyword">this</span>.containment = [
				<span class="hljs-number">0</span> - <span class="hljs-keyword">this</span>.offset.relative.left - <span class="hljs-keyword">this</span>.offset.parent.left,
				<span class="hljs-number">0</span> - <span class="hljs-keyword">this</span>.offset.relative.top - <span class="hljs-keyword">this</span>.offset.parent.top,
				o.containment === <span class="hljs-string">"document"</span> ? <span class="hljs-keyword">this</span>.document.width() : <span class="hljs-keyword">this</span>.window.width() - <span class="hljs-keyword">this</span>.helperProportions.width - <span class="hljs-keyword">this</span>.margins.left,
				(o.containment === <span class="hljs-string">"document"</span> ? <span class="hljs-keyword">this</span>.document.width() : <span class="hljs-keyword">this</span>.window.height() || <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].body.parentNode.scrollHeight) - <span class="hljs-keyword">this</span>.helperProportions.height - <span class="hljs-keyword">this</span>.margins.top
			];
		}

		<span class="hljs-keyword">if</span>(!(<span class="hljs-regexp">/^(document|window|parent)$/</span>).test(o.containment)) {
			ce = $(o.containment)[<span class="hljs-number">0</span>];
			co = $(o.containment).offset();
			over = ($(ce).css(<span class="hljs-string">"overflow"</span>) !== <span class="hljs-string">"hidden"</span>);

			<span class="hljs-keyword">this</span>.containment = [
				co.left + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderLeftWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingLeft"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.margins.left,
				co.top + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderTopWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingTop"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.margins.top,
				co.left+(over ? <span class="hljs-built_in">Math</span>.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderLeftWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingRight"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.helperProportions.width - <span class="hljs-keyword">this</span>.margins.left,
				co.top+(over ? <span class="hljs-built_in">Math</span>.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderTopWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingBottom"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.helperProportions.height - <span class="hljs-keyword">this</span>.margins.top
			];
		}

	},

	<span class="hljs-attr">_convertPositionTo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, pos</span>) </span>{

		<span class="hljs-keyword">if</span>(!pos) {
			pos = <span class="hljs-keyword">this</span>.position;
		}
		<span class="hljs-keyword">var</span> mod = d === <span class="hljs-string">"absolute"</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>,
			scroll = <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; !(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>] &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) ? <span class="hljs-keyword">this</span>.offsetParent : <span class="hljs-keyword">this</span>.scrollParent,
			scrollIsRootNode = (<span class="hljs-regexp">/(html|body)/i</span>).test(scroll[<span class="hljs-number">0</span>].tagName);

		<span class="hljs-keyword">return</span> {
			<span class="hljs-attr">top</span>: (
				pos.top	+																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.relative.top * mod +										<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.top * mod -											<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollTop() : ( scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollTop() ) ) * mod)
			),
			<span class="hljs-attr">left</span>: (
				pos.left +																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.relative.left * mod +										<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.left * mod	-										<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollLeft() : scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollLeft() ) * mod)
			)
		};

	},

	<span class="hljs-attr">_generatePosition</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{

		<span class="hljs-keyword">var</span> top, left,
			o = <span class="hljs-keyword">this</span>.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; !(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>] &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) ? <span class="hljs-keyword">this</span>.offsetParent : <span class="hljs-keyword">this</span>.scrollParent, scrollIsRootNode = (<span class="hljs-regexp">/(html|body)/i</span>).test(scroll[<span class="hljs-number">0</span>].tagName);</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>This is another very weird special case that only happens for relative elements:</p>
<ol>
<li>If the css position is relative</li>
<li>and the scroll parent is the document or similar to the offset parent
we have to refresh the relative offset during the scroll so there are no jumps</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"relative"</span> &amp;&amp; !(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>] &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) {
			<span class="hljs-keyword">this</span>.offset.relative = <span class="hljs-keyword">this</span>._getRelativeOffset();
		}

		<span class="hljs-comment">/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */</span>

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.originalPosition) { <span class="hljs-comment">//If we are not dragging yet, we won't check for options</span>

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containment) {
				<span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.offset.click.left &lt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>]) {
					pageX = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>] + <span class="hljs-keyword">this</span>.offset.click.left;
				}
				<span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.offset.click.top &lt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>]) {
					pageY = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>] + <span class="hljs-keyword">this</span>.offset.click.top;
				}
				<span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.offset.click.left &gt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">2</span>]) {
					pageX = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">2</span>] + <span class="hljs-keyword">this</span>.offset.click.left;
				}
				<span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.offset.click.top &gt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">3</span>]) {
					pageY = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">3</span>] + <span class="hljs-keyword">this</span>.offset.click.top;
				}
			}

			<span class="hljs-keyword">if</span>(o.grid) {
				top = <span class="hljs-keyword">this</span>.originalPageY + <span class="hljs-built_in">Math</span>.round((pageY - <span class="hljs-keyword">this</span>.originalPageY) / o.grid[<span class="hljs-number">1</span>]) * o.grid[<span class="hljs-number">1</span>];
				pageY = <span class="hljs-keyword">this</span>.containment ? ( (top - <span class="hljs-keyword">this</span>.offset.click.top &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>] &amp;&amp; top - <span class="hljs-keyword">this</span>.offset.click.top &lt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">3</span>]) ? top : ((top - <span class="hljs-keyword">this</span>.offset.click.top &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>]) ? top - o.grid[<span class="hljs-number">1</span>] : top + o.grid[<span class="hljs-number">1</span>])) : top;

				left = <span class="hljs-keyword">this</span>.originalPageX + <span class="hljs-built_in">Math</span>.round((pageX - <span class="hljs-keyword">this</span>.originalPageX) / o.grid[<span class="hljs-number">0</span>]) * o.grid[<span class="hljs-number">0</span>];
				pageX = <span class="hljs-keyword">this</span>.containment ? ( (left - <span class="hljs-keyword">this</span>.offset.click.left &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>] &amp;&amp; left - <span class="hljs-keyword">this</span>.offset.click.left &lt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">2</span>]) ? left : ((left - <span class="hljs-keyword">this</span>.offset.click.left &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>]) ? left - o.grid[<span class="hljs-number">0</span>] : left + o.grid[<span class="hljs-number">0</span>])) : left;
			}

		}

		<span class="hljs-keyword">return</span> {
			<span class="hljs-attr">top</span>: (
				pageY -																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.click.top -													<span class="hljs-comment">// Click offset (relative to the element)</span>
				<span class="hljs-keyword">this</span>.offset.relative.top	-											<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.top +												<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollTop() : ( scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollTop() ) ))
			),
			<span class="hljs-attr">left</span>: (
				pageX -																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.click.left -												<span class="hljs-comment">// Click offset (relative to the element)</span>
				<span class="hljs-keyword">this</span>.offset.relative.left	-											<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.left +												<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollLeft() : scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollLeft() ))
			)
		};

	},

	<span class="hljs-attr">_rearrange</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, i, a, hardRefresh</span>) </span>{

		a ? a[<span class="hljs-number">0</span>].appendChild(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>]) : i.item[<span class="hljs-number">0</span>].parentNode.insertBefore(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>], (<span class="hljs-keyword">this</span>.direction === <span class="hljs-string">"down"</span> ? i.item[<span class="hljs-number">0</span>] : i.item[<span class="hljs-number">0</span>].nextSibling));</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Various things done here to improve the performance:</p>
<ol>
<li>we create a setTimeout, that calls refreshPositions</li>
<li>on the instance, we have a counter variable, that gets higher after every append</li>
<li>on the local scope, we copy the counter variable, and check in the timeout, if its still the same</li>
<li>this lets only the last addition to the timeout stack through</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.counter = <span class="hljs-keyword">this</span>.counter ? ++<span class="hljs-keyword">this</span>.counter : <span class="hljs-number">1</span>;
		<span class="hljs-keyword">var</span> counter = <span class="hljs-keyword">this</span>.counter;

		<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span>(counter === <span class="hljs-keyword">this</span>.counter) {
				<span class="hljs-keyword">this</span>.refreshPositions(!hardRefresh); <span class="hljs-comment">//Precompute after each DOM insertion, NOT on mousemove</span>
			}
		});

	},

	<span class="hljs-attr">_clear</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, noPropagation</span>) </span>{

		<span class="hljs-keyword">this</span>.reverting = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>We delay all events that have to be triggered to after the point where the placeholder has been removed and
everything else normalized again</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> i,
			delayedTriggers = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>We first have to update the dom position of the actual currentItem
Note: dont do it if the current item is already removed (by a user), or it gets reappended (see #4088)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._noFinalSort &amp;&amp; <span class="hljs-keyword">this</span>.currentItem.parent().length) {
			<span class="hljs-keyword">this</span>.placeholder.before(<span class="hljs-keyword">this</span>.currentItem);
		}
		<span class="hljs-keyword">this</span>._noFinalSort = <span class="hljs-literal">null</span>;

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">for</span>(i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>._storedCSS) {
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._storedCSS[i] === <span class="hljs-string">"auto"</span> || <span class="hljs-keyword">this</span>._storedCSS[i] === <span class="hljs-string">"static"</span>) {
					<span class="hljs-keyword">this</span>._storedCSS[i] = <span class="hljs-string">""</span>;
				}
			}
			<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-keyword">this</span>._storedCSS).removeClass(<span class="hljs-string">"ui-sortable-helper"</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.currentItem.show();
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.fromOutside &amp;&amp; !noPropagation) {
			delayedTriggers.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"receive"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>.fromOutside)); });
		}
		<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.fromOutside || <span class="hljs-keyword">this</span>.domPosition.prev !== <span class="hljs-keyword">this</span>.currentItem.prev().not(<span class="hljs-string">".ui-sortable-helper"</span>)[<span class="hljs-number">0</span>] || <span class="hljs-keyword">this</span>.domPosition.parent !== <span class="hljs-keyword">this</span>.currentItem.parent()[<span class="hljs-number">0</span>]) &amp;&amp; !noPropagation) {
			delayedTriggers.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"update"</span>, event, <span class="hljs-keyword">this</span>._uiHash()); }); <span class="hljs-comment">//Trigger update callback if the DOM position has changed</span>
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Check if the items Container has Changed and trigger appropriate
events.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> !== <span class="hljs-keyword">this</span>.currentContainer) {
			<span class="hljs-keyword">if</span>(!noPropagation) {
				delayedTriggers.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"remove"</span>, event, <span class="hljs-keyword">this</span>._uiHash()); });
				delayedTriggers.push((<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ c._trigger(<span class="hljs-string">"receive"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>)); };  }).call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.currentContainer));
				delayedTriggers.push((<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ c._trigger(<span class="hljs-string">"update"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));  }; }).call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.currentContainer));
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Post events to containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delayEvent</span>(<span class="hljs-params"> type, instance, container </span>) </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				container._trigger( type, event, instance._uiHash( instance ) );
			};
		}
		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
			<span class="hljs-keyword">if</span> (!noPropagation) {
				delayedTriggers.push( delayEvent( <span class="hljs-string">"deactivate"</span>, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.containers[ i ] ) );
			}
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers[i].containerCache.over) {
				delayedTriggers.push( delayEvent( <span class="hljs-string">"out"</span>, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.containers[ i ] ) );
				<span class="hljs-keyword">this</span>.containers[i].containerCache.over = <span class="hljs-number">0</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Do what was originally in plugins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.storedCursor ) {
			<span class="hljs-keyword">this</span>.document.find( <span class="hljs-string">"body"</span> ).css( <span class="hljs-string">"cursor"</span>, <span class="hljs-keyword">this</span>.storedCursor );
			<span class="hljs-keyword">this</span>.storedStylesheet.remove();
		}
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._storedOpacity) {
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>, <span class="hljs-keyword">this</span>._storedOpacity);
		}
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._storedZIndex) {
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>, <span class="hljs-keyword">this</span>._storedZIndex === <span class="hljs-string">"auto"</span> ? <span class="hljs-string">""</span> : <span class="hljs-keyword">this</span>._storedZIndex);
		}

		<span class="hljs-keyword">this</span>.dragging = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">if</span>(!noPropagation) {
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"beforeStop"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>].parentNode.removeChild(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>]);

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.cancelHelperRemoval ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.helper[ <span class="hljs-number">0</span> ] !== <span class="hljs-keyword">this</span>.currentItem[ <span class="hljs-number">0</span> ] ) {
				<span class="hljs-keyword">this</span>.helper.remove();
			}
			<span class="hljs-keyword">this</span>.helper = <span class="hljs-literal">null</span>;
		}

		<span class="hljs-keyword">if</span>(!noPropagation) {
			<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i &lt; delayedTriggers.length; i++) {
				delayedTriggers[i].call(<span class="hljs-keyword">this</span>, event);
			} <span class="hljs-comment">//Trigger all delayed events</span>
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"stop"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
		}

		<span class="hljs-keyword">this</span>.fromOutside = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">return</span> !<span class="hljs-keyword">this</span>.cancelHelperRemoval;

	},

	<span class="hljs-attr">_trigger</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">if</span> ($.Widget.prototype._trigger.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>) === <span class="hljs-literal">false</span>) {
			<span class="hljs-keyword">this</span>.cancel();
		}
	},

	<span class="hljs-attr">_uiHash</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_inst</span>) </span>{
		<span class="hljs-keyword">var</span> inst = _inst || <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">return</span> {
			<span class="hljs-attr">helper</span>: inst.helper,
			<span class="hljs-attr">placeholder</span>: inst.placeholder || $([]),
			<span class="hljs-attr">position</span>: inst.position,
			<span class="hljs-attr">originalPosition</span>: inst.originalPosition,
			<span class="hljs-attr">offset</span>: inst.positionAbs,
			<span class="hljs-attr">item</span>: inst.currentItem,
			<span class="hljs-attr">sender</span>: _inst ? _inst.element : <span class="hljs-literal">null</span>
		};
	}

});

}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
