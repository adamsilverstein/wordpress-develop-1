<!DOCTYPE html>

<html>
<head>
  <title>widgets.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>widgets.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*global ajaxurl, isRtl */</span>
<span class="hljs-keyword">var</span> wpWidgets;
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>) </span>{
	<span class="hljs-keyword">var</span> $<span class="hljs-built_in">document</span> = $( <span class="hljs-built_in">document</span> );

wpWidgets = {
	<span class="hljs-comment">/**
	 * A closed Sidebar that gets a Widget dragged over it.
	 *
	 * @var element|null
	 */</span>
	hoveredSidebar: <span class="hljs-literal">null</span>,

	<span class="hljs-attr">init</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> rem, the_id,
			self = <span class="hljs-keyword">this</span>,
			chooser = $(<span class="hljs-string">'.widgets-chooser'</span>),
			selectSidebar = chooser.find(<span class="hljs-string">'.widgets-chooser-sidebars'</span>),
			sidebars = $(<span class="hljs-string">'div.widgets-sortables'</span>),
			isRTL = !! ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> isRtl &amp;&amp; isRtl );

		$(<span class="hljs-string">'#widgets-right .sidebar-name'</span>).click( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>),
				$wrap = $<span class="hljs-keyword">this</span>.closest(<span class="hljs-string">'.widgets-holder-wrap'</span>);

			<span class="hljs-keyword">if</span> ( $wrap.hasClass(<span class="hljs-string">'closed'</span>) ) {
				$wrap.removeClass(<span class="hljs-string">'closed'</span>);
				$<span class="hljs-keyword">this</span>.parent().sortable(<span class="hljs-string">'refresh'</span>);
			} <span class="hljs-keyword">else</span> {
				$wrap.addClass(<span class="hljs-string">'closed'</span>);
			}

			$<span class="hljs-built_in">document</span>.triggerHandler( <span class="hljs-string">'wp-pin-menu'</span> );
		});

		$(<span class="hljs-string">'#widgets-left .sidebar-name'</span>).click( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'.widgets-holder-wrap'</span>).toggleClass(<span class="hljs-string">'closed'</span>);
			$<span class="hljs-built_in">document</span>.triggerHandler( <span class="hljs-string">'wp-pin-menu'</span> );
		});

		$(<span class="hljs-built_in">document</span>.body).bind(<span class="hljs-string">'click.widgets-toggle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
			<span class="hljs-keyword">var</span> target = $(e.target),
				css = { <span class="hljs-string">'z-index'</span>: <span class="hljs-number">100</span> },
				widget, inside, targetWidth, widgetWidth, margin,
				toggleBtn = target.closest( <span class="hljs-string">'.widget'</span> ).find( <span class="hljs-string">'.widget-top button.widget-action'</span> );

			<span class="hljs-keyword">if</span> ( target.parents(<span class="hljs-string">'.widget-top'</span>).length &amp;&amp; ! target.parents(<span class="hljs-string">'#available-widgets'</span>).length ) {
				widget = target.closest(<span class="hljs-string">'div.widget'</span>);
				inside = widget.children(<span class="hljs-string">'.widget-inside'</span>);
				targetWidth = <span class="hljs-built_in">parseInt</span>( widget.find(<span class="hljs-string">'input.widget-width'</span>).val(), <span class="hljs-number">10</span> ),
				widgetWidth = widget.parent().width();

				<span class="hljs-keyword">if</span> ( inside.is(<span class="hljs-string">':hidden'</span>) ) {
					<span class="hljs-keyword">if</span> ( targetWidth &gt; <span class="hljs-number">250</span> &amp;&amp; ( targetWidth + <span class="hljs-number">30</span> &gt; widgetWidth ) &amp;&amp; widget.closest(<span class="hljs-string">'div.widgets-sortables'</span>).length ) {
						<span class="hljs-keyword">if</span> ( widget.closest(<span class="hljs-string">'div.widget-liquid-right'</span>).length ) {
							margin = isRTL ? <span class="hljs-string">'margin-right'</span> : <span class="hljs-string">'margin-left'</span>;
						} <span class="hljs-keyword">else</span> {
							margin = isRTL ? <span class="hljs-string">'margin-left'</span> : <span class="hljs-string">'margin-right'</span>;
						}

						css[ margin ] = widgetWidth - ( targetWidth + <span class="hljs-number">30</span> ) + <span class="hljs-string">'px'</span>;
						widget.css( css );
					}
					<span class="hljs-comment">/*
					 * Don't change the order of attributes changes and animation:
					 * it's important for screen readers, see ticket #31476.
					 */</span>
					toggleBtn.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
					inside.slideDown( <span class="hljs-string">'fast'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						widget.addClass( <span class="hljs-string">'open'</span> );
					});
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-comment">/*
					 * Don't change the order of attributes changes and animation:
					 * it's important for screen readers, see ticket #31476.
					 */</span>
					toggleBtn.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
					inside.slideUp( <span class="hljs-string">'fast'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						widget.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> );
						widget.removeClass( <span class="hljs-string">'open'</span> );
					});
				}
				e.preventDefault();
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( target.hasClass(<span class="hljs-string">'widget-control-save'</span>) ) {
				wpWidgets.save( target.closest(<span class="hljs-string">'div.widget'</span>), <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span> );
				e.preventDefault();
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( target.hasClass(<span class="hljs-string">'widget-control-remove'</span>) ) {
				wpWidgets.save( target.closest(<span class="hljs-string">'div.widget'</span>), <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span> );
				e.preventDefault();
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( target.hasClass(<span class="hljs-string">'widget-control-close'</span>) ) {
				widget = target.closest(<span class="hljs-string">'div.widget'</span>);
				widget.removeClass( <span class="hljs-string">'open'</span> );
				toggleBtn.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
				wpWidgets.close( widget );
				e.preventDefault();
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( target.attr( <span class="hljs-string">'id'</span> ) === <span class="hljs-string">'inactive-widgets-control-remove'</span> ) {
				wpWidgets.removeInactiveWidgets();
				e.preventDefault();
			}
		});

		sidebars.children(<span class="hljs-string">'.widget'</span>).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);

			wpWidgets.appendTitle( <span class="hljs-keyword">this</span> );

			<span class="hljs-keyword">if</span> ( $<span class="hljs-keyword">this</span>.find( <span class="hljs-string">'p.widget-error'</span> ).length ) {
				$<span class="hljs-keyword">this</span>.find( <span class="hljs-string">'.widget-action'</span> ).trigger( <span class="hljs-string">'click'</span> ).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
			}
		});

		$(<span class="hljs-string">'#widget-list'</span>).children(<span class="hljs-string">'.widget'</span>).draggable({
			<span class="hljs-attr">connectToSortable</span>: <span class="hljs-string">'div.widgets-sortables'</span>,
			<span class="hljs-attr">handle</span>: <span class="hljs-string">'&gt; .widget-top &gt; .widget-title'</span>,
			<span class="hljs-attr">distance</span>: <span class="hljs-number">2</span>,
			<span class="hljs-attr">helper</span>: <span class="hljs-string">'clone'</span>,
			<span class="hljs-attr">zIndex</span>: <span class="hljs-number">100</span>,
			<span class="hljs-attr">containment</span>: <span class="hljs-string">'#wpwrap'</span>,
			<span class="hljs-attr">refreshPositions</span>: <span class="hljs-literal">true</span>,
			<span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, ui </span>) </span>{
				<span class="hljs-keyword">var</span> chooser = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'.widgets-chooser'</span>);

				ui.helper.find(<span class="hljs-string">'div.widget-description'</span>).hide();
				the_id = <span class="hljs-keyword">this</span>.id;

				<span class="hljs-keyword">if</span> ( chooser.length ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Hide the chooser and move it out of the widget</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$( <span class="hljs-string">'#wpbody-content'</span> ).append( chooser.hide() );</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Delete the cloned chooser from the drag helper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					ui.helper.find(<span class="hljs-string">'.widgets-chooser'</span>).remove();
					self.clearWidgetSelection();
				}
			},
			<span class="hljs-attr">stop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( rem ) {
					$(rem).hide();
				}

				rem = <span class="hljs-string">''</span>;
			}
		});

		<span class="hljs-comment">/**
		 * Opens and closes previously closed Sidebars when Widgets are dragged over/out of them.
		 */</span>
		sidebars.droppable( {
			<span class="hljs-attr">tolerance</span>: <span class="hljs-string">'intersect'</span>,

			<span class="hljs-comment">/**
			 * Open Sidebar when a Widget gets dragged over it.
			 *
			 * @param event
			 */</span>
			over: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">var</span> $wrap = $( event.target ).parent();

				<span class="hljs-keyword">if</span> ( wpWidgets.hoveredSidebar &amp;&amp; ! $wrap.is( wpWidgets.hoveredSidebar ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Close the previous Sidebar as the Widget has been dragged onto another Sidebar.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					wpWidgets.closeSidebar( event );
				}

				<span class="hljs-keyword">if</span> ( $wrap.hasClass( <span class="hljs-string">'closed'</span> ) ) {
					wpWidgets.hoveredSidebar = $wrap;
					$wrap.removeClass( <span class="hljs-string">'closed'</span> );
				}

				$( <span class="hljs-keyword">this</span> ).sortable( <span class="hljs-string">'refresh'</span> );
			},

			<span class="hljs-comment">/**
			 * Close Sidebar when the Widget gets dragged out of it.
			 *
			 * @param event
			 */</span>
			out: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( wpWidgets.hoveredSidebar ) {
					wpWidgets.closeSidebar( event );
				}
			}
		} );

		sidebars.sortable({
			<span class="hljs-attr">placeholder</span>: <span class="hljs-string">'widget-placeholder'</span>,
			<span class="hljs-attr">items</span>: <span class="hljs-string">'&gt; .widget'</span>,
			<span class="hljs-attr">handle</span>: <span class="hljs-string">'&gt; .widget-top &gt; .widget-title'</span>,
			<span class="hljs-attr">cursor</span>: <span class="hljs-string">'move'</span>,
			<span class="hljs-attr">distance</span>: <span class="hljs-number">2</span>,
			<span class="hljs-attr">containment</span>: <span class="hljs-string">'#wpwrap'</span>,
			<span class="hljs-attr">tolerance</span>: <span class="hljs-string">'pointer'</span>,
			<span class="hljs-attr">refreshPositions</span>: <span class="hljs-literal">true</span>,
			<span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, ui </span>) </span>{
				<span class="hljs-keyword">var</span> height, $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>),
					$wrap = $<span class="hljs-keyword">this</span>.parent(),
					inside = ui.item.children(<span class="hljs-string">'.widget-inside'</span>);

				<span class="hljs-keyword">if</span> ( inside.css(<span class="hljs-string">'display'</span>) === <span class="hljs-string">'block'</span> ) {
					ui.item.removeClass(<span class="hljs-string">'open'</span>);
					ui.item.find( <span class="hljs-string">'.widget-top button.widget-action'</span> ).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
					inside.hide();
					$(<span class="hljs-keyword">this</span>).sortable(<span class="hljs-string">'refreshPositions'</span>);
				}

				<span class="hljs-keyword">if</span> ( ! $wrap.hasClass(<span class="hljs-string">'closed'</span>) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Lock all open sidebars min-height when starting to drag.
Prevents jumping when dragging a widget from an open sidebar to a closed sidebar below.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					height = ui.item.hasClass(<span class="hljs-string">'ui-draggable'</span>) ? $<span class="hljs-keyword">this</span>.height() : <span class="hljs-number">1</span> + $<span class="hljs-keyword">this</span>.height();
					$<span class="hljs-keyword">this</span>.css( <span class="hljs-string">'min-height'</span>, height + <span class="hljs-string">'px'</span> );
				}
			},

			<span class="hljs-attr">stop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, ui </span>) </span>{
				<span class="hljs-keyword">var</span> addNew, widgetNumber, $sidebar, $children, child, item,
					$widget = ui.item,
					id = the_id;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Reset the var to hold a previously closed sidebar.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				wpWidgets.hoveredSidebar = <span class="hljs-literal">null</span>;

				<span class="hljs-keyword">if</span> ( $widget.hasClass(<span class="hljs-string">'deleting'</span>) ) {
					wpWidgets.save( $widget, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> ); <span class="hljs-comment">// delete widget</span>
					$widget.remove();
					<span class="hljs-keyword">return</span>;
				}

				addNew = $widget.find(<span class="hljs-string">'input.add_new'</span>).val();
				widgetNumber = $widget.find(<span class="hljs-string">'input.multi_number'</span>).val();

				$widget.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> ).removeClass(<span class="hljs-string">'ui-draggable'</span>);
				the_id = <span class="hljs-string">''</span>;

				<span class="hljs-keyword">if</span> ( addNew ) {
					<span class="hljs-keyword">if</span> ( <span class="hljs-string">'multi'</span> === addNew ) {
						$widget.html(
							$widget.html().replace( <span class="hljs-regexp">/&lt;[^&lt;&gt;]+&gt;/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> tag </span>) </span>{
								<span class="hljs-keyword">return</span> tag.replace( <span class="hljs-regexp">/__i__|%i%/g</span>, widgetNumber );
							})
						);

						$widget.attr( <span class="hljs-string">'id'</span>, id.replace( <span class="hljs-string">'__i__'</span>, widgetNumber ) );
						widgetNumber++;

						$( <span class="hljs-string">'div#'</span> + id ).find( <span class="hljs-string">'input.multi_number'</span> ).val( widgetNumber );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'single'</span> === addNew ) {
						$widget.attr( <span class="hljs-string">'id'</span>, <span class="hljs-string">'new-'</span> + id );
						rem = <span class="hljs-string">'div#'</span> + id;
					}

					wpWidgets.save( $widget, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> );
					$widget.find(<span class="hljs-string">'input.add_new'</span>).val(<span class="hljs-string">''</span>);
					$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'widget-added'</span>, [ $widget ] );
				}

				$sidebar = $widget.parent();

				<span class="hljs-keyword">if</span> ( $sidebar.parent().hasClass(<span class="hljs-string">'closed'</span>) ) {
					$sidebar.parent().removeClass(<span class="hljs-string">'closed'</span>);
					$children = $sidebar.children(<span class="hljs-string">'.widget'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Make sure the dropped widget is at the top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( $children.length &gt; <span class="hljs-number">1</span> ) {
						child = $children.get(<span class="hljs-number">0</span>);
						item = $widget.get(<span class="hljs-number">0</span>);

						<span class="hljs-keyword">if</span> ( child.id &amp;&amp; item.id &amp;&amp; child.id !== item.id ) {
							$( child ).before( $widget );
						}
					}
				}

				<span class="hljs-keyword">if</span> ( addNew ) {
					$widget.find( <span class="hljs-string">'.widget-action'</span> ).trigger( <span class="hljs-string">'click'</span> );
				} <span class="hljs-keyword">else</span> {
					wpWidgets.saveOrder( $sidebar.attr(<span class="hljs-string">'id'</span>) );
				}
			},

			<span class="hljs-attr">activate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				$(<span class="hljs-keyword">this</span>).parent().addClass( <span class="hljs-string">'widget-hover'</span> );
			},

			<span class="hljs-attr">deactivate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Remove all min-height added on start</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$(<span class="hljs-keyword">this</span>).css( <span class="hljs-string">'min-height'</span>, <span class="hljs-string">''</span> ).parent().removeClass( <span class="hljs-string">'widget-hover'</span> );
			},

			<span class="hljs-attr">receive</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, ui </span>) </span>{
				<span class="hljs-keyword">var</span> $sender = $( ui.sender );</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Dont add more widgets to orphaned sidebars</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.id.indexOf(<span class="hljs-string">'orphaned_widgets'</span>) &gt; <span class="hljs-number">-1</span> ) {
					$sender.sortable(<span class="hljs-string">'cancel'</span>);
					<span class="hljs-keyword">return</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>If the last widget was moved out of an orphaned sidebar, close and remove it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( $sender.attr(<span class="hljs-string">'id'</span>).indexOf(<span class="hljs-string">'orphaned_widgets'</span>) &gt; <span class="hljs-number">-1</span> &amp;&amp; ! $sender.children(<span class="hljs-string">'.widget'</span>).length ) {
					$sender.parents(<span class="hljs-string">'.orphan-sidebar'</span>).slideUp( <span class="hljs-number">400</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ $(<span class="hljs-keyword">this</span>).remove(); } );
				}
			}
		}).sortable( <span class="hljs-string">'option'</span>, <span class="hljs-string">'connectWith'</span>, <span class="hljs-string">'div.widgets-sortables'</span> );

		$(<span class="hljs-string">'#available-widgets'</span>).droppable({
			<span class="hljs-attr">tolerance</span>: <span class="hljs-string">'pointer'</span>,
			<span class="hljs-attr">accept</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{
				<span class="hljs-keyword">return</span> $(o).parent().attr(<span class="hljs-string">'id'</span>) !== <span class="hljs-string">'widget-list'</span>;
			},
			<span class="hljs-attr">drop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,ui</span>) </span>{
				ui.draggable.addClass(<span class="hljs-string">'deleting'</span>);
				$(<span class="hljs-string">'#removing-widget'</span>).hide().children(<span class="hljs-string">'span'</span>).empty();
			},
			<span class="hljs-attr">over</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,ui</span>) </span>{
				ui.draggable.addClass(<span class="hljs-string">'deleting'</span>);
				$(<span class="hljs-string">'div.widget-placeholder'</span>).hide();

				<span class="hljs-keyword">if</span> ( ui.draggable.hasClass(<span class="hljs-string">'ui-sortable-helper'</span>) ) {
					$(<span class="hljs-string">'#removing-widget'</span>).show().children(<span class="hljs-string">'span'</span>)
					.html( ui.draggable.find( <span class="hljs-string">'div.widget-title'</span> ).children( <span class="hljs-string">'h3'</span> ).html() );
				}
			},
			<span class="hljs-attr">out</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,ui</span>) </span>{
				ui.draggable.removeClass(<span class="hljs-string">'deleting'</span>);
				$(<span class="hljs-string">'div.widget-placeholder'</span>).show();
				$(<span class="hljs-string">'#removing-widget'</span>).hide().children(<span class="hljs-string">'span'</span>).empty();
			}
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Area Chooser</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$( <span class="hljs-string">'#widgets-right .widgets-holder-wrap'</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> index, element </span>) </span>{
			<span class="hljs-keyword">var</span> $element = $( element ),
				name = $element.find( <span class="hljs-string">'.sidebar-name h2'</span> ).text(),
				id = $element.find( <span class="hljs-string">'.widgets-sortables'</span> ).attr( <span class="hljs-string">'id'</span> ),
				li = $(<span class="hljs-string">'&lt;li tabindex="0"&gt;'</span>).text( $.trim( name ) );

			<span class="hljs-keyword">if</span> ( index === <span class="hljs-number">0</span> ) {
				li.addClass( <span class="hljs-string">'widgets-chooser-selected'</span> );
			}

			selectSidebar.append( li );
			li.data( <span class="hljs-string">'sidebarId'</span>, id );
		});

		$( <span class="hljs-string">'#available-widgets .widget .widget-title'</span> ).on( <span class="hljs-string">'click.widgets-chooser'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $widget = $(<span class="hljs-keyword">this</span>).closest( <span class="hljs-string">'.widget'</span> );

			<span class="hljs-keyword">if</span> ( $widget.hasClass( <span class="hljs-string">'widget-in-question'</span> ) || $( <span class="hljs-string">'#widgets-left'</span> ).hasClass( <span class="hljs-string">'chooser'</span> ) ) {
				self.closeChooser();
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Open the chooser</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				self.clearWidgetSelection();
				$( <span class="hljs-string">'#widgets-left'</span> ).addClass( <span class="hljs-string">'chooser'</span> );
				$widget.addClass( <span class="hljs-string">'widget-in-question'</span> ).children( <span class="hljs-string">'.widget-description'</span> ).after( chooser );

				chooser.slideDown( <span class="hljs-number">300</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					selectSidebar.find(<span class="hljs-string">'.widgets-chooser-selected'</span>).focus();
				});

				selectSidebar.find( <span class="hljs-string">'li'</span> ).on( <span class="hljs-string">'focusin.widgets-chooser'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					selectSidebar.find(<span class="hljs-string">'.widgets-chooser-selected'</span>).removeClass( <span class="hljs-string">'widgets-chooser-selected'</span> );
					$(<span class="hljs-keyword">this</span>).addClass( <span class="hljs-string">'widgets-chooser-selected'</span> );
				} );
			}
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Add event handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		chooser.on( <span class="hljs-string">'click.widgets-chooser'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $target = $( event.target );

			<span class="hljs-keyword">if</span> ( $target.hasClass(<span class="hljs-string">'button-primary'</span>) ) {
				self.addWidget( chooser );
				self.closeChooser();
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $target.hasClass( <span class="hljs-string">'widgets-chooser-cancel'</span> ) ) {
				self.closeChooser();
			}
		}).on( <span class="hljs-string">'keyup.widgets-chooser'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">if</span> ( event.which === $.ui.keyCode.ENTER ) {
				<span class="hljs-keyword">if</span> ( $( event.target ).hasClass( <span class="hljs-string">'widgets-chooser-cancel'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Close instead of adding when pressing Enter on the Cancel button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					self.closeChooser();
				} <span class="hljs-keyword">else</span> {
					self.addWidget( chooser );
					self.closeChooser();
				}
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( event.which === $.ui.keyCode.ESCAPE ) {
				self.closeChooser();
			}
		});
	},

	<span class="hljs-attr">saveOrder</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> sidebarId </span>) </span>{
		<span class="hljs-keyword">var</span> data = {
			<span class="hljs-attr">action</span>: <span class="hljs-string">'widgets-order'</span>,
			<span class="hljs-attr">savewidgets</span>: $(<span class="hljs-string">'#_wpnonce_widgets'</span>).val(),
			<span class="hljs-attr">sidebars</span>: []
		};

		<span class="hljs-keyword">if</span> ( sidebarId ) {
			$( <span class="hljs-string">'#'</span> + sidebarId ).find( <span class="hljs-string">'.spinner:first'</span> ).addClass( <span class="hljs-string">'is-active'</span> );
		}

		$(<span class="hljs-string">'div.widgets-sortables'</span>).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( $(<span class="hljs-keyword">this</span>).sortable ) {
				data[<span class="hljs-string">'sidebars['</span> + $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">'id'</span>) + <span class="hljs-string">']'</span>] = $(<span class="hljs-keyword">this</span>).sortable(<span class="hljs-string">'toArray'</span>).join(<span class="hljs-string">','</span>);
			}
		});

		$.post( ajaxurl, data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'#inactive-widgets-control-remove'</span> ).prop( <span class="hljs-string">'disabled'</span> , ! $( <span class="hljs-string">'#wp_inactive_widgets .widget'</span> ).length );
			$( <span class="hljs-string">'.spinner'</span> ).removeClass( <span class="hljs-string">'is-active'</span> );
		});
	},

	<span class="hljs-attr">save</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> widget, del, animate, order </span>) </span>{
		<span class="hljs-keyword">var</span> sidebarId = widget.closest(<span class="hljs-string">'div.widgets-sortables'</span>).attr(<span class="hljs-string">'id'</span>),
			data = widget.find(<span class="hljs-string">'form'</span>).serialize(), a;

		widget = $(widget);
		$( <span class="hljs-string">'.spinner'</span>, widget ).addClass( <span class="hljs-string">'is-active'</span> );

		a = {
			<span class="hljs-attr">action</span>: <span class="hljs-string">'save-widget'</span>,
			<span class="hljs-attr">savewidgets</span>: $(<span class="hljs-string">'#_wpnonce_widgets'</span>).val(),
			<span class="hljs-attr">sidebar</span>: sidebarId
		};

		<span class="hljs-keyword">if</span> ( del ) {
			a.delete_widget = <span class="hljs-number">1</span>;
		}

		data += <span class="hljs-string">'&amp;'</span> + $.param(a);

		$.post( ajaxurl, data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>) </span>{
			<span class="hljs-keyword">var</span> id;

			<span class="hljs-keyword">if</span> ( del ) {
				<span class="hljs-keyword">if</span> ( ! $(<span class="hljs-string">'input.widget_number'</span>, widget).val() ) {
					id = $(<span class="hljs-string">'input.widget-id'</span>, widget).val();
					$(<span class="hljs-string">'#available-widgets'</span>).find(<span class="hljs-string">'input.widget-id'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">if</span> ( $(<span class="hljs-keyword">this</span>).val() === id ) {
							$(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'div.widget'</span>).show();
						}
					});
				}

				<span class="hljs-keyword">if</span> ( animate ) {
					order = <span class="hljs-number">0</span>;
					widget.slideUp(<span class="hljs-string">'fast'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						$(<span class="hljs-keyword">this</span>).remove();
						wpWidgets.saveOrder();
					});
				} <span class="hljs-keyword">else</span> {
					widget.remove();

					<span class="hljs-keyword">if</span> ( sidebarId === <span class="hljs-string">'wp_inactive_widgets'</span> ) {
						$( <span class="hljs-string">'#inactive-widgets-control-remove'</span> ).prop( <span class="hljs-string">'disabled'</span> , ! $( <span class="hljs-string">'#wp_inactive_widgets .widget'</span> ).length );
					}
				}
			} <span class="hljs-keyword">else</span> {
				$( <span class="hljs-string">'.spinner'</span> ).removeClass( <span class="hljs-string">'is-active'</span> );
				<span class="hljs-keyword">if</span> ( r &amp;&amp; r.length &gt; <span class="hljs-number">2</span> ) {
					$( <span class="hljs-string">'div.widget-content'</span>, widget ).html( r );
					wpWidgets.appendTitle( widget );
					$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'widget-updated'</span>, [ widget ] );

					<span class="hljs-keyword">if</span> ( sidebarId === <span class="hljs-string">'wp_inactive_widgets'</span> ) {
						$( <span class="hljs-string">'#inactive-widgets-control-remove'</span> ).prop( <span class="hljs-string">'disabled'</span> , ! $( <span class="hljs-string">'#wp_inactive_widgets .widget'</span> ).length );
					}
				}
			}

			<span class="hljs-keyword">if</span> ( order ) {
				wpWidgets.saveOrder();
			}
		});
	},

	<span class="hljs-attr">removeInactiveWidgets</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> $element = $( <span class="hljs-string">'.remove-inactive-widgets'</span> ), a, data;

		$( <span class="hljs-string">'.spinner'</span>, $element ).addClass( <span class="hljs-string">'is-active'</span> );

		a = {
			<span class="hljs-attr">action</span> : <span class="hljs-string">'delete-inactive-widgets'</span>,
			<span class="hljs-attr">removeinactivewidgets</span> : $( <span class="hljs-string">'#_wpnonce_remove_inactive_widgets'</span> ).val()
		};

		data = $.param( a );

		$.post( ajaxurl, data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'#wp_inactive_widgets .widget'</span> ).remove();
			$( <span class="hljs-string">'#inactive-widgets-control-remove'</span> ).prop( <span class="hljs-string">'disabled'</span> , <span class="hljs-literal">true</span> );
			$( <span class="hljs-string">'.spinner'</span>, $element ).removeClass( <span class="hljs-string">'is-active'</span> );
		} );
	},

	<span class="hljs-attr">appendTitle</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">widget</span>) </span>{
		<span class="hljs-keyword">var</span> title = $(<span class="hljs-string">'input[id*="-title"]'</span>, widget).val() || <span class="hljs-string">''</span>;

		<span class="hljs-keyword">if</span> ( title ) {
			title = <span class="hljs-string">': '</span> + title.replace(<span class="hljs-regexp">/&lt;[^&lt;&gt;]+&gt;/g</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-regexp">/&lt;/g</span>, <span class="hljs-string">'&amp;lt;'</span>).replace(<span class="hljs-regexp">/&gt;/g</span>, <span class="hljs-string">'&amp;gt;'</span>);
		}

		$(widget).children(<span class="hljs-string">'.widget-top'</span>).children(<span class="hljs-string">'.widget-title'</span>).children()
				.children(<span class="hljs-string">'.in-widget-title'</span>).html(title);

	},

	<span class="hljs-attr">close</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">widget</span>) </span>{
		widget.children(<span class="hljs-string">'.widget-inside'</span>).slideUp(<span class="hljs-string">'fast'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			widget.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> )
				.find( <span class="hljs-string">'.widget-top button.widget-action'</span> )
					.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> )
					.focus();
		});
	},

	<span class="hljs-attr">addWidget</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> chooser </span>) </span>{
		<span class="hljs-keyword">var</span> widget, widgetId, add, n, viewportTop, viewportBottom, sidebarBounds,
			sidebarId = chooser.find( <span class="hljs-string">'.widgets-chooser-selected'</span> ).data(<span class="hljs-string">'sidebarId'</span>),
			sidebar = $( <span class="hljs-string">'#'</span> + sidebarId );

		widget = $(<span class="hljs-string">'#available-widgets'</span>).find(<span class="hljs-string">'.widget-in-question'</span>).clone();
		widgetId = widget.attr(<span class="hljs-string">'id'</span>);
		add = widget.find( <span class="hljs-string">'input.add_new'</span> ).val();
		n = widget.find( <span class="hljs-string">'input.multi_number'</span> ).val();</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Remove the cloned chooser from the widget</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		widget.find(<span class="hljs-string">'.widgets-chooser'</span>).remove();

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'multi'</span> === add ) {
			widget.html(
				widget.html().replace( <span class="hljs-regexp">/&lt;[^&lt;&gt;]+&gt;/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{
					<span class="hljs-keyword">return</span> m.replace( <span class="hljs-regexp">/__i__|%i%/g</span>, n );
				})
			);

			widget.attr( <span class="hljs-string">'id'</span>, widgetId.replace( <span class="hljs-string">'__i__'</span>, n ) );
			n++;
			$( <span class="hljs-string">'#'</span> + widgetId ).find(<span class="hljs-string">'input.multi_number'</span>).val(n);
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'single'</span> === add ) {
			widget.attr( <span class="hljs-string">'id'</span>, <span class="hljs-string">'new-'</span> + widgetId );
			$( <span class="hljs-string">'#'</span> + widgetId ).hide();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Open the widgets container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		sidebar.closest( <span class="hljs-string">'.widgets-holder-wrap'</span> ).removeClass(<span class="hljs-string">'closed'</span>);

		sidebar.append( widget );
		sidebar.sortable(<span class="hljs-string">'refresh'</span>);

		wpWidgets.save( widget, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>No longer new widget</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		widget.find( <span class="hljs-string">'input.add_new'</span> ).val(<span class="hljs-string">''</span>);

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'widget-added'</span>, [ widget ] );

		<span class="hljs-comment">/*
		 * Check if any part of the sidebar is visible in the viewport. If it is, don't scroll.
		 * Otherwise, scroll up to so the sidebar is in view.
		 *
		 * We do this by comparing the top and bottom, of the sidebar so see if they are within
		 * the bounds of the viewport.
		 */</span>
		viewportTop = $(<span class="hljs-built_in">window</span>).scrollTop();
		viewportBottom = viewportTop + $(<span class="hljs-built_in">window</span>).height();
		sidebarBounds = sidebar.offset();

		sidebarBounds.bottom = sidebarBounds.top + sidebar.outerHeight();

		<span class="hljs-keyword">if</span> ( viewportTop &gt; sidebarBounds.bottom || viewportBottom &lt; sidebarBounds.top ) {
			$( <span class="hljs-string">'html, body'</span> ).animate({
				<span class="hljs-attr">scrollTop</span>: sidebarBounds.top - <span class="hljs-number">130</span>
			}, <span class="hljs-number">200</span> );
		}

		<span class="hljs-built_in">window</span>.setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Cannot use a callback in the animation above as it fires twice,
have to queue this by hand.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			widget.find( <span class="hljs-string">'.widget-title'</span> ).trigger(<span class="hljs-string">'click'</span>);
		}, <span class="hljs-number">250</span> );
	},

	<span class="hljs-attr">closeChooser</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

		$( <span class="hljs-string">'.widgets-chooser'</span> ).slideUp( <span class="hljs-number">200</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'#wpbody-content'</span> ).append( <span class="hljs-keyword">this</span> );
			self.clearWidgetSelection();
		});
	},

	<span class="hljs-attr">clearWidgetSelection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		$( <span class="hljs-string">'#widgets-left'</span> ).removeClass( <span class="hljs-string">'chooser'</span> );
		$( <span class="hljs-string">'.widget-in-question'</span> ).removeClass( <span class="hljs-string">'widget-in-question'</span> );
	},

	<span class="hljs-comment">/**
	 * Closes a Sidebar that was previously closed, but opened by dragging a Widget over it.
	 *
	 * Used when a Widget gets dragged in/out of the Sidebar and never dropped.
	 *
	 * @param sidebar
	 */</span>
	closeSidebar: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> sidebar </span>) </span>{
		<span class="hljs-keyword">this</span>.hoveredSidebar.addClass( <span class="hljs-string">'closed'</span> );
		$( sidebar.target ).css( <span class="hljs-string">'min-height'</span>, <span class="hljs-string">''</span> );
		<span class="hljs-keyword">this</span>.hoveredSidebar = <span class="hljs-literal">null</span>;
	}
};

$<span class="hljs-built_in">document</span>.ready( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ wpWidgets.init(); } );

})(jQuery);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
