<!DOCTYPE html>

<html>
<head>
  <title>wp-api.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>wp-api.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> window, undefined </span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

	<span class="hljs-comment">/**
	 * Initialise the WP_API.
	 */</span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">WP_API</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>.models = {};
		<span class="hljs-keyword">this</span>.collections = {};
		<span class="hljs-keyword">this</span>.views = {};
	}

	<span class="hljs-built_in">window</span>.wp            = <span class="hljs-built_in">window</span>.wp || {};
	wp.api               = wp.api || <span class="hljs-keyword">new</span> WP_API();
	wp.api.versionString = wp.api.versionString || <span class="hljs-string">'wp/v2/'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Alias <em>includes to </em>.contains, ensuring it is available if lodash is used.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( ! _.isFunction( _.includes ) &amp;&amp; _.isFunction( _.contains ) ) {
	  _.includes = _.contains;
	}

})( <span class="hljs-built_in">window</span> );

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> window, undefined </span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

	<span class="hljs-keyword">var</span> pad, r;

	<span class="hljs-built_in">window</span>.wp = <span class="hljs-built_in">window</span>.wp || {};
	wp.api = wp.api || {};
	wp.api.utils = wp.api.utils || {};

	<span class="hljs-comment">/**
	 * ECMAScript 5 shim, adapted from MDN.
	 * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString
	 */</span>
	<span class="hljs-keyword">if</span> ( ! <span class="hljs-built_in">Date</span>.prototype.toISOString ) {
		pad = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> number </span>) </span>{
			r = <span class="hljs-built_in">String</span>( number );
			<span class="hljs-keyword">if</span> ( <span class="hljs-number">1</span> === r.length ) {
				r = <span class="hljs-string">'0'</span> + r;
			}

			<span class="hljs-keyword">return</span> r;
		};

		<span class="hljs-built_in">Date</span>.prototype.toISOString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getUTCFullYear() +
				<span class="hljs-string">'-'</span> + pad( <span class="hljs-keyword">this</span>.getUTCMonth() + <span class="hljs-number">1</span> ) +
				<span class="hljs-string">'-'</span> + pad( <span class="hljs-keyword">this</span>.getUTCDate() ) +
				<span class="hljs-string">'T'</span> + pad( <span class="hljs-keyword">this</span>.getUTCHours() ) +
				<span class="hljs-string">':'</span> + pad( <span class="hljs-keyword">this</span>.getUTCMinutes() ) +
				<span class="hljs-string">':'</span> + pad( <span class="hljs-keyword">this</span>.getUTCSeconds() ) +
				<span class="hljs-string">'.'</span> + <span class="hljs-built_in">String</span>( ( <span class="hljs-keyword">this</span>.getUTCMilliseconds() / <span class="hljs-number">1000</span> ).toFixed( <span class="hljs-number">3</span> ) ).slice( <span class="hljs-number">2</span>, <span class="hljs-number">5</span> ) +
				<span class="hljs-string">'Z'</span>;
		};
	}

	<span class="hljs-comment">/**
	 * Parse date into ISO8601 format.
	 *
	 * @param {Date} date.
	 */</span>
	wp.api.utils.parseISO8601 = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> date </span>) </span>{
		<span class="hljs-keyword">var</span> timestamp, struct, i, k,
			minutesOffset = <span class="hljs-number">0</span>,
			numericKeys = [ <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span> ];</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>ES5 15.9.4.2 states that the string should attempt to be parsed as a Date Time String Format string
before falling back to any implementation-specific date parsing, so thats what we do, even if native
implementations could be faster.
             1 YYYY                2 MM       3 DD           4 HH    5 mm       6 ss        7 msec        8 Z 9     10 tzHH    11 tzmm</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ( struct = <span class="hljs-regexp">/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/</span>.exec( date ) ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Avoid NaN timestamps caused by undefined values being passed to Date.UTC.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; ( k = numericKeys[i] ); ++i ) {
				struct[k] = +struct[k] || <span class="hljs-number">0</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Allow undefined days and months.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			struct[<span class="hljs-number">2</span>] = ( +struct[<span class="hljs-number">2</span>] || <span class="hljs-number">1</span> ) - <span class="hljs-number">1</span>;
			struct[<span class="hljs-number">3</span>] = +struct[<span class="hljs-number">3</span>] || <span class="hljs-number">1</span>;

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'Z'</span> !== struct[<span class="hljs-number">8</span>]  &amp;&amp; <span class="hljs-literal">undefined</span> !== struct[<span class="hljs-number">9</span>] ) {
				minutesOffset = struct[<span class="hljs-number">10</span>] * <span class="hljs-number">60</span> + struct[<span class="hljs-number">11</span>];

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'+'</span> === struct[<span class="hljs-number">9</span>] ) {
					minutesOffset = <span class="hljs-number">0</span> - minutesOffset;
				}
			}

			timestamp = <span class="hljs-built_in">Date</span>.UTC( struct[<span class="hljs-number">1</span>], struct[<span class="hljs-number">2</span>], struct[<span class="hljs-number">3</span>], struct[<span class="hljs-number">4</span>], struct[<span class="hljs-number">5</span>] + minutesOffset, struct[<span class="hljs-number">6</span>], struct[<span class="hljs-number">7</span>] );
		} <span class="hljs-keyword">else</span> {
			timestamp = <span class="hljs-built_in">Date</span>.parse ? <span class="hljs-built_in">Date</span>.parse( date ) : <span class="hljs-literal">NaN</span>;
		}

		<span class="hljs-keyword">return</span> timestamp;
	};

	<span class="hljs-comment">/**
	 * Helper function for getting the root URL.
	 * @return {[type]} [description]
	 */</span>
	wp.api.utils.getRootUrl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.location.origin ?
			<span class="hljs-built_in">window</span>.location.origin + <span class="hljs-string">'/'</span> :
			<span class="hljs-built_in">window</span>.location.protocol + <span class="hljs-string">'/'</span> + <span class="hljs-built_in">window</span>.location.host + <span class="hljs-string">'/'</span>;
	};

	<span class="hljs-comment">/**
	 * Helper for capitalizing strings.
	 */</span>
	wp.api.utils.capitalize = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> str </span>) </span>{
		<span class="hljs-keyword">if</span> ( _.isUndefined( str ) ) {
			<span class="hljs-keyword">return</span> str;
		}
		<span class="hljs-keyword">return</span> str.charAt( <span class="hljs-number">0</span> ).toUpperCase() + str.slice( <span class="hljs-number">1</span> );
	};

	<span class="hljs-comment">/**
	 * Helper function that capitalizes the first word and camel cases any words starting
	 * after dashes, removing the dashes.
	 */</span>
	wp.api.utils.capitalizeAndCamelCaseDashes = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> str </span>) </span>{
		<span class="hljs-keyword">if</span> ( _.isUndefined( str ) ) {
			<span class="hljs-keyword">return</span> str;
		}
		str = wp.api.utils.capitalize( str );

		<span class="hljs-keyword">return</span> wp.api.utils.camelCaseDashes( str );
	};

	<span class="hljs-comment">/**
	 * Helper function to camel case the letter after dashes, removing the dashes.
	 */</span>
	wp.api.utils.camelCaseDashes = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> str </span>) </span>{
		<span class="hljs-keyword">return</span> str.replace( <span class="hljs-regexp">/-([a-z])/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> g </span>) </span>{
			<span class="hljs-keyword">return</span> g[ <span class="hljs-number">1</span> ].toUpperCase();
		} );
	};

	<span class="hljs-comment">/**
	 * Extract a route part based on negative index.
	 *
	 * @param {string}   route          The endpoint route.
	 * @param {int}      part           The number of parts from the end of the route to retrieve. Default 1.
	 *                                  Example route `/a/b/c`: part 1 is `c`, part 2 is `b`, part 3 is `a`.
	 * @param {string}  [versionString] Version string, defaults to `wp.api.versionString`.
	 * @param {boolean} [reverse]       Whether to reverse the order when extracting the route part. Optional, default false.
	 */</span>
	wp.api.utils.extractRoutePart = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> route, part, versionString, reverse </span>) </span>{
		<span class="hljs-keyword">var</span> routeParts;

		part = part || <span class="hljs-number">1</span>;
		versionString = versionString || wp.api.versionString;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Remove versions string from route to avoid returning it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === route.indexOf( <span class="hljs-string">'/'</span> + versionString ) ) {
			route = route.substr( versionString.length + <span class="hljs-number">1</span> );
		}

		routeParts = route.split( <span class="hljs-string">'/'</span> );
		<span class="hljs-keyword">if</span> ( reverse ) {
			routeParts = routeParts.reverse();
		}
		<span class="hljs-keyword">if</span> ( _.isUndefined( routeParts[ --part ] ) ) {
			<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
		}
		<span class="hljs-keyword">return</span> routeParts[ part ];
	};

	<span class="hljs-comment">/**
	 * Extract a parent name from a passed route.
	 *
	 * @param {string} route The route to extract a name from.
	 */</span>
	wp.api.utils.extractParentName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> route </span>) </span>{
		<span class="hljs-keyword">var</span> name,
			lastSlash = route.lastIndexOf( <span class="hljs-string">'_id&gt;[\\d]+)/'</span> );

		<span class="hljs-keyword">if</span> ( lastSlash &lt; <span class="hljs-number">0</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
		}
		name = route.substr( <span class="hljs-number">0</span>, lastSlash - <span class="hljs-number">1</span> );
		name = name.split( <span class="hljs-string">'/'</span> );
		name.pop();
		name = name.pop();
		<span class="hljs-keyword">return</span> name;
	};

	<span class="hljs-comment">/**
	 * Add args and options to a model prototype from a route's endpoints.
	 *
	 * @param {array}  routeEndpoints Array of route endpoints.
	 * @param {Object} modelInstance  An instance of the model (or collection)
	 *                                to add the args to.
	 */</span>
	wp.api.utils.decorateFromRoute = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> routeEndpoints, modelInstance </span>) </span>{

		<span class="hljs-comment">/**
		 * Build the args based on route endpoint data.
		 */</span>
		_.each( routeEndpoints, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> routeEndpoint </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Add post and edit endpoints as model args.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( _.includes( routeEndpoint.methods, <span class="hljs-string">'POST'</span> ) || _.includes( routeEndpoint.methods, <span class="hljs-string">'PUT'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Add any non empty args, merging them into the args object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ! _.isEmpty( routeEndpoint.args ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Set as default if no args yet.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.isEmpty( modelInstance.prototype.args ) ) {
						modelInstance.prototype.args = routeEndpoint.args;
					} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>We already have args, merge these new args in.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						modelInstance.prototype.args = _.extend( modelInstance.prototype.args, routeEndpoint.args );
					}
				}
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Add GET method as model options.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( _.includes( routeEndpoint.methods, <span class="hljs-string">'GET'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Add any non empty args, merging them into the defaults object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( ! _.isEmpty( routeEndpoint.args ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Set as default if no defaults yet.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> ( _.isEmpty( modelInstance.prototype.options ) ) {
							modelInstance.prototype.options = routeEndpoint.args;
						} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>We already have options, merge these new args in.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							modelInstance.prototype.options = _.extend( modelInstance.prototype.options, routeEndpoint.args );
						}
					}

				}
			}

		} );

	};

	<span class="hljs-comment">/**
	 * Add mixins and helpers to models depending on their defaults.
	 *
	 * @param {Backbone Model} model          The model to attach helpers and mixins to.
	 * @param {string}         modelClassName The classname of the constructed model.
	 * @param {Object} 	       loadingObjects An object containing the models and collections we are building.
	 */</span>
	wp.api.utils.addMixinsAndHelpers = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> model, modelClassName, loadingObjects </span>) </span>{

		<span class="hljs-keyword">var</span> hasDate = <span class="hljs-literal">false</span>,

			<span class="hljs-comment">/**
			 * Array of parseable dates.
			 *
			 * @type {string[]}.
			 */</span>
			parseableDates = [ <span class="hljs-string">'date'</span>, <span class="hljs-string">'modified'</span>, <span class="hljs-string">'date_gmt'</span>, <span class="hljs-string">'modified_gmt'</span> ],

			<span class="hljs-comment">/**
			 * Mixin for all content that is time stamped.
			 *
			 * This mixin converts between mysql timestamps and JavaScript Dates when syncing a model
			 * to or from the server. For example, a date stored as `2015-12-27T21:22:24` on the server
			 * gets expanded to `Sun Dec 27 2015 14:22:24 GMT-0700 (MST)` when the model is fetched.
			 *
			 * @type {{toJSON: toJSON, parse: parse}}.
			 */</span>
			TimeStampedMixin = {

				<span class="hljs-comment">/**
				 * Prepare a JavaScript Date for transmitting to the server.
				 *
				 * This helper function accepts a field and Date object. It converts the passed Date
				 * to an ISO string and sets that on the model field.
				 *
				 * @param {Date}   date   A JavaScript date object. WordPress expects dates in UTC.
				 * @param {string} field  The date field to set. One of 'date', 'date_gmt', 'date_modified'
				 *                        or 'date_modified_gmt'. Optional, defaults to 'date'.
				 */</span>
				setDate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> date, field </span>) </span>{
					<span class="hljs-keyword">var</span> theField = field || <span class="hljs-string">'date'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Dont alter non parsable date fields.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.indexOf( parseableDates, theField ) &lt; <span class="hljs-number">0</span> ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}

					<span class="hljs-keyword">this</span>.set( theField, date.toISOString() );
				},

				<span class="hljs-comment">/**
				 * Get a JavaScript Date from the passed field.
				 *
				 * WordPress returns 'date' and 'date_modified' in the timezone of the server as well as
				 * UTC dates as 'date_gmt' and 'date_modified_gmt'. Draft posts do not include UTC dates.
				 *
				 * @param {string} field  The date field to set. One of 'date', 'date_gmt', 'date_modified'
				 *                        or 'date_modified_gmt'. Optional, defaults to 'date'.
				 */</span>
				getDate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> field </span>) </span>{
					<span class="hljs-keyword">var</span> theField   = field || <span class="hljs-string">'date'</span>,
						theISODate = <span class="hljs-keyword">this</span>.get( theField );</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Only get date fields and non null values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.indexOf( parseableDates, theField ) &lt; <span class="hljs-number">0</span> || _.isNull( theISODate ) ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}

					<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>( wp.api.utils.parseISO8601( theISODate ) );
				}
			},

			<span class="hljs-comment">/**
			 * Build a helper function to retrieve related model.
			 *
			 * @param  {string} parentModel      The parent model.
			 * @param  {int}    modelId          The model ID if the object to request
			 * @param  {string} modelName        The model name to use when constructing the model.
			 * @param  {string} embedSourcePoint Where to check the embedds object for _embed data.
			 * @param  {string} embedCheckField  Which model field to check to see if the model has data.
			 *
			 * @return {Deferred.promise}        A promise which resolves to the constructed model.
			 */</span>
			buildModelGetter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> parentModel, modelId, modelName, embedSourcePoint, embedCheckField </span>) </span>{
				<span class="hljs-keyword">var</span> getModel, embeddeds, attributes, deferred;

				deferred  = jQuery.Deferred();
				embeddeds = parentModel.get( <span class="hljs-string">'_embedded'</span> ) || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Verify that we have a valid object id.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ! _.isNumber( modelId ) || <span class="hljs-number">0</span> === modelId ) {
					deferred.reject();
					<span class="hljs-keyword">return</span> deferred;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>If we have embedded object data, use that when constructing the getModel.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( embeddeds[ embedSourcePoint ] ) {
					attributes = _.findWhere( embeddeds[ embedSourcePoint ], { <span class="hljs-attr">id</span>: modelId } );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Otherwise use the modelId.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ! attributes ) {
					attributes = { <span class="hljs-attr">id</span>: modelId };
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Create the new getModel model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				getModel = <span class="hljs-keyword">new</span> wp.api.models[ modelName ]( attributes );

				<span class="hljs-keyword">if</span> ( ! getModel.get( embedCheckField ) ) {
					getModel.fetch( {
						<span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> getModel </span>) </span>{
							deferred.resolve( getModel );
						},
						<span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> getModel, response </span>) </span>{
							deferred.reject( response );
						}
					} );
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Resolve with the embedded model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					deferred.resolve( getModel );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Return a promise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">return</span> deferred.promise();
			},

			<span class="hljs-comment">/**
			 * Build a helper to retrieve a collection.
			 *
			 * @param  {string} parentModel      The parent model.
			 * @param  {string} collectionName   The name to use when constructing the collection.
			 * @param  {string} embedSourcePoint Where to check the embedds object for _embed data.
			 * @param  {string} embedIndex       An addiitonal optional index for the _embed data.
			 *
			 * @return {Deferred.promise}        A promise which resolves to the constructed collection.
			 */</span>
			buildCollectionGetter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> parentModel, collectionName, embedSourcePoint, embedIndex </span>) </span>{
				<span class="hljs-comment">/**
				 * Returns a promise that resolves to the requested collection
				 *
				 * Uses the embedded data if available, otherwises fetches the
				 * data from the server.
				 *
				 * @return {Deferred.promise} promise Resolves to a wp.api.collections[ collectionName ]
				 * collection.
				 */</span>
				<span class="hljs-keyword">var</span> postId, embeddeds, getObjects,
					classProperties = <span class="hljs-string">''</span>,
					properties      = <span class="hljs-string">''</span>,
					deferred        = jQuery.Deferred();

				postId    = parentModel.get( <span class="hljs-string">'id'</span> );
				embeddeds = parentModel.get( <span class="hljs-string">'_embedded'</span> ) || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Verify that we have a valid post id.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ! _.isNumber( postId ) || <span class="hljs-number">0</span> === postId ) {
					deferred.reject();
					<span class="hljs-keyword">return</span> deferred;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>If we have embedded getObjects data, use that when constructing the getObjects.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ! _.isUndefined( embedSourcePoint ) &amp;&amp; ! _.isUndefined( embeddeds[ embedSourcePoint ] ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Some embeds also include an index offset, check for that.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.isUndefined( embedIndex ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Use the embed source point directly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						properties = embeddeds[ embedSourcePoint ];
					} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Add the index to the embed source point.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						properties = embeddeds[ embedSourcePoint ][ embedIndex ];
					}
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Otherwise use the postId.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					classProperties = { <span class="hljs-attr">parent</span>: postId };
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Create the new getObjects collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				getObjects = <span class="hljs-keyword">new</span> wp.api.collections[ collectionName ]( properties, classProperties );</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>If we didnt have embedded getObjects, fetch the getObjects data.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( _.isUndefined( getObjects.models[<span class="hljs-number">0</span>] ) ) {
					getObjects.fetch( {
						<span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> getObjects </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Add a helper parent_post attribute onto the model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							setHelperParentPost( getObjects, postId );
							deferred.resolve( getObjects );
						},
						<span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> getModel, response </span>) </span>{
							deferred.reject( response );
						}
					} );
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Add a helper parent_post attribute onto the model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					setHelperParentPost( getObjects, postId );
					deferred.resolve( getObjects );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Return a promise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">return</span> deferred.promise();

			},

			<span class="hljs-comment">/**
			 * Set the model post parent.
			 */</span>
			setHelperParentPost = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> collection, postId </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Attach post_parent id to the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				_.each( collection.models, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> model </span>) </span>{
					model.set( <span class="hljs-string">'parent_post'</span>, postId );
				} );
			},

			<span class="hljs-comment">/**
			 * Add a helper function to handle post Meta.
			 */</span>
			MetaMixin = {
				<span class="hljs-attr">getMeta</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">return</span> buildCollectionGetter( <span class="hljs-keyword">this</span>, <span class="hljs-string">'PostMeta'</span>, <span class="hljs-string">'https://api.w.org/meta'</span> );
				}
			},

			<span class="hljs-comment">/**
			 * Add a helper function to handle post Revisions.
			 */</span>
			RevisionsMixin = {
				<span class="hljs-attr">getRevisions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">return</span> buildCollectionGetter( <span class="hljs-keyword">this</span>, <span class="hljs-string">'PostRevisions'</span> );
				}
			},

			<span class="hljs-comment">/**
			 * Add a helper function to handle post Tags.
			 */</span>
			TagsMixin = {

				<span class="hljs-comment">/**
				 * Get the tags for a post.
				 *
				 * @return {Deferred.promise} promise Resolves to an array of tags.
				 */</span>
				getTags: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> tagIds = <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'tags'</span> ),
						tags  = <span class="hljs-keyword">new</span> wp.api.collections.Tags();</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Resolve with an empty array if no tags.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.isEmpty( tagIds ) ) {
						<span class="hljs-keyword">return</span> jQuery.Deferred().resolve( [] );
					}

					<span class="hljs-keyword">return</span> tags.fetch( { <span class="hljs-attr">data</span>: { <span class="hljs-attr">include</span>: tagIds } } );
				},

				<span class="hljs-comment">/**
				 * Set the tags for a post.
				 *
				 * Accepts an array of tag slugs, or a Tags collection.
				 *
				 * @param {array|Backbone.Collection} tags The tags to set on the post.
				 *
				 */</span>
				setTags: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> tags </span>) </span>{
					<span class="hljs-keyword">var</span> allTags, newTag,
						self = <span class="hljs-keyword">this</span>,
						newTags = [];

					<span class="hljs-keyword">if</span> ( _.isString( tags ) ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>If this is an array of slugs, build a collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.isArray( tags ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Get all the tags.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						allTags = <span class="hljs-keyword">new</span> wp.api.collections.Tags();
						allTags.fetch( {
							<span class="hljs-attr">data</span>:    { <span class="hljs-attr">per_page</span>: <span class="hljs-number">100</span> },
							<span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> alltags </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Find the passed tags and set them up.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								_.each( tags, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> tag </span>) </span>{
									newTag = <span class="hljs-keyword">new</span> wp.api.models.Tag( alltags.findWhere( { <span class="hljs-attr">slug</span>: tag } ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Tie the new tag to the post.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>									newTag.set( <span class="hljs-string">'parent_post'</span>, self.get( <span class="hljs-string">'id'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Add the new tag to the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>									newTags.push( newTag );
								} );
								tags = <span class="hljs-keyword">new</span> wp.api.collections.Tags( newTags );
								self.setTagsWithCollection( tags );
							}
						} );

					} <span class="hljs-keyword">else</span> {
						<span class="hljs-keyword">this</span>.setTagsWithCollection( tags );
					}
				},

				<span class="hljs-comment">/**
				 * Set the tags for a post.
				 *
				 * Accepts a Tags collection.
				 *
				 * @param {array|Backbone.Collection} tags The tags to set on the post.
				 *
				 */</span>
				setTagsWithCollection: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> tags </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Pluck out the category ids.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.set( <span class="hljs-string">'tags'</span>, tags.pluck( <span class="hljs-string">'id'</span> ) );
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.save();
				}
			},

			<span class="hljs-comment">/**
			 * Add a helper function to handle post Categories.
			 */</span>
			CategoriesMixin = {

				<span class="hljs-comment">/**
				 * Get a the categories for a post.
				 *
				 * @return {Deferred.promise} promise Resolves to an array of categories.
				 */</span>
				getCategories: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> categoryIds = <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'categories'</span> ),
						categories  = <span class="hljs-keyword">new</span> wp.api.collections.Categories();</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Resolve with an empty array if no categories.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.isEmpty( categoryIds ) ) {
						<span class="hljs-keyword">return</span> jQuery.Deferred().resolve( [] );
					}

					<span class="hljs-keyword">return</span> categories.fetch( { <span class="hljs-attr">data</span>: { <span class="hljs-attr">include</span>: categoryIds } } );
				},

				<span class="hljs-comment">/**
				 * Set the categories for a post.
				 *
				 * Accepts an array of category slugs, or a Categories collection.
				 *
				 * @param {array|Backbone.Collection} categories The categories to set on the post.
				 *
				 */</span>
				setCategories: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> categories </span>) </span>{
					<span class="hljs-keyword">var</span> allCategories, newCategory,
						self = <span class="hljs-keyword">this</span>,
						newCategories = [];

					<span class="hljs-keyword">if</span> ( _.isString( categories ) ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>If this is an array of slugs, build a collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( _.isArray( categories ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Get all the categories.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						allCategories = <span class="hljs-keyword">new</span> wp.api.collections.Categories();
						allCategories.fetch( {
							<span class="hljs-attr">data</span>:    { <span class="hljs-attr">per_page</span>: <span class="hljs-number">100</span> },
							<span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> allcats </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Find the passed categories and set them up.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								_.each( categories, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> category </span>) </span>{
									newCategory = <span class="hljs-keyword">new</span> wp.api.models.Category( allcats.findWhere( { <span class="hljs-attr">slug</span>: category } ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Tie the new category to the post.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>									newCategory.set( <span class="hljs-string">'parent_post'</span>, self.get( <span class="hljs-string">'id'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Add the new category to the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>									newCategories.push( newCategory );
								} );
								categories = <span class="hljs-keyword">new</span> wp.api.collections.Categories( newCategories );
								self.setCategoriesWithCollection( categories );
							}
						} );

					} <span class="hljs-keyword">else</span> {
						<span class="hljs-keyword">this</span>.setCategoriesWithCollection( categories );
					}

				},

				<span class="hljs-comment">/**
				 * Set the categories for a post.
				 *
				 * Accepts Categories collection.
				 *
				 * @param {array|Backbone.Collection} categories The categories to set on the post.
				 *
				 */</span>
				setCategoriesWithCollection: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> categories </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Pluck out the category ids.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.set( <span class="hljs-string">'categories'</span>, categories.pluck( <span class="hljs-string">'id'</span> ) );
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.save();
				}
			},

			<span class="hljs-comment">/**
			 * Add a helper function to retrieve the author user model.
			 */</span>
			AuthorMixin = {
				<span class="hljs-attr">getAuthorUser</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">return</span> buildModelGetter( <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'author'</span> ), <span class="hljs-string">'User'</span>, <span class="hljs-string">'author'</span>, <span class="hljs-string">'name'</span> );
				}
			},

			<span class="hljs-comment">/**
			 * Add a helper function to retrieve the featured media.
			 */</span>
			FeaturedMediaMixin = {
				<span class="hljs-attr">getFeaturedMedia</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">return</span> buildModelGetter( <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'featured_media'</span> ), <span class="hljs-string">'Media'</span>, <span class="hljs-string">'wp:featuredmedia'</span>, <span class="hljs-string">'source_url'</span> );
				}
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Exit if we dont have valid model defaults.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( _.isUndefined( model.prototype.args ) ) {
			<span class="hljs-keyword">return</span> model;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Go thru the parsable date fields, if our model contains any of them it gets the TimeStampedMixin.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_.each( parseableDates, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> theDateKey </span>) </span>{
			<span class="hljs-keyword">if</span> ( ! _.isUndefined( model.prototype.args[ theDateKey ] ) ) {
				hasDate = <span class="hljs-literal">true</span>;
			}
		} );</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Add the TimeStampedMixin for models that contain a date field.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( hasDate ) {
			model = model.extend( TimeStampedMixin );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Add the AuthorMixin for models that contain an author.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! _.isUndefined( model.prototype.args.author ) ) {
			model = model.extend( AuthorMixin );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Add the FeaturedMediaMixin for models that contain a featured_media.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! _.isUndefined( model.prototype.args.featured_media ) ) {
			model = model.extend( FeaturedMediaMixin );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Add the CategoriesMixin for models that support categories collections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! _.isUndefined( model.prototype.args.categories ) ) {
			model = model.extend( CategoriesMixin );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Add the MetaMixin for models that support meta collections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! _.isUndefined( loadingObjects.collections[ modelClassName + <span class="hljs-string">'Meta'</span> ] ) ) {
			model = model.extend( MetaMixin );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Add the TagsMixin for models that support tags collections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! _.isUndefined( model.prototype.args.tags ) ) {
			model = model.extend( TagsMixin );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Add the RevisionsMixin for models that support revisions collections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! _.isUndefined( loadingObjects.collections[ modelClassName + <span class="hljs-string">'Revisions'</span> ] ) ) {
			model = model.extend( RevisionsMixin );
		}

		<span class="hljs-keyword">return</span> model;
	};

})( <span class="hljs-built_in">window</span> );

<span class="hljs-comment">/* global wpApiSettings:false */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Suppress warning about parse functions unused options argument:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* jshint unused:false */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

	<span class="hljs-keyword">var</span> wpApiSettings = <span class="hljs-built_in">window</span>.wpApiSettings || {};

	<span class="hljs-comment">/**
	 * Backbone base model for all models.
	 */</span>
	wp.api.WPApiBaseModel = Backbone.Model.extend(
		<span class="hljs-comment">/** @lends WPApiBaseModel.prototype  */</span>
		{
			<span class="hljs-comment">/**
			 * Set nonce header before every Backbone sync.
			 *
			 * @param {string} method.
			 * @param {Backbone.Model} model.
			 * @param {{beforeSend}, *} options.
			 * @returns {*}.
			 */</span>
			sync: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> method, model, options </span>) </span>{
				<span class="hljs-keyword">var</span> beforeSend;

				options = options || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Remove date_gmt if null.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( _.isNull( model.get( <span class="hljs-string">'date_gmt'</span> ) ) ) {
					model.unset( <span class="hljs-string">'date_gmt'</span> );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Remove slug if empty.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( _.isEmpty( model.get( <span class="hljs-string">'slug'</span> ) ) ) {
					model.unset( <span class="hljs-string">'slug'</span> );
				}

				<span class="hljs-keyword">if</span> ( ! _.isUndefined( wpApiSettings.nonce ) &amp;&amp; ! _.isNull( wpApiSettings.nonce ) ) {
					beforeSend = options.beforeSend;</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>@todo enable option for jsonp endpoints
options.dataType = jsonp;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
					options.beforeSend = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> xhr </span>) </span>{
						xhr.setRequestHeader( <span class="hljs-string">'X-WP-Nonce'</span>, wpApiSettings.nonce );

						<span class="hljs-keyword">if</span> ( beforeSend ) {
							<span class="hljs-keyword">return</span> beforeSend.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
						}
					};
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Add ?force=true to use delete method when required.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.requireForceForDelete &amp;&amp; <span class="hljs-string">'delete'</span> === method ) {
					model.url = model.url() + <span class="hljs-string">'?force=true'</span>;
				}
				<span class="hljs-keyword">return</span> Backbone.sync( method, model, options );
			},

			<span class="hljs-comment">/**
			 * Save is only allowed when the PUT OR POST methods are available for the endpoint.
			 */</span>
			save: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> attrs, options </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Do we have the put method, then execute the save.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( _.includes( <span class="hljs-keyword">this</span>.methods, <span class="hljs-string">'PUT'</span> ) || _.includes( <span class="hljs-keyword">this</span>.methods, <span class="hljs-string">'POST'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Proxy the call to the original save function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">return</span> Backbone.Model.prototype.save.call( <span class="hljs-keyword">this</span>, attrs, options );
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Otherwise bail, disallowing action.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			},

			<span class="hljs-comment">/**
			 * Delete is only allowed when the DELETE method is available for the endpoint.
			 */</span>
			destroy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> options </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Do we have the DELETE method, then execute the destroy.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( _.includes( <span class="hljs-keyword">this</span>.methods, <span class="hljs-string">'DELETE'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Proxy the call to the original save function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">return</span> Backbone.Model.prototype.destroy.call( <span class="hljs-keyword">this</span>, options );
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>Otherwise bail, disallowing action.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			}

		}
	);

	<span class="hljs-comment">/**
	 * API Schema model. Contains meta information about the API.
	 */</span>
	wp.api.models.Schema = wp.api.WPApiBaseModel.extend(
		<span class="hljs-comment">/** @lends Schema.prototype  */</span>
		{
			<span class="hljs-attr">defaults</span>: {
				<span class="hljs-attr">_links</span>: {},
				<span class="hljs-attr">namespace</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">routes</span>: {}
			},

			<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> attributes, options </span>) </span>{
				<span class="hljs-keyword">var</span> model = <span class="hljs-keyword">this</span>;
				options = options || {};

				wp.api.WPApiBaseModel.prototype.initialize.call( model, attributes, options );

				model.apiRoot = options.apiRoot || wpApiSettings.root;
				model.versionString = options.versionString || wpApiSettings.versionString;
			},

			<span class="hljs-attr">url</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.apiRoot + <span class="hljs-keyword">this</span>.versionString;
			}
		}
	);
})();

( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

	<span class="hljs-keyword">var</span> wpApiSettings = <span class="hljs-built_in">window</span>.wpApiSettings || {};

	<span class="hljs-comment">/**
	 * Contains basic collection functionality such as pagination.
	 */</span>
	wp.api.WPApiBaseCollection = Backbone.Collection.extend(
		<span class="hljs-comment">/** @lends BaseCollection.prototype  */</span>
		{

			<span class="hljs-comment">/**
			 * Setup default state.
			 */</span>
			initialize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> models, options </span>) </span>{
				<span class="hljs-keyword">this</span>.state = {
					<span class="hljs-attr">data</span>: {},
					<span class="hljs-attr">currentPage</span>: <span class="hljs-literal">null</span>,
					<span class="hljs-attr">totalPages</span>: <span class="hljs-literal">null</span>,
					<span class="hljs-attr">totalObjects</span>: <span class="hljs-literal">null</span>
				};
				<span class="hljs-keyword">if</span> ( _.isUndefined( options ) ) {
					<span class="hljs-keyword">this</span>.parent = <span class="hljs-string">''</span>;
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">this</span>.parent = options.parent;
				}
			},

			<span class="hljs-comment">/**
			 * Extend Backbone.Collection.sync to add nince and pagination support.
			 *
			 * Set nonce header before every Backbone sync.
			 *
			 * @param {string} method.
			 * @param {Backbone.Model} model.
			 * @param {{success}, *} options.
			 * @returns {*}.
			 */</span>
			sync: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> method, model, options </span>) </span>{
				<span class="hljs-keyword">var</span> beforeSend, success,
					self = <span class="hljs-keyword">this</span>;

				options    = options || {};
				beforeSend = options.beforeSend;</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>If we have a localized nonce, pass that along with each sync.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> wpApiSettings.nonce ) {
					options.beforeSend = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> xhr </span>) </span>{
						xhr.setRequestHeader( <span class="hljs-string">'X-WP-Nonce'</span>, wpApiSettings.nonce );

						<span class="hljs-keyword">if</span> ( beforeSend ) {
							<span class="hljs-keyword">return</span> beforeSend.apply( self, <span class="hljs-built_in">arguments</span> );
						}
					};
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>When reading, add pagination data.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'read'</span> === method ) {
					<span class="hljs-keyword">if</span> ( options.data ) {
						self.state.data = _.clone( options.data );

						<span class="hljs-keyword">delete</span> self.state.data.page;
					} <span class="hljs-keyword">else</span> {
						self.state.data = options.data = {};
					}

					<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.data.page ) {
						self.state.currentPage  = <span class="hljs-literal">null</span>;
						self.state.totalPages   = <span class="hljs-literal">null</span>;
						self.state.totalObjects = <span class="hljs-literal">null</span>;
					} <span class="hljs-keyword">else</span> {
						self.state.currentPage = options.data.page - <span class="hljs-number">1</span>;
					}

					success = options.success;
					options.success = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data, textStatus, request </span>) </span>{
						<span class="hljs-keyword">if</span> ( ! _.isUndefined( request ) ) {
							self.state.totalPages   = <span class="hljs-built_in">parseInt</span>( request.getResponseHeader( <span class="hljs-string">'x-wp-totalpages'</span> ), <span class="hljs-number">10</span> );
							self.state.totalObjects = <span class="hljs-built_in">parseInt</span>( request.getResponseHeader( <span class="hljs-string">'x-wp-total'</span> ), <span class="hljs-number">10</span> );
						}

						<span class="hljs-keyword">if</span> ( <span class="hljs-literal">null</span> === self.state.currentPage ) {
							self.state.currentPage = <span class="hljs-number">1</span>;
						} <span class="hljs-keyword">else</span> {
							self.state.currentPage++;
						}

						<span class="hljs-keyword">if</span> ( success ) {
							<span class="hljs-keyword">return</span> success.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
						}
					};
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Continue by calling Bacckbones sync.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">return</span> Backbone.sync( method, model, options );
			},

			<span class="hljs-comment">/**
			 * Fetches the next page of objects if a new page exists.
			 *
			 * @param {data: {page}} options.
			 * @returns {*}.
			 */</span>
			more: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> options </span>) </span>{
				options = options || {};
				options.data = options.data || {};

				_.extend( options.data, <span class="hljs-keyword">this</span>.state.data );

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.data.page ) {
					<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">this</span>.hasMore() ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}

					<span class="hljs-keyword">if</span> ( <span class="hljs-literal">null</span> === <span class="hljs-keyword">this</span>.state.currentPage || <span class="hljs-keyword">this</span>.state.currentPage &lt;= <span class="hljs-number">1</span> ) {
						options.data.page = <span class="hljs-number">2</span>;
					} <span class="hljs-keyword">else</span> {
						options.data.page = <span class="hljs-keyword">this</span>.state.currentPage + <span class="hljs-number">1</span>;
					}
				}

				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fetch( options );
			},

			<span class="hljs-comment">/**
			 * Returns true if there are more pages of objects available.
			 *
			 * @returns null|boolean.
			 */</span>
			hasMore: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-literal">null</span> === <span class="hljs-keyword">this</span>.state.totalPages ||
					 <span class="hljs-literal">null</span> === <span class="hljs-keyword">this</span>.state.totalObjects ||
					 <span class="hljs-literal">null</span> === <span class="hljs-keyword">this</span>.state.currentPage ) {
					<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">return</span> ( <span class="hljs-keyword">this</span>.state.currentPage &lt; <span class="hljs-keyword">this</span>.state.totalPages );
				}
			}
		}
	);

} )();

( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

	<span class="hljs-keyword">var</span> Endpoint, initializedDeferreds = {},
		wpApiSettings = <span class="hljs-built_in">window</span>.wpApiSettings || {};
	<span class="hljs-built_in">window</span>.wp = <span class="hljs-built_in">window</span>.wp || {};
	wp.api    = wp.api || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>If wpApiSettings is unavailable, try the default.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( _.isEmpty( wpApiSettings ) ) {
		wpApiSettings.root = <span class="hljs-built_in">window</span>.location.origin + <span class="hljs-string">'/wp-json/'</span>;
	}

	Endpoint = Backbone.Model.extend( {
		<span class="hljs-attr">defaults</span>: {
			<span class="hljs-attr">apiRoot</span>: wpApiSettings.root,
			<span class="hljs-attr">versionString</span>: wp.api.versionString,
			<span class="hljs-attr">schema</span>: <span class="hljs-literal">null</span>,
			<span class="hljs-attr">models</span>: {},
			<span class="hljs-attr">collections</span>: {}
		},

		<span class="hljs-comment">/**
		 * Initialize the Endpoint model.
		 */</span>
		initialize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> model = <span class="hljs-keyword">this</span>, deferred;

			Backbone.Model.prototype.initialize.apply( model, <span class="hljs-built_in">arguments</span> );

			deferred = jQuery.Deferred();
			model.schemaConstructed = deferred.promise();

			model.schemaModel = <span class="hljs-keyword">new</span> wp.api.models.Schema( <span class="hljs-literal">null</span>, {
				<span class="hljs-attr">apiRoot</span>: model.get( <span class="hljs-string">'apiRoot'</span> ),
				<span class="hljs-attr">versionString</span>: model.get( <span class="hljs-string">'versionString'</span> )
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>When the model loads, resolve the promise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			model.schemaModel.once( <span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				model.constructFromSchema();
				deferred.resolve( model );
			} );

			<span class="hljs-keyword">if</span> ( model.get( <span class="hljs-string">'schema'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Use schema supplied as model attribute.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				model.schemaModel.set( model.schemaModel.parse( model.get( <span class="hljs-string">'schema'</span> ) ) );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
				! _.isUndefined( sessionStorage ) &amp;&amp;
				( _.isUndefined( wpApiSettings.cacheSchema ) || wpApiSettings.cacheSchema ) &amp;&amp;
				sessionStorage.getItem( <span class="hljs-string">'wp-api-schema-model'</span> + model.get( <span class="hljs-string">'apiRoot'</span> ) + model.get( <span class="hljs-string">'versionString'</span> ) )
			) {</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Used a cached copy of the schema model if available.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				model.schemaModel.set( model.schemaModel.parse( <span class="hljs-built_in">JSON</span>.parse( sessionStorage.getItem( <span class="hljs-string">'wp-api-schema-model'</span> + model.get( <span class="hljs-string">'apiRoot'</span> ) + model.get( <span class="hljs-string">'versionString'</span> ) ) ) ) );
			} <span class="hljs-keyword">else</span> {
				model.schemaModel.fetch( {
					<span class="hljs-comment">/**
					 * When the server returns the schema model data, store the data in a sessionCache so we don't
					 * have to retrieve it again for this session. Then, construct the models and collections based
					 * on the schema model data.
					 */</span>
					success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> newSchemaModel </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Store a copy of the schema model in the session cache if available.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> ( ! _.isUndefined( sessionStorage ) &amp;&amp; ( _.isUndefined( wpApiSettings.cacheSchema ) || wpApiSettings.cacheSchema ) ) {
							<span class="hljs-keyword">try</span> {
								sessionStorage.setItem( <span class="hljs-string">'wp-api-schema-model'</span> + model.get( <span class="hljs-string">'apiRoot'</span> ) + model.get( <span class="hljs-string">'versionString'</span> ), <span class="hljs-built_in">JSON</span>.stringify( newSchemaModel ) );
							} <span class="hljs-keyword">catch</span> ( error ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>Fail silently, fixes errors in safari private mode.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							}
						}
					},</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Log the error condition.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> err </span>) </span>{
						<span class="hljs-built_in">window</span>.console.log( err );
					}
				} );
			}
		},

		<span class="hljs-attr">constructFromSchema</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> routeModel = <span class="hljs-keyword">this</span>, modelRoutes, collectionRoutes, schemaRoot, loadingObjects,

			<span class="hljs-comment">/**
			 * Set up the model and collection name mapping options. As the schema is built, the
			 * model and collection names will be adjusted if they are found in the mapping object.
			 *
			 * Localizing a variable wpApiSettings.mapping will over-ride the default mapping options.
			 *
			 */</span>
			mapping = wpApiSettings.mapping || {
				<span class="hljs-attr">models</span>: {
					<span class="hljs-string">'Categories'</span>:      <span class="hljs-string">'Category'</span>,
					<span class="hljs-string">'Comments'</span>:        <span class="hljs-string">'Comment'</span>,
					<span class="hljs-string">'Pages'</span>:           <span class="hljs-string">'Page'</span>,
					<span class="hljs-string">'PagesMeta'</span>:       <span class="hljs-string">'PageMeta'</span>,
					<span class="hljs-string">'PagesRevisions'</span>:  <span class="hljs-string">'PageRevision'</span>,
					<span class="hljs-string">'Posts'</span>:           <span class="hljs-string">'Post'</span>,
					<span class="hljs-string">'PostsCategories'</span>: <span class="hljs-string">'PostCategory'</span>,
					<span class="hljs-string">'PostsRevisions'</span>:  <span class="hljs-string">'PostRevision'</span>,
					<span class="hljs-string">'PostsTags'</span>:       <span class="hljs-string">'PostTag'</span>,
					<span class="hljs-string">'Schema'</span>:          <span class="hljs-string">'Schema'</span>,
					<span class="hljs-string">'Statuses'</span>:        <span class="hljs-string">'Status'</span>,
					<span class="hljs-string">'Tags'</span>:            <span class="hljs-string">'Tag'</span>,
					<span class="hljs-string">'Taxonomies'</span>:      <span class="hljs-string">'Taxonomy'</span>,
					<span class="hljs-string">'Types'</span>:           <span class="hljs-string">'Type'</span>,
					<span class="hljs-string">'Users'</span>:           <span class="hljs-string">'User'</span>
				},
				<span class="hljs-attr">collections</span>: {
					<span class="hljs-string">'PagesMeta'</span>:       <span class="hljs-string">'PageMeta'</span>,
					<span class="hljs-string">'PagesRevisions'</span>:  <span class="hljs-string">'PageRevisions'</span>,
					<span class="hljs-string">'PostsCategories'</span>: <span class="hljs-string">'PostCategories'</span>,
					<span class="hljs-string">'PostsMeta'</span>:       <span class="hljs-string">'PostMeta'</span>,
					<span class="hljs-string">'PostsRevisions'</span>:  <span class="hljs-string">'PostRevisions'</span>,
					<span class="hljs-string">'PostsTags'</span>:       <span class="hljs-string">'PostTags'</span>
				}
			};

			<span class="hljs-comment">/**
			 * Iterate thru the routes, picking up models and collections to build. Builds two arrays,
			 * one for models and one for collections.
			 */</span>
			modelRoutes      = [];
			collectionRoutes = [];
			schemaRoot       = routeModel.get( <span class="hljs-string">'apiRoot'</span> ).replace( wp.api.utils.getRootUrl(), <span class="hljs-string">''</span> );
			loadingObjects   = {};

			<span class="hljs-comment">/**
			 * Tracking objects for models and collections.
			 */</span>
			loadingObjects.models      = {};
			loadingObjects.collections = {};

			_.each( routeModel.schemaModel.get( <span class="hljs-string">'routes'</span> ), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> route, index </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Skip the schema root if included in the schema.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( index !== routeModel.get( <span class="hljs-string">' versionString'</span> ) &amp;&amp;
						index !== schemaRoot &amp;&amp;
						index !== ( <span class="hljs-string">'/'</span> + routeModel.get( <span class="hljs-string">'versionString'</span> ).slice( <span class="hljs-number">0</span>, <span class="hljs-number">-1</span> ) )
				) {</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Single items end with a regex (or the special case me).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/(?:.*[+)]|\/me)$/</span>.test( index ) ) {
						modelRoutes.push( { <span class="hljs-attr">index</span>: index, <span class="hljs-attr">route</span>: route } );
					} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Collections end in a name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						collectionRoutes.push( { <span class="hljs-attr">index</span>: index, <span class="hljs-attr">route</span>: route } );
					}
				}
			} );

			<span class="hljs-comment">/**
			 * Construct the models.
			 *
			 * Base the class name on the route endpoint.
			 */</span>
			_.each( modelRoutes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> modelRoute </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>Extract the name and any parent from the route.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> modelClassName,
					routeName  = wp.api.utils.extractRoutePart( modelRoute.index, <span class="hljs-number">2</span>, routeModel.get( <span class="hljs-string">'versionString'</span> ), <span class="hljs-literal">true</span> ),
					parentName = wp.api.utils.extractRoutePart( modelRoute.index, <span class="hljs-number">1</span>, routeModel.get( <span class="hljs-string">'versionString'</span> ), <span class="hljs-literal">false</span> ),
					routeEnd   = wp.api.utils.extractRoutePart( modelRoute.index, <span class="hljs-number">1</span>, routeModel.get( <span class="hljs-string">'versionString'</span> ), <span class="hljs-literal">true</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>Clear the parent part of the rouite if its actually the version string.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( parentName === routeModel.get( <span class="hljs-string">'versionString'</span> ) ) {
					parentName = <span class="hljs-string">''</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Handle the special case of the me route.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'me'</span> === routeEnd ) {
					routeName = <span class="hljs-string">'me'</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>If the model has a parent in its route, add that to its class name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> !== parentName &amp;&amp; parentName !== routeName ) {
					modelClassName = wp.api.utils.capitalizeAndCamelCaseDashes( parentName ) + wp.api.utils.capitalizeAndCamelCaseDashes( routeName );
					modelClassName = mapping.models[ modelClassName ] || modelClassName;
					loadingObjects.models[ modelClassName ] = wp.api.WPApiBaseModel.extend( {</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Return a constructed url based on the parent and id.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						url: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
							<span class="hljs-keyword">var</span> url =
								routeModel.get( <span class="hljs-string">'apiRoot'</span> ) +
								routeModel.get( <span class="hljs-string">'versionString'</span> ) +
								parentName +  <span class="hljs-string">'/'</span> +
									( ( _.isUndefined( <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'parent'</span> ) ) || <span class="hljs-number">0</span> === <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'parent'</span> ) ) ?
										( _.isUndefined( <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'parent_post'</span> ) ) ? <span class="hljs-string">''</span> : <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'parent_post'</span> ) + <span class="hljs-string">'/'</span> ) :
										<span class="hljs-keyword">this</span>.get( <span class="hljs-string">'parent'</span> ) + <span class="hljs-string">'/'</span> ) +
								routeName;

							<span class="hljs-keyword">if</span> ( ! _.isUndefined( <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'id'</span> ) ) ) {
								url +=  <span class="hljs-string">'/'</span> + <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'id'</span> );
							}
							<span class="hljs-keyword">return</span> url;
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Include a reference to the original route object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						route: modelRoute,</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Include a reference to the original class name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						name: modelClassName,</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Include the array of route methods for easy reference.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						methods: modelRoute.route.methods,

						<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> attributes, options </span>) </span>{
							wp.api.WPApiBaseModel.prototype.initialize.call( <span class="hljs-keyword">this</span>, attributes, options );

							<span class="hljs-comment">/**
							 * Posts and pages support trashing, other types don't support a trash
							 * and require that you pass ?force=true to actually delete them.
							 *
							 * @todo we should be getting trashability from the Schema, not hard coding types here.
							 */</span>
							<span class="hljs-keyword">if</span> (
								<span class="hljs-string">'Posts'</span> !== <span class="hljs-keyword">this</span>.name &amp;&amp;
								<span class="hljs-string">'Pages'</span> !== <span class="hljs-keyword">this</span>.name &amp;&amp;
								_.includes( <span class="hljs-keyword">this</span>.methods, <span class="hljs-string">'DELETE'</span> )
							) {
								<span class="hljs-keyword">this</span>.requireForceForDelete = <span class="hljs-literal">true</span>;
							}
						}
					} );
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>This is a model without a parent in its route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					modelClassName = wp.api.utils.capitalizeAndCamelCaseDashes( routeName );
					modelClassName = mapping.models[ modelClassName ] || modelClassName;
					loadingObjects.models[ modelClassName ] = wp.api.WPApiBaseModel.extend( {</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Function that returns a constructed url based on the id.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						url: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
							<span class="hljs-keyword">var</span> url = routeModel.get( <span class="hljs-string">'apiRoot'</span> ) +
								routeModel.get( <span class="hljs-string">'versionString'</span> ) +
								( ( <span class="hljs-string">'me'</span> === routeName ) ? <span class="hljs-string">'users/me'</span> : routeName );

							<span class="hljs-keyword">if</span> ( ! _.isUndefined( <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'id'</span> ) ) ) {
								url +=  <span class="hljs-string">'/'</span> + <span class="hljs-keyword">this</span>.get( <span class="hljs-string">'id'</span> );
							}
							<span class="hljs-keyword">return</span> url;
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Include a reference to the original route object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						route: modelRoute,</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Include a reference to the original class name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						name: modelClassName,</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Include the array of route methods for easy reference.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						methods: modelRoute.route.methods
					} );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Add defaults to the new model, pulled form the endpoint.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				wp.api.utils.decorateFromRoute(
					modelRoute.route.endpoints,
					loadingObjects.models[ modelClassName ],
					routeModel.get( <span class="hljs-string">'versionString'</span> )
				);

			} );

			<span class="hljs-comment">/**
			 * Construct the collections.
			 *
			 * Base the class name on the route endpoint.
			 */</span>
			_.each( collectionRoutes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> collectionRoute </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Extract the name and any parent from the route.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> collectionClassName, modelClassName,
						routeName  = collectionRoute.index.slice( collectionRoute.index.lastIndexOf( <span class="hljs-string">'/'</span> ) + <span class="hljs-number">1</span> ),
						parentName = wp.api.utils.extractRoutePart( collectionRoute.index, <span class="hljs-number">1</span>, routeModel.get( <span class="hljs-string">'versionString'</span> ), <span class="hljs-literal">false</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>If the collection has a parent in its route, add that to its class name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> !== parentName &amp;&amp; parentName !== routeName &amp;&amp; routeModel.get( <span class="hljs-string">'versionString'</span> ) !== parentName ) {

					collectionClassName = wp.api.utils.capitalizeAndCamelCaseDashes( parentName ) + wp.api.utils.capitalizeAndCamelCaseDashes( routeName );
					modelClassName      = mapping.models[ collectionClassName ] || collectionClassName;
					collectionClassName = mapping.collections[ collectionClassName ] || collectionClassName;
					loadingObjects.collections[ collectionClassName ] = wp.api.WPApiBaseCollection.extend( {</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Function that returns a constructed url passed on the parent.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						url: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
							<span class="hljs-keyword">return</span> routeModel.get( <span class="hljs-string">'apiRoot'</span> ) + routeModel.get( <span class="hljs-string">'versionString'</span> ) +
									parentName + <span class="hljs-string">'/'</span> + <span class="hljs-keyword">this</span>.parent + <span class="hljs-string">'/'</span> +
									routeName;
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Specify the model that this collection contains.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						model: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> attrs, options </span>) </span>{
							<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> loadingObjects.models[ modelClassName ]( attrs, options );
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Include a reference to the original class name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						name: collectionClassName,</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Include a reference to the original route object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						route: collectionRoute,</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>Include the array of route methods for easy reference.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						methods: collectionRoute.route.methods
					} );
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>This is a collection without a parent in its route.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					collectionClassName = wp.api.utils.capitalizeAndCamelCaseDashes( routeName );
					modelClassName      = mapping.models[ collectionClassName ] || collectionClassName;
					collectionClassName = mapping.collections[ collectionClassName ] || collectionClassName;
					loadingObjects.collections[ collectionClassName ] = wp.api.WPApiBaseCollection.extend( {</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>For the url of a root level collection, use a string.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						url: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
							<span class="hljs-keyword">return</span> routeModel.get( <span class="hljs-string">'apiRoot'</span> ) + routeModel.get( <span class="hljs-string">'versionString'</span> ) + routeName;
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Specify the model that this collection contains.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						model: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> attrs, options </span>) </span>{
							<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> loadingObjects.models[ modelClassName ]( attrs, options );
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Include a reference to the original class name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						name: collectionClassName,</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Include a reference to the original route object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						route: collectionRoute,</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Include the array of route methods for easy reference.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						methods: collectionRoute.route.methods
					} );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>Add defaults to the new model, pulled form the endpoint.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				wp.api.utils.decorateFromRoute( collectionRoute.route.endpoints, loadingObjects.collections[ collectionClassName ] );
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>Add mixins and helpers for each of the models.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			_.each( loadingObjects.models, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> model, index </span>) </span>{
				loadingObjects.models[ index ] = wp.api.utils.addMixinsAndHelpers( model, index, loadingObjects );
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Set the routeModel models and collections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			routeModel.set( <span class="hljs-string">'models'</span>, loadingObjects.models );
			routeModel.set( <span class="hljs-string">'collections'</span>, loadingObjects.collections );

		}

	} );

	wp.api.endpoints = <span class="hljs-keyword">new</span> Backbone.Collection();

	<span class="hljs-comment">/**
	 * Initialize the wp-api, optionally passing the API root.
	 *
	 * @param {object} [args]
	 * @param {string} [args.apiRoot] The api root. Optional, defaults to wpApiSettings.root.
	 * @param {string} [args.versionString] The version string. Optional, defaults to wpApiSettings.root.
	 * @param {object} [args.schema] The schema. Optional, will be fetched from API if not provided.
	 */</span>
	wp.api.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> args </span>) </span>{
		<span class="hljs-keyword">var</span> endpoint, attributes = {}, deferred, promise;

		args                     = args || {};
		attributes.apiRoot       = args.apiRoot || wpApiSettings.root || <span class="hljs-string">'/wp-json'</span>;
		attributes.versionString = args.versionString || wpApiSettings.versionString || <span class="hljs-string">'wp/v2/'</span>;
		attributes.schema        = args.schema || <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">if</span> ( ! attributes.schema &amp;&amp; attributes.apiRoot === wpApiSettings.root &amp;&amp; attributes.versionString === wpApiSettings.versionString ) {
			attributes.schema = wpApiSettings.schema;
		}

		<span class="hljs-keyword">if</span> ( ! initializedDeferreds[ attributes.apiRoot + attributes.versionString ] ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Look for an existing copy of this endpoint</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			endpoint = wp.api.endpoints.findWhere( { <span class="hljs-string">'apiRoot'</span>: attributes.apiRoot, <span class="hljs-string">'versionString'</span>: attributes.versionString } );
			<span class="hljs-keyword">if</span> ( ! endpoint ) {
				endpoint = <span class="hljs-keyword">new</span> Endpoint( attributes );
			}
			deferred = jQuery.Deferred();
			promise = deferred.promise();

			endpoint.schemaConstructed.done( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> resolvedEndpoint </span>) </span>{
				wp.api.endpoints.add( resolvedEndpoint );</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>Map the default endpoints, extending any already present items (including Schema model).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				wp.api.models      = _.extend( wp.api.models, resolvedEndpoint.get( <span class="hljs-string">'models'</span> ) );
				wp.api.collections = _.extend( wp.api.collections, resolvedEndpoint.get( <span class="hljs-string">'collections'</span> ) );
				deferred.resolve( resolvedEndpoint );
			} );
			initializedDeferreds[ attributes.apiRoot + attributes.versionString ] = promise;
		}
		<span class="hljs-keyword">return</span> initializedDeferreds[ attributes.apiRoot + attributes.versionString ];
	};

	<span class="hljs-comment">/**
	 * Construct the default endpoints and add to an endpoints collection.
	 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>The wp.api.init function returns a promise that will resolve with the endpoint once it is ready.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	wp.api.loadPromise = wp.api.init();

} )();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
