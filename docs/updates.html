<!DOCTYPE html>

<html>
<head>
  <title>updates.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>updates.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * Functions for ajaxified updates, deletions and installs inside the WordPress admin.
 *
 * @version 4.2.0
 *
 * @package WordPress
 * @subpackage Administration
 */</span>

<span class="hljs-comment">/* global pagenow */</span>

<span class="hljs-comment">/**
 * @param {jQuery}  $                                   jQuery object.
 * @param {object}  wp                                  WP object.
 * @param {object}  settings                            WP Updates settings.
 * @param {string}  settings.ajax_nonce                 AJAX nonce.
 * @param {object}  settings.l10n                       Translation strings.
 * @param {object=} settings.plugins                    Base names of plugins in their different states.
 * @param {Array}   settings.plugins.all                Base names of all plugins.
 * @param {Array}   settings.plugins.active             Base names of active plugins.
 * @param {Array}   settings.plugins.inactive           Base names of inactive plugins.
 * @param {Array}   settings.plugins.upgrade            Base names of plugins with updates available.
 * @param {Array}   settings.plugins.recently_activated Base names of recently activated plugins.
 * @param {object=} settings.themes                     Plugin/theme status information or null.
 * @param {number}  settings.themes.all                 Amount of all themes.
 * @param {number}  settings.themes.upgrade             Amount of themes with updates available.
 * @param {number}  settings.themes.disabled            Amount of disabled themes.
 * @param {object=} settings.totals                     Combined information for available update counts.
 * @param {number}  settings.totals.count               Holds the amount of available updates.
 */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $, wp, settings </span>) </span>{
	<span class="hljs-keyword">var</span> $<span class="hljs-built_in">document</span> = $( <span class="hljs-built_in">document</span> );

	wp = wp || {};

	<span class="hljs-comment">/**
	 * The WP Updates object.
	 *
	 * @since 4.2.0
	 *
	 * @type {object}
	 */</span>
	wp.updates = {};

	<span class="hljs-comment">/**
	 * User nonce for ajax calls.
	 *
	 * @since 4.2.0
	 *
	 * @type {string}
	 */</span>
	wp.updates.ajaxNonce = settings.ajax_nonce;

	<span class="hljs-comment">/**
	 * Localized strings.
	 *
	 * @since 4.2.0
	 *
	 * @type {object}
	 */</span>
	wp.updates.l10n = settings.l10n;

	<span class="hljs-comment">/**
	 * Current search term.
	 *
	 * @since 4.6.0
	 *
	 * @type {string}
	 */</span>
	wp.updates.searchTerm = <span class="hljs-string">''</span>;

	<span class="hljs-comment">/**
	 * Whether filesystem credentials need to be requested from the user.
	 *
	 * @since 4.2.0
	 *
	 * @type {bool}
	 */</span>
	wp.updates.shouldRequestFilesystemCredentials = <span class="hljs-literal">false</span>;

	<span class="hljs-comment">/**
	 * Filesystem credentials to be packaged along with the request.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 Added `available` property to indicate whether credentials have been provided.
	 *
	 * @type {object} filesystemCredentials                    Holds filesystem credentials.
	 * @type {object} filesystemCredentials.ftp                Holds FTP credentials.
	 * @type {string} filesystemCredentials.ftp.host           FTP host. Default empty string.
	 * @type {string} filesystemCredentials.ftp.username       FTP user name. Default empty string.
	 * @type {string} filesystemCredentials.ftp.password       FTP password. Default empty string.
	 * @type {string} filesystemCredentials.ftp.connectionType Type of FTP connection. 'ssh', 'ftp', or 'ftps'.
	 *                                                         Default empty string.
	 * @type {object} filesystemCredentials.ssh                Holds SSH credentials.
	 * @type {string} filesystemCredentials.ssh.publicKey      The public key. Default empty string.
	 * @type {string} filesystemCredentials.ssh.privateKey     The private key. Default empty string.
	 * @type {string} filesystemCredentials.fsNonce            Filesystem credentials form nonce.
	 * @type {bool}   filesystemCredentials.available          Whether filesystem credentials have been provided.
	 *                                                         Default 'false'.
	 */</span>
	wp.updates.filesystemCredentials = {
		<span class="hljs-attr">ftp</span>:       {
			<span class="hljs-attr">host</span>:           <span class="hljs-string">''</span>,
			<span class="hljs-attr">username</span>:       <span class="hljs-string">''</span>,
			<span class="hljs-attr">password</span>:       <span class="hljs-string">''</span>,
			<span class="hljs-attr">connectionType</span>: <span class="hljs-string">''</span>
		},
		<span class="hljs-attr">ssh</span>:       {
			<span class="hljs-attr">publicKey</span>:  <span class="hljs-string">''</span>,
			<span class="hljs-attr">privateKey</span>: <span class="hljs-string">''</span>
		},
		<span class="hljs-attr">fsNonce</span>: <span class="hljs-string">''</span>,
		<span class="hljs-attr">available</span>: <span class="hljs-literal">false</span>
	};

	<span class="hljs-comment">/**
	 * Whether we're waiting for an Ajax request to complete.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 More accurately named `ajaxLocked`.
	 *
	 * @type {bool}
	 */</span>
	wp.updates.ajaxLocked = <span class="hljs-literal">false</span>;

	<span class="hljs-comment">/**
	 * Admin notice template.
	 *
	 * @since 4.6.0
	 *
	 * @type {function} A function that lazily-compiles the template requested.
	 */</span>
	wp.updates.adminNotice = wp.template( <span class="hljs-string">'wp-updates-admin-notice'</span> );

	<span class="hljs-comment">/**
	 * Update queue.
	 *
	 * If the user tries to update a plugin while an update is
	 * already happening, it can be placed in this queue to perform later.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 More accurately named `queue`.
	 *
	 * @type {Array.object}
	 */</span>
	wp.updates.queue = [];

	<span class="hljs-comment">/**
	 * Holds a jQuery reference to return focus to when exiting the request credentials modal.
	 *
	 * @since 4.2.0
	 *
	 * @type {jQuery}
	 */</span>
	wp.updates.$elToReturnFocusToFromCredentialsModal = <span class="hljs-literal">undefined</span>;

	<span class="hljs-comment">/**
	 * Adds or updates an admin notice.
	 *
	 * @since 4.6.0
	 *
	 * @param {object}  data
	 * @param {*=}      data.selector      Optional. Selector of an element to be replaced with the admin notice.
	 * @param {string=} data.id            Optional. Unique id that will be used as the notice's id attribute.
	 * @param {string=} data.className     Optional. Class names that will be used in the admin notice.
	 * @param {string=} data.message       Optional. The message displayed in the notice.
	 * @param {number=} data.successes     Optional. The amount of successful operations.
	 * @param {number=} data.errors        Optional. The amount of failed operations.
	 * @param {Array=}  data.errorMessages Optional. Error messages of failed operations.
	 *
	 */</span>
	wp.updates.addAdminNotice = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
		<span class="hljs-keyword">var</span> $notice = $( data.selector ), $adminNotice;

		<span class="hljs-keyword">delete</span> data.selector;
		$adminNotice = wp.updates.adminNotice( data );</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Check if this admin notice already exists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! $notice.length ) {
			$notice = $( <span class="hljs-string">'#'</span> + data.id );
		}

		<span class="hljs-keyword">if</span> ( $notice.length ) {
			$notice.replaceWith( $adminNotice );
		} <span class="hljs-keyword">else</span> {
			$( <span class="hljs-string">'.wrap'</span> ).find( <span class="hljs-string">'&gt; h1'</span> ).after( $adminNotice );
		}

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-updates-notice-added'</span> );
	};

	<span class="hljs-comment">/**
	 * Handles Ajax requests to WordPress.
	 *
	 * @since 4.6.0
	 *
	 * @param {string} action The type of Ajax request ('update-plugin', 'install-theme', etc).
	 * @param {object} data   Data that needs to be passed to the ajax callback.
	 * @return {$.promise}    A jQuery promise that represents the request,
	 *                        decorated with an abort() method.
	 */</span>
	wp.updates.ajax = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> action, data </span>) </span>{
		<span class="hljs-keyword">var</span> options = {};

		<span class="hljs-keyword">if</span> ( wp.updates.ajaxLocked ) {
			wp.updates.queue.push( {
				<span class="hljs-attr">action</span>: action,
				<span class="hljs-attr">data</span>:   data
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Return a Deferred object so callbacks can always be registered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">return</span> $.Deferred();
		}

		wp.updates.ajaxLocked = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">if</span> ( data.success ) {
			options.success = data.success;
			<span class="hljs-keyword">delete</span> data.success;
		}

		<span class="hljs-keyword">if</span> ( data.error ) {
			options.error = data.error;
			<span class="hljs-keyword">delete</span> data.error;
		}

		options.data = _.extend( data, {
			<span class="hljs-attr">action</span>:          action,
			<span class="hljs-attr">_ajax_nonce</span>:     wp.updates.ajaxNonce,
			<span class="hljs-attr">_fs_nonce</span>:       wp.updates.filesystemCredentials.fsNonce,
			<span class="hljs-attr">username</span>:        wp.updates.filesystemCredentials.ftp.username,
			<span class="hljs-attr">password</span>:        wp.updates.filesystemCredentials.ftp.password,
			<span class="hljs-attr">hostname</span>:        wp.updates.filesystemCredentials.ftp.hostname,
			<span class="hljs-attr">connection_type</span>: wp.updates.filesystemCredentials.ftp.connectionType,
			<span class="hljs-attr">public_key</span>:      wp.updates.filesystemCredentials.ssh.publicKey,
			<span class="hljs-attr">private_key</span>:     wp.updates.filesystemCredentials.ssh.privateKey
		} );

		<span class="hljs-keyword">return</span> wp.ajax.send( options ).always( wp.updates.ajaxAlways );
	};

	<span class="hljs-comment">/**
	 * Actions performed after every Ajax request.
	 *
	 * @since 4.6.0
	 *
	 * @param {object}  response
	 * @param {array=}  response.debug     Optional. Debug information.
	 * @param {string=} response.errorCode Optional. Error code for an error that occurred.
	 */</span>
	wp.updates.ajaxAlways = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">if</span> ( ! response.errorCode || <span class="hljs-string">'unable_to_connect_to_filesystem'</span> !== response.errorCode ) {
			wp.updates.ajaxLocked = <span class="hljs-literal">false</span>;
			wp.updates.queueChecker();
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> response.debug &amp;&amp; <span class="hljs-built_in">window</span>.console &amp;&amp; <span class="hljs-built_in">window</span>.console.log ) {
			_.map( response.debug, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> message </span>) </span>{
				<span class="hljs-built_in">window</span>.console.log( $( <span class="hljs-string">'&lt;p /&gt;'</span> ).html( message ).text() );
			} );
		}
	};

	<span class="hljs-comment">/**
	 * Refreshes update counts everywhere on the screen.
	 *
	 * @since 4.7.0
	 */</span>
	wp.updates.refreshCount = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> $adminBarUpdates              = $( <span class="hljs-string">'#wp-admin-bar-updates'</span> ),
			$dashboardNavMenuUpdateCount  = $( <span class="hljs-string">'a[href="update-core.php"] .update-plugins'</span> ),
			$pluginsNavMenuUpdateCount    = $( <span class="hljs-string">'a[href="plugins.php"] .update-plugins'</span> ),
			$appearanceNavMenuUpdateCount = $( <span class="hljs-string">'a[href="themes.php"] .update-plugins'</span> ),
			itemCount;

		$adminBarUpdates.find( <span class="hljs-string">'.ab-item'</span> ).removeAttr( <span class="hljs-string">'title'</span> );
		$adminBarUpdates.find( <span class="hljs-string">'.ab-label'</span> ).text( settings.totals.counts.total );</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Remove the update count from the toolbar if its zero.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === settings.totals.counts.total ) {
			$adminBarUpdates.find( <span class="hljs-string">'.ab-label'</span> ).parents( <span class="hljs-string">'li'</span> ).remove();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Update the Updates menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$dashboardNavMenuUpdateCount.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> index, element </span>) </span>{
			element.className = element.className.replace( <span class="hljs-regexp">/count-\d+/</span>, <span class="hljs-string">'count-'</span> + settings.totals.counts.total );
		} );
		<span class="hljs-keyword">if</span> ( settings.totals.counts.total &gt; <span class="hljs-number">0</span> ) {
			$dashboardNavMenuUpdateCount.find( <span class="hljs-string">'.update-count'</span> ).text( settings.totals.counts.total );
		} <span class="hljs-keyword">else</span> {
			$dashboardNavMenuUpdateCount.remove();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Update the Plugins menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$pluginsNavMenuUpdateCount.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> index, element </span>) </span>{
			element.className = element.className.replace( <span class="hljs-regexp">/count-\d+/</span>, <span class="hljs-string">'count-'</span> + settings.totals.counts.plugins );
		} );
		<span class="hljs-keyword">if</span> ( settings.totals.counts.total &gt; <span class="hljs-number">0</span> ) {
			$pluginsNavMenuUpdateCount.find( <span class="hljs-string">'.plugin-count'</span> ).text( settings.totals.counts.plugins );
		} <span class="hljs-keyword">else</span> {
			$pluginsNavMenuUpdateCount.remove();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Update the Appearance menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$appearanceNavMenuUpdateCount.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> index, element </span>) </span>{
			element.className = element.className.replace( <span class="hljs-regexp">/count-\d+/</span>, <span class="hljs-string">'count-'</span> + settings.totals.counts.themes );
		} );
		<span class="hljs-keyword">if</span> ( settings.totals.counts.total &gt; <span class="hljs-number">0</span> ) {
			$appearanceNavMenuUpdateCount.find( <span class="hljs-string">'.theme-count'</span> ).text( settings.totals.counts.themes );
		} <span class="hljs-keyword">else</span> {
			$appearanceNavMenuUpdateCount.remove();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Update list table filter navigation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugins'</span> === pagenow || <span class="hljs-string">'plugins-network'</span> === pagenow ) {
			itemCount = settings.totals.counts.plugins;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes'</span> === pagenow || <span class="hljs-string">'themes-network'</span> === pagenow ) {
			itemCount = settings.totals.counts.themes;
		}

		<span class="hljs-keyword">if</span> ( itemCount &gt; <span class="hljs-number">0</span> ) {
			$( <span class="hljs-string">'.subsubsub .upgrade .count'</span> ).text( <span class="hljs-string">'('</span> + itemCount + <span class="hljs-string">')'</span> );
		} <span class="hljs-keyword">else</span> {
			$( <span class="hljs-string">'.subsubsub .upgrade'</span> ).remove();
			$( <span class="hljs-string">'.subsubsub li:last'</span> ).html( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> $( <span class="hljs-keyword">this</span> ).children(); } );
		}
	};

	<span class="hljs-comment">/**
	 * Decrements the update counts throughout the various menus.
	 *
	 * This includes the toolbar, the "Updates" menu item and the menu items
	 * for plugins and themes.
	 *
	 * @since 3.9.0
	 *
	 * @param {string} type The type of item that was updated or deleted.
	 *                      Can be 'plugin', 'theme'.
	 */</span>
	wp.updates.decrementCount = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> type </span>) </span>{
		settings.totals.counts.total = <span class="hljs-built_in">Math</span>.max( --settings.totals.counts.total, <span class="hljs-number">0</span> );

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugin'</span> === type ) {
			settings.totals.counts.plugins = <span class="hljs-built_in">Math</span>.max( --settings.totals.counts.plugins, <span class="hljs-number">0</span> );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'theme'</span> === type ) {
			settings.totals.counts.themes = <span class="hljs-built_in">Math</span>.max( --settings.totals.counts.themes, <span class="hljs-number">0</span> );
		}

		wp.updates.refreshCount( type );
	};

	<span class="hljs-comment">/**
	 * Sends an Ajax request to the server to update a plugin.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 More accurately named `updatePlugin`.
	 *
	 * @param {object}               args         Arguments.
	 * @param {string}               args.plugin  Plugin basename.
	 * @param {string}               args.slug    Plugin slug.
	 * @param {updatePluginSuccess=} args.success Optional. Success callback. Default: wp.updates.updatePluginSuccess
	 * @param {updatePluginError=}   args.error   Optional. Error callback. Default: wp.updates.updatePluginError
	 * @return {$.promise} A jQuery promise that represents the request,
	 *                     decorated with an abort() method.
	 */</span>
	wp.updates.updatePlugin = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> args </span>) </span>{
		<span class="hljs-keyword">var</span> $updateRow, $card, $message, message;

		args = _.extend( {
			<span class="hljs-attr">success</span>: wp.updates.updatePluginSuccess,
			<span class="hljs-attr">error</span>: wp.updates.updatePluginError
		}, args );

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugins'</span> === pagenow || <span class="hljs-string">'plugins-network'</span> === pagenow ) {
			$updateRow = $( <span class="hljs-string">'tr[data-plugin="'</span> + args.plugin + <span class="hljs-string">'"]'</span> );
			$message   = $updateRow.find( <span class="hljs-string">'.update-message'</span> ).removeClass( <span class="hljs-string">'notice-error'</span> ).addClass( <span class="hljs-string">'updating-message notice-warning'</span> ).find( <span class="hljs-string">'p'</span> );
			message    = wp.updates.l10n.pluginUpdatingLabel.replace( <span class="hljs-string">'%s'</span>, $updateRow.find( <span class="hljs-string">'.plugin-title strong'</span> ).text() );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugin-install'</span> === pagenow || <span class="hljs-string">'plugin-install-network'</span> === pagenow ) {
			$card    = $( <span class="hljs-string">'.plugin-card-'</span> + args.slug );
			$message = $card.find( <span class="hljs-string">'.update-now'</span> ).addClass( <span class="hljs-string">'updating-message'</span> );
			message  = wp.updates.l10n.pluginUpdatingLabel.replace( <span class="hljs-string">'%s'</span>, $message.data( <span class="hljs-string">'name'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Remove previous error messages, if any.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$card.removeClass( <span class="hljs-string">'plugin-card-update-failed'</span> ).find( <span class="hljs-string">'.notice.notice-error'</span> ).remove();
		}

		<span class="hljs-keyword">if</span> ( $message.html() !== wp.updates.l10n.updating ) {
			$message.data( <span class="hljs-string">'originaltext'</span>, $message.html() );
		}

		$message
			.attr( <span class="hljs-string">'aria-label'</span>, message )
			.text( wp.updates.l10n.updating );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-updating'</span>, args );

		<span class="hljs-keyword">return</span> wp.updates.ajax( <span class="hljs-string">'update-plugin'</span>, args );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a successful plugin update.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 More accurately named `updatePluginSuccess`.
	 *
	 * @typedef {object} updatePluginSuccess
	 * @param {object} response            Response from the server.
	 * @param {string} response.slug       Slug of the plugin to be updated.
	 * @param {string} response.plugin     Basename of the plugin to be updated.
	 * @param {string} response.pluginName Name of the plugin to be updated.
	 * @param {string} response.oldVersion Old version of the plugin.
	 * @param {string} response.newVersion New version of the plugin.
	 */</span>
	wp.updates.updatePluginSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $pluginRow, $updateMessage, newText;

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugins'</span> === pagenow || <span class="hljs-string">'plugins-network'</span> === pagenow ) {
			$pluginRow     = $( <span class="hljs-string">'tr[data-plugin="'</span> + response.plugin + <span class="hljs-string">'"]'</span> )
				.removeClass( <span class="hljs-string">'update'</span> )
				.addClass( <span class="hljs-string">'updated'</span> );
			$updateMessage = $pluginRow.find( <span class="hljs-string">'.update-message'</span> )
				.removeClass( <span class="hljs-string">'updating-message notice-warning'</span> )
				.addClass( <span class="hljs-string">'updated-message notice-success'</span> ).find( <span class="hljs-string">'p'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Update the version number in the row.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			newText = $pluginRow.find( <span class="hljs-string">'.plugin-version-author-uri'</span> ).html().replace( response.oldVersion, response.newVersion );
			$pluginRow.find( <span class="hljs-string">'.plugin-version-author-uri'</span> ).html( newText );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugin-install'</span> === pagenow || <span class="hljs-string">'plugin-install-network'</span> === pagenow ) {
			$updateMessage = $( <span class="hljs-string">'.plugin-card-'</span> + response.slug ).find( <span class="hljs-string">'.update-now'</span> )
				.removeClass( <span class="hljs-string">'updating-message'</span> )
				.addClass( <span class="hljs-string">'button-disabled updated-message'</span> );
		}

		$updateMessage
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginUpdatedLabel.replace( <span class="hljs-string">'%s'</span>, response.pluginName ) )
			.text( wp.updates.l10n.pluginUpdated );

		wp.a11y.speak( wp.updates.l10n.updatedMsg, <span class="hljs-string">'polite'</span> );

		wp.updates.decrementCount( <span class="hljs-string">'plugin'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-update-success'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a failed plugin update.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 More accurately named `updatePluginError`.
	 *
	 * @typedef {object} updatePluginError
	 * @param {object}  response              Response from the server.
	 * @param {string}  response.slug         Slug of the plugin to be updated.
	 * @param {string}  response.plugin       Basename of the plugin to be updated.
	 * @param {string=} response.pluginName   Optional. Name of the plugin to be updated.
	 * @param {string}  response.errorCode    Error code for the error that occurred.
	 * @param {string}  response.errorMessage The error that occurred.
	 */</span>
	wp.updates.updatePluginError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $card, $message, errorMessage;

		<span class="hljs-keyword">if</span> ( ! wp.updates.isValidResponse( response, <span class="hljs-string">'update'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( wp.updates.maybeHandleCredentialError( response, <span class="hljs-string">'update-plugin'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		errorMessage = wp.updates.l10n.updateFailed.replace( <span class="hljs-string">'%s'</span>, response.errorMessage );

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugins'</span> === pagenow || <span class="hljs-string">'plugins-network'</span> === pagenow ) {
			<span class="hljs-keyword">if</span> ( response.plugin ) {
				$message = $( <span class="hljs-string">'tr[data-plugin="'</span> + response.plugin + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.update-message'</span> );
			} <span class="hljs-keyword">else</span> {
				$message = $( <span class="hljs-string">'tr[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.update-message'</span> );
			}
			$message.removeClass( <span class="hljs-string">'updating-message notice-warning'</span> ).addClass( <span class="hljs-string">'notice-error'</span> ).find( <span class="hljs-string">'p'</span> ).html( errorMessage );

			<span class="hljs-keyword">if</span> ( response.pluginName ) {
				$message.find( <span class="hljs-string">'p'</span> )
					.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginUpdateFailedLabel.replace( <span class="hljs-string">'%s'</span>, response.pluginName ) );
			} <span class="hljs-keyword">else</span> {
				$message.find( <span class="hljs-string">'p'</span> ).removeAttr( <span class="hljs-string">'aria-label'</span> );
			}
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugin-install'</span> === pagenow || <span class="hljs-string">'plugin-install-network'</span> === pagenow ) {
			$card = $( <span class="hljs-string">'.plugin-card-'</span> + response.slug )
				.addClass( <span class="hljs-string">'plugin-card-update-failed'</span> )
				.append( wp.updates.adminNotice( {
					<span class="hljs-attr">className</span>: <span class="hljs-string">'update-message notice-error notice-alt is-dismissible'</span>,
					<span class="hljs-attr">message</span>:   errorMessage
				} ) );

			$card.find( <span class="hljs-string">'.update-now'</span> )
				.text( wp.updates.l10n.updateFailedShort ).removeClass( <span class="hljs-string">'updating-message'</span> );

			<span class="hljs-keyword">if</span> ( response.pluginName ) {
				$card.find( <span class="hljs-string">'.update-now'</span> )
					.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginUpdateFailedLabel.replace( <span class="hljs-string">'%s'</span>, response.pluginName ) );
			} <span class="hljs-keyword">else</span> {
				$card.find( <span class="hljs-string">'.update-now'</span> ).removeAttr( <span class="hljs-string">'aria-label'</span> );
			}

			$card.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.notice.is-dismissible .notice-dismiss'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Use same delay as the total duration of the notice fadeTo + slideUp animation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$card
						.removeClass( <span class="hljs-string">'plugin-card-update-failed'</span> )
						.find( <span class="hljs-string">'.column-name a'</span> ).focus();

					$card.find( <span class="hljs-string">'.update-now'</span> )
						.attr( <span class="hljs-string">'aria-label'</span>, <span class="hljs-literal">false</span> )
						.text( wp.updates.l10n.updateNow );
				}, <span class="hljs-number">200</span> );
			} );
		}

		wp.a11y.speak( errorMessage, <span class="hljs-string">'assertive'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-update-error'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Sends an Ajax request to the server to install a plugin.
	 *
	 * @since 4.6.0
	 *
	 * @param {object}                args         Arguments.
	 * @param {string}                args.slug    Plugin identifier in the WordPress.org Plugin repository.
	 * @param {installPluginSuccess=} args.success Optional. Success callback. Default: wp.updates.installPluginSuccess
	 * @param {installPluginError=}   args.error   Optional. Error callback. Default: wp.updates.installPluginError
	 * @return {$.promise} A jQuery promise that represents the request,
	 *                     decorated with an abort() method.
	 */</span>
	wp.updates.installPlugin = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> args </span>) </span>{
		<span class="hljs-keyword">var</span> $card    = $( <span class="hljs-string">'.plugin-card-'</span> + args.slug ),
			$message = $card.find( <span class="hljs-string">'.install-now'</span> );

		args = _.extend( {
			<span class="hljs-attr">success</span>: wp.updates.installPluginSuccess,
			<span class="hljs-attr">error</span>: wp.updates.installPluginError
		}, args );

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'import'</span> === pagenow ) {
			$message = $( <span class="hljs-string">'[data-slug="'</span> + args.slug + <span class="hljs-string">'"]'</span> );
		}

		<span class="hljs-keyword">if</span> ( $message.html() !== wp.updates.l10n.installing ) {
			$message.data( <span class="hljs-string">'originaltext'</span>, $message.html() );
		}

		$message
			.addClass( <span class="hljs-string">'updating-message'</span> )
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginInstallingLabel.replace( <span class="hljs-string">'%s'</span>, $message.data( <span class="hljs-string">'name'</span> ) ) )
			.text( wp.updates.l10n.installing );

		wp.a11y.speak( wp.updates.l10n.installingMsg, <span class="hljs-string">'polite'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Remove previous error messages, if any.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$card.removeClass( <span class="hljs-string">'plugin-card-install-failed'</span> ).find( <span class="hljs-string">'.notice.notice-error'</span> ).remove();

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-installing'</span>, args );

		<span class="hljs-keyword">return</span> wp.updates.ajax( <span class="hljs-string">'install-plugin'</span>, args );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a successful plugin install.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} installPluginSuccess
	 * @param {object} response             Response from the server.
	 * @param {string} response.slug        Slug of the installed plugin.
	 * @param {string} response.pluginName  Name of the installed plugin.
	 * @param {string} response.activateUrl URL to activate the just installed plugin.
	 */</span>
	wp.updates.installPluginSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $message = $( <span class="hljs-string">'.plugin-card-'</span> + response.slug ).find( <span class="hljs-string">'.install-now'</span> );

		$message
			.removeClass( <span class="hljs-string">'updating-message'</span> )
			.addClass( <span class="hljs-string">'updated-message installed button-disabled'</span> )
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginInstalledLabel.replace( <span class="hljs-string">'%s'</span>, response.pluginName ) )
			.text( wp.updates.l10n.pluginInstalled );

		wp.a11y.speak( wp.updates.l10n.installedMsg, <span class="hljs-string">'polite'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-install-success'</span>, response );

		<span class="hljs-keyword">if</span> ( response.activateUrl ) {
			setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Transform the Install button into an Activate button.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$message.removeClass( <span class="hljs-string">'install-now installed button-disabled updated-message'</span> ).addClass( <span class="hljs-string">'activate-now button-primary'</span> )
					.attr( <span class="hljs-string">'href'</span>, response.activateUrl )
					.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.activatePluginLabel.replace( <span class="hljs-string">'%s'</span>, response.pluginName ) )
					.text( wp.updates.l10n.activatePlugin );
			}, <span class="hljs-number">1000</span> );
		}
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a failed plugin install.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} installPluginError
	 * @param {object}  response              Response from the server.
	 * @param {string}  response.slug         Slug of the plugin to be installed.
	 * @param {string=} response.pluginName   Optional. Name of the plugin to be installed.
	 * @param {string}  response.errorCode    Error code for the error that occurred.
	 * @param {string}  response.errorMessage The error that occurred.
	 */</span>
	wp.updates.installPluginError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $card   = $( <span class="hljs-string">'.plugin-card-'</span> + response.slug ),
			$button = $card.find( <span class="hljs-string">'.install-now'</span> ),
			errorMessage;

		<span class="hljs-keyword">if</span> ( ! wp.updates.isValidResponse( response, <span class="hljs-string">'install'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( wp.updates.maybeHandleCredentialError( response, <span class="hljs-string">'install-plugin'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		errorMessage = wp.updates.l10n.installFailed.replace( <span class="hljs-string">'%s'</span>, response.errorMessage );

		$card
			.addClass( <span class="hljs-string">'plugin-card-update-failed'</span> )
			.append( <span class="hljs-string">'&lt;div class="notice notice-error notice-alt is-dismissible"&gt;&lt;p&gt;'</span> + errorMessage + <span class="hljs-string">'&lt;/p&gt;&lt;/div&gt;'</span> );

		$card.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.notice.is-dismissible .notice-dismiss'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Use same delay as the total duration of the notice fadeTo + slideUp animation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				$card
					.removeClass( <span class="hljs-string">'plugin-card-update-failed'</span> )
					.find( <span class="hljs-string">'.column-name a'</span> ).focus();
			}, <span class="hljs-number">200</span> );
		} );

		$button
			.removeClass( <span class="hljs-string">'updating-message'</span> ).addClass( <span class="hljs-string">'button-disabled'</span> )
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginInstallFailedLabel.replace( <span class="hljs-string">'%s'</span>, $button.data( <span class="hljs-string">'name'</span> ) ) )
			.text( wp.updates.l10n.installFailedShort );

		wp.a11y.speak( errorMessage, <span class="hljs-string">'assertive'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-install-error'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a successful importer install.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} installImporterSuccess
	 * @param {object} response             Response from the server.
	 * @param {string} response.slug        Slug of the installed plugin.
	 * @param {string} response.pluginName  Name of the installed plugin.
	 * @param {string} response.activateUrl URL to activate the just installed plugin.
	 */</span>
	wp.updates.installImporterSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		wp.updates.addAdminNotice( {
			<span class="hljs-attr">id</span>:        <span class="hljs-string">'install-success'</span>,
			<span class="hljs-attr">className</span>: <span class="hljs-string">'notice-success is-dismissible'</span>,
			<span class="hljs-attr">message</span>:   wp.updates.l10n.importerInstalledMsg.replace( <span class="hljs-string">'%s'</span>, response.activateUrl + <span class="hljs-string">'&amp;from=import'</span> )
		} );

		$( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> )
			.removeClass( <span class="hljs-string">'install-now updating-message'</span> )
			.addClass( <span class="hljs-string">'activate-now'</span> )
			.attr({
				<span class="hljs-string">'href'</span>: response.activateUrl + <span class="hljs-string">'&amp;from=import'</span>,
				<span class="hljs-string">'aria-label'</span>: wp.updates.l10n.activateImporterLabel.replace( <span class="hljs-string">'%s'</span>, response.pluginName )
			})
			.text( wp.updates.l10n.activateImporter );

		wp.a11y.speak( wp.updates.l10n.installedMsg, <span class="hljs-string">'polite'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-importer-install-success'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a failed importer install.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} installImporterError
	 * @param {object}  response              Response from the server.
	 * @param {string}  response.slug         Slug of the plugin to be installed.
	 * @param {string=} response.pluginName   Optional. Name of the plugin to be installed.
	 * @param {string}  response.errorCode    Error code for the error that occurred.
	 * @param {string}  response.errorMessage The error that occurred.
	 */</span>
	wp.updates.installImporterError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> errorMessage = wp.updates.l10n.installFailed.replace( <span class="hljs-string">'%s'</span>, response.errorMessage ),
			$installLink = $( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> ),
			pluginName = $installLink.data( <span class="hljs-string">'name'</span> );

		<span class="hljs-keyword">if</span> ( ! wp.updates.isValidResponse( response, <span class="hljs-string">'install'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( wp.updates.maybeHandleCredentialError( response, <span class="hljs-string">'install-plugin'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		wp.updates.addAdminNotice( {
			<span class="hljs-attr">id</span>:        response.errorCode,
			<span class="hljs-attr">className</span>: <span class="hljs-string">'notice-error is-dismissible'</span>,
			<span class="hljs-attr">message</span>:   errorMessage
		} );

		$installLink
			.removeClass( <span class="hljs-string">'updating-message'</span> )
			.text( wp.updates.l10n.installNow )
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.installNowLabel.replace( <span class="hljs-string">'%s'</span>, pluginName ) );

		wp.a11y.speak( errorMessage, <span class="hljs-string">'assertive'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-importer-install-error'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Sends an Ajax request to the server to delete a plugin.
	 *
	 * @since 4.6.0
	 *
	 * @param {object}               args         Arguments.
	 * @param {string}               args.plugin  Basename of the plugin to be deleted.
	 * @param {string}               args.slug    Slug of the plugin to be deleted.
	 * @param {deletePluginSuccess=} args.success Optional. Success callback. Default: wp.updates.deletePluginSuccess
	 * @param {deletePluginError=}   args.error   Optional. Error callback. Default: wp.updates.deletePluginError
	 * @return {$.promise} A jQuery promise that represents the request,
	 *                     decorated with an abort() method.
	 */</span>
	wp.updates.deletePlugin = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> args </span>) </span>{
		<span class="hljs-keyword">var</span> $link = $( <span class="hljs-string">'[data-plugin="'</span> + args.plugin + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.row-actions a.delete'</span> );

		args = _.extend( {
			<span class="hljs-attr">success</span>: wp.updates.deletePluginSuccess,
			<span class="hljs-attr">error</span>: wp.updates.deletePluginError
		}, args );

		<span class="hljs-keyword">if</span> ( $link.html() !== wp.updates.l10n.deleting ) {
			$link
				.data( <span class="hljs-string">'originaltext'</span>, $link.html() )
				.text( wp.updates.l10n.deleting );
		}

		wp.a11y.speak( wp.updates.l10n.deleting, <span class="hljs-string">'polite'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-deleting'</span>, args );

		<span class="hljs-keyword">return</span> wp.updates.ajax( <span class="hljs-string">'delete-plugin'</span>, args );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a successful plugin deletion.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} deletePluginSuccess
	 * @param {object} response            Response from the server.
	 * @param {string} response.slug       Slug of the plugin that was deleted.
	 * @param {string} response.plugin     Base name of the plugin that was deleted.
	 * @param {string} response.pluginName Name of the plugin that was deleted.
	 */</span>
	wp.updates.deletePluginSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Removes the plugin and updates rows.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$( <span class="hljs-string">'[data-plugin="'</span> + response.plugin + <span class="hljs-string">'"]'</span> ).css( { <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#faafaa'</span> } ).fadeOut( <span class="hljs-number">350</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $form            = $( <span class="hljs-string">'#bulk-action-form'</span> ),
				$views           = $( <span class="hljs-string">'.subsubsub'</span> ),
				$pluginRow       = $( <span class="hljs-keyword">this</span> ),
				columnCount      = $form.find( <span class="hljs-string">'thead th:not(.hidden), thead td'</span> ).length,
				pluginDeletedRow = wp.template( <span class="hljs-string">'item-deleted-row'</span> ),
				<span class="hljs-comment">/** @type {object} plugins Base names of plugins in their different states. */</span>
				plugins          = settings.plugins;</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Add a success message after deleting a plugin.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( ! $pluginRow.hasClass( <span class="hljs-string">'plugin-update-tr'</span> ) ) {
				$pluginRow.after(
					pluginDeletedRow( {
						<span class="hljs-attr">slug</span>:    response.slug,
						<span class="hljs-attr">plugin</span>:  response.plugin,
						<span class="hljs-attr">colspan</span>: columnCount,
						<span class="hljs-attr">name</span>:    response.pluginName
					} )
				);
			}

			$pluginRow.remove();</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Remove plugin from update count.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> !== _.indexOf( plugins.upgrade, response.plugin ) ) {
				plugins.upgrade = _.without( plugins.upgrade, response.plugin );
				wp.updates.decrementCount( <span class="hljs-string">'plugin'</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Remove from views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> !== _.indexOf( plugins.inactive, response.plugin ) ) {
				plugins.inactive = _.without( plugins.inactive, response.plugin );
				<span class="hljs-keyword">if</span> ( plugins.inactive.length ) {
					$views.find( <span class="hljs-string">'.inactive .count'</span> ).text( <span class="hljs-string">'('</span> + plugins.inactive.length + <span class="hljs-string">')'</span> );
				} <span class="hljs-keyword">else</span> {
					$views.find( <span class="hljs-string">'.inactive'</span> ).remove();
				}
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> !== _.indexOf( plugins.active, response.plugin ) ) {
				plugins.active = _.without( plugins.active, response.plugin );
				<span class="hljs-keyword">if</span> ( plugins.active.length ) {
					$views.find( <span class="hljs-string">'.active .count'</span> ).text( <span class="hljs-string">'('</span> + plugins.active.length + <span class="hljs-string">')'</span> );
				} <span class="hljs-keyword">else</span> {
					$views.find( <span class="hljs-string">'.active'</span> ).remove();
				}
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> !== _.indexOf( plugins.recently_activated, response.plugin ) ) {
				plugins.recently_activated = _.without( plugins.recently_activated, response.plugin );
				<span class="hljs-keyword">if</span> ( plugins.recently_activated.length ) {
					$views.find( <span class="hljs-string">'.recently_activated .count'</span> ).text( <span class="hljs-string">'('</span> + plugins.recently_activated.length + <span class="hljs-string">')'</span> );
				} <span class="hljs-keyword">else</span> {
					$views.find( <span class="hljs-string">'.recently_activated'</span> ).remove();
				}
			}

			plugins.all = _.without( plugins.all, response.plugin );

			<span class="hljs-keyword">if</span> ( plugins.all.length ) {
				$views.find( <span class="hljs-string">'.all .count'</span> ).text( <span class="hljs-string">'('</span> + plugins.all.length + <span class="hljs-string">')'</span> );
			} <span class="hljs-keyword">else</span> {
				$form.find( <span class="hljs-string">'.tablenav'</span> ).css( { <span class="hljs-attr">visibility</span>: <span class="hljs-string">'hidden'</span> } );
				$views.find( <span class="hljs-string">'.all'</span> ).remove();

				<span class="hljs-keyword">if</span> ( ! $form.find( <span class="hljs-string">'tr.no-items'</span> ).length ) {
					$form.find( <span class="hljs-string">'#the-list'</span> ).append( <span class="hljs-string">'&lt;tr class="no-items"&gt;&lt;td class="colspanchange" colspan="'</span> + columnCount + <span class="hljs-string">'"&gt;'</span> + wp.updates.l10n.noPlugins + <span class="hljs-string">'&lt;/td&gt;&lt;/tr&gt;'</span> );
				}
			}
		} );

		wp.a11y.speak( wp.updates.l10n.pluginDeleted, <span class="hljs-string">'polite'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-delete-success'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a failed plugin deletion.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} deletePluginError
	 * @param {object}  response              Response from the server.
	 * @param {string}  response.slug         Slug of the plugin to be deleted.
	 * @param {string}  response.plugin       Base name of the plugin to be deleted
	 * @param {string=} response.pluginName   Optional. Name of the plugin to be deleted.
	 * @param {string}  response.errorCode    Error code for the error that occurred.
	 * @param {string}  response.errorMessage The error that occurred.
	 */</span>
	wp.updates.deletePluginError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $plugin, $pluginUpdateRow,
			pluginUpdateRow  = wp.template( <span class="hljs-string">'item-update-row'</span> ),
			noticeContent    = wp.updates.adminNotice( {
				<span class="hljs-attr">className</span>: <span class="hljs-string">'update-message notice-error notice-alt'</span>,
				<span class="hljs-attr">message</span>:   response.errorMessage
			} );

		<span class="hljs-keyword">if</span> ( response.plugin ) {
			$plugin          = $( <span class="hljs-string">'tr.inactive[data-plugin="'</span> + response.plugin + <span class="hljs-string">'"]'</span> );
			$pluginUpdateRow = $plugin.siblings( <span class="hljs-string">'[data-plugin="'</span> + response.plugin + <span class="hljs-string">'"]'</span> );
		} <span class="hljs-keyword">else</span> {
			$plugin          = $( <span class="hljs-string">'tr.inactive[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> );
			$pluginUpdateRow = $plugin.siblings( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> );
		}

		<span class="hljs-keyword">if</span> ( ! wp.updates.isValidResponse( response, <span class="hljs-string">'delete'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( wp.updates.maybeHandleCredentialError( response, <span class="hljs-string">'delete-plugin'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Add a plugin update row if it doesnt exist yet.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! $pluginUpdateRow.length ) {
			$plugin.addClass( <span class="hljs-string">'update'</span> ).after(
				pluginUpdateRow( {
					<span class="hljs-attr">slug</span>:    response.slug,
					<span class="hljs-attr">plugin</span>:  response.plugin || response.slug,
					<span class="hljs-attr">colspan</span>: $( <span class="hljs-string">'#bulk-action-form'</span> ).find( <span class="hljs-string">'thead th:not(.hidden), thead td'</span> ).length,
					<span class="hljs-attr">content</span>: noticeContent
				} )
			);
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Remove previous error messages, if any.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$pluginUpdateRow.find( <span class="hljs-string">'.notice-error'</span> ).remove();

			$pluginUpdateRow.find( <span class="hljs-string">'.plugin-update'</span> ).append( noticeContent );
		}

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-plugin-delete-error'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Sends an Ajax request to the server to update a theme.
	 *
	 * @since 4.6.0
	 *
	 * @param {object}              args         Arguments.
	 * @param {string}              args.slug    Theme stylesheet.
	 * @param {updateThemeSuccess=} args.success Optional. Success callback. Default: wp.updates.updateThemeSuccess
	 * @param {updateThemeError=}   args.error   Optional. Error callback. Default: wp.updates.updateThemeError
	 * @return {$.promise} A jQuery promise that represents the request,
	 *                     decorated with an abort() method.
	 */</span>
	wp.updates.updateTheme = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> args </span>) </span>{
		<span class="hljs-keyword">var</span> $notice;

		args = _.extend( {
			<span class="hljs-attr">success</span>: wp.updates.updateThemeSuccess,
			<span class="hljs-attr">error</span>: wp.updates.updateThemeError
		}, args );

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes-network'</span> === pagenow ) {
			$notice = $( <span class="hljs-string">'[data-slug="'</span> + args.slug + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.update-message'</span> ).removeClass( <span class="hljs-string">'notice-error'</span> ).addClass( <span class="hljs-string">'updating-message notice-warning'</span> ).find( <span class="hljs-string">'p'</span> );

		} <span class="hljs-keyword">else</span> {
			$notice = $( <span class="hljs-string">'#update-theme'</span> ).closest( <span class="hljs-string">'.notice'</span> ).removeClass( <span class="hljs-string">'notice-large'</span> );

			$notice.find( <span class="hljs-string">'h3'</span> ).remove();

			$notice = $notice.add( $( <span class="hljs-string">'[data-slug="'</span> + args.slug + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.update-message'</span> ) );
			$notice = $notice.addClass( <span class="hljs-string">'updating-message'</span> ).find( <span class="hljs-string">'p'</span> );
		}

		<span class="hljs-keyword">if</span> ( $notice.html() !== wp.updates.l10n.updating ) {
			$notice.data( <span class="hljs-string">'originaltext'</span>, $notice.html() );
		}

		wp.a11y.speak( wp.updates.l10n.updatingMsg, <span class="hljs-string">'polite'</span> );
		$notice.text( wp.updates.l10n.updating );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-updating'</span>, args );

		<span class="hljs-keyword">return</span> wp.updates.ajax( <span class="hljs-string">'update-theme'</span>, args );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a successful theme update.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} updateThemeSuccess
	 * @param {object} response
	 * @param {string} response.slug       Slug of the theme to be updated.
	 * @param {object} response.theme      Updated theme.
	 * @param {string} response.oldVersion Old version of the theme.
	 * @param {string} response.newVersion New version of the theme.
	 */</span>
	wp.updates.updateThemeSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> isModalOpen    = $( <span class="hljs-string">'body.modal-open'</span> ).length,
			$theme         = $( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> ),
			updatedMessage = {
				<span class="hljs-attr">className</span>: <span class="hljs-string">'updated-message notice-success notice-alt'</span>,
				<span class="hljs-attr">message</span>:   wp.updates.l10n.themeUpdated
			},
			$notice, newText;

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes-network'</span> === pagenow ) {
			$notice = $theme.find( <span class="hljs-string">'.update-message'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Update the version number in the row.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			newText = $theme.find( <span class="hljs-string">'.theme-version-author-uri'</span> ).html().replace( response.oldVersion, response.newVersion );
			$theme.find( <span class="hljs-string">'.theme-version-author-uri'</span> ).html( newText );
		} <span class="hljs-keyword">else</span> {
			$notice = $( <span class="hljs-string">'.theme-info .notice'</span> ).add( $theme.find( <span class="hljs-string">'.update-message'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Focus on Customize button after updating.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( isModalOpen ) {
				$( <span class="hljs-string">'.load-customize:visible'</span> ).focus();
			} <span class="hljs-keyword">else</span> {
				$theme.find( <span class="hljs-string">'.load-customize'</span> ).focus();
			}
		}

		wp.updates.addAdminNotice( _.extend( { <span class="hljs-attr">selector</span>: $notice }, updatedMessage ) );
		wp.a11y.speak( wp.updates.l10n.updatedMsg, <span class="hljs-string">'polite'</span> );

		wp.updates.decrementCount( <span class="hljs-string">'theme'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-update-success'</span>, response );</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Show updated message after modal re-rendered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( isModalOpen ) {
			$( <span class="hljs-string">'.theme-info .theme-author'</span> ).after( wp.updates.adminNotice( updatedMessage ) );
		}
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a failed theme update.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} updateThemeError
	 * @param {object} response              Response from the server.
	 * @param {string} response.slug         Slug of the theme to be updated.
	 * @param {string} response.errorCode    Error code for the error that occurred.
	 * @param {string} response.errorMessage The error that occurred.
	 */</span>
	wp.updates.updateThemeError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $theme       = $( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> ),
			errorMessage = wp.updates.l10n.updateFailed.replace( <span class="hljs-string">'%s'</span>, response.errorMessage ),
			$notice;

		<span class="hljs-keyword">if</span> ( ! wp.updates.isValidResponse( response, <span class="hljs-string">'update'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( wp.updates.maybeHandleCredentialError( response, <span class="hljs-string">'update-theme'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes-network'</span> === pagenow ) {
			$notice = $theme.find( <span class="hljs-string">'.update-message '</span> );
		} <span class="hljs-keyword">else</span> {
			$notice = $( <span class="hljs-string">'.theme-info .notice'</span> ).add( $theme.find( <span class="hljs-string">'.notice'</span> ) );

			$( <span class="hljs-string">'body.modal-open'</span> ).length ? $( <span class="hljs-string">'.load-customize:visible'</span> ).focus() : $theme.find( <span class="hljs-string">'.load-customize'</span> ).focus();
		}

		wp.updates.addAdminNotice( {
			<span class="hljs-attr">selector</span>:  $notice,
			<span class="hljs-attr">className</span>: <span class="hljs-string">'update-message notice-error notice-alt is-dismissible'</span>,
			<span class="hljs-attr">message</span>:   errorMessage
		} );

		wp.a11y.speak( errorMessage, <span class="hljs-string">'polite'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-update-error'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Sends an Ajax request to the server to install a theme.
	 *
	 * @since 4.6.0
	 *
	 * @param {object}               args
	 * @param {string}               args.slug    Theme stylesheet.
	 * @param {installThemeSuccess=} args.success Optional. Success callback. Default: wp.updates.installThemeSuccess
	 * @param {installThemeError=}   args.error   Optional. Error callback. Default: wp.updates.installThemeError
	 * @return {$.promise} A jQuery promise that represents the request,
	 *                     decorated with an abort() method.
	 */</span>
	wp.updates.installTheme = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> args </span>) </span>{
		<span class="hljs-keyword">var</span> $message = $( <span class="hljs-string">'.theme-install[data-slug="'</span> + args.slug + <span class="hljs-string">'"]'</span> );

		args = _.extend( {
			<span class="hljs-attr">success</span>: wp.updates.installThemeSuccess,
			<span class="hljs-attr">error</span>: wp.updates.installThemeError
		}, args );

		$message.addClass( <span class="hljs-string">'updating-message'</span> );
		$message.parents( <span class="hljs-string">'.theme'</span> ).addClass( <span class="hljs-string">'focus'</span> );
		<span class="hljs-keyword">if</span> ( $message.html() !== wp.updates.l10n.installing ) {
			$message.data( <span class="hljs-string">'originaltext'</span>, $message.html() );
		}

		$message
			.text( wp.updates.l10n.installing )
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.themeInstallingLabel.replace( <span class="hljs-string">'%s'</span>, $message.data( <span class="hljs-string">'name'</span> ) ) );
		wp.a11y.speak( wp.updates.l10n.installingMsg, <span class="hljs-string">'polite'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Remove previous error messages, if any.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$( <span class="hljs-string">'.install-theme-info, [data-slug="'</span> + args.slug + <span class="hljs-string">'"]'</span> ).removeClass( <span class="hljs-string">'theme-install-failed'</span> ).find( <span class="hljs-string">'.notice.notice-error'</span> ).remove();

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-installing'</span>, args );

		<span class="hljs-keyword">return</span> wp.updates.ajax( <span class="hljs-string">'install-theme'</span>, args );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a successful theme install.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} installThemeSuccess
	 * @param {object} response              Response from the server.
	 * @param {string} response.slug         Slug of the theme to be installed.
	 * @param {string} response.customizeUrl URL to the Customizer for the just installed theme.
	 * @param {string} response.activateUrl  URL to activate the just installed theme.
	 */</span>
	wp.updates.installThemeSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $card = $( <span class="hljs-string">'.wp-full-overlay-header, [data-slug='</span> + response.slug + <span class="hljs-string">']'</span> ),
			$message;

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-install-success'</span>, response );

		$message = $card.find( <span class="hljs-string">'.button-primary'</span> )
			.removeClass( <span class="hljs-string">'updating-message'</span> )
			.addClass( <span class="hljs-string">'updated-message disabled'</span> )
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.themeInstalledLabel.replace( <span class="hljs-string">'%s'</span>, response.themeName ) )
			.text( wp.updates.l10n.themeInstalled );

		wp.a11y.speak( wp.updates.l10n.installedMsg, <span class="hljs-string">'polite'</span> );

		setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

			<span class="hljs-keyword">if</span> ( response.activateUrl ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Transform the Install button into an Activate button.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$message
					.attr( <span class="hljs-string">'href'</span>, response.activateUrl )
					.removeClass( <span class="hljs-string">'theme-install updated-message disabled'</span> )
					.addClass( <span class="hljs-string">'activate'</span> )
					.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.activateThemeLabel.replace( <span class="hljs-string">'%s'</span>, response.themeName ) )
					.text( wp.updates.l10n.activateTheme );
			}

			<span class="hljs-keyword">if</span> ( response.customizeUrl ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Transform the Preview button into a Live Preview button.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$message.siblings( <span class="hljs-string">'.preview'</span> ).replaceWith( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">return</span> $( <span class="hljs-string">'&lt;a&gt;'</span> )
						.attr( <span class="hljs-string">'href'</span>, response.customizeUrl )
						.addClass( <span class="hljs-string">'button load-customize'</span> )
						.text( wp.updates.l10n.livePreview );
				} );
			}
		}, <span class="hljs-number">1000</span> );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a failed theme install.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} installThemeError
	 * @param {object} response              Response from the server.
	 * @param {string} response.slug         Slug of the theme to be installed.
	 * @param {string} response.errorCode    Error code for the error that occurred.
	 * @param {string} response.errorMessage The error that occurred.
	 */</span>
	wp.updates.installThemeError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $card, $button,
			errorMessage = wp.updates.l10n.installFailed.replace( <span class="hljs-string">'%s'</span>, response.errorMessage ),
			$message     = wp.updates.adminNotice( {
				<span class="hljs-attr">className</span>: <span class="hljs-string">'update-message notice-error notice-alt'</span>,
				<span class="hljs-attr">message</span>:   errorMessage
			} );

		<span class="hljs-keyword">if</span> ( ! wp.updates.isValidResponse( response, <span class="hljs-string">'install'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( wp.updates.maybeHandleCredentialError( response, <span class="hljs-string">'install-theme'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( $<span class="hljs-built_in">document</span>.find( <span class="hljs-string">'body'</span> ).hasClass( <span class="hljs-string">'full-overlay-active'</span> ) ) {
			$button = $( <span class="hljs-string">'.theme-install[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> );
			$card   = $( <span class="hljs-string">'.install-theme-info'</span> ).prepend( $message );
		} <span class="hljs-keyword">else</span> {
			$card   = $( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> ).removeClass( <span class="hljs-string">'focus'</span> ).addClass( <span class="hljs-string">'theme-install-failed'</span> ).append( $message );
			$button = $card.find( <span class="hljs-string">'.theme-install'</span> );
		}

		$button
			.removeClass( <span class="hljs-string">'updating-message'</span> )
			.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.themeInstallFailedLabel.replace( <span class="hljs-string">'%s'</span>, $button.data( <span class="hljs-string">'name'</span> ) ) )
			.text( wp.updates.l10n.installFailedShort );

		wp.a11y.speak( errorMessage, <span class="hljs-string">'assertive'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-install-error'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Sends an Ajax request to the server to delete a theme.
	 *
	 * @since 4.6.0
	 *
	 * @param {object}              args
	 * @param {string}              args.slug    Theme stylesheet.
	 * @param {deleteThemeSuccess=} args.success Optional. Success callback. Default: wp.updates.deleteThemeSuccess
	 * @param {deleteThemeError=}   args.error   Optional. Error callback. Default: wp.updates.deleteThemeError
	 * @return {$.promise} A jQuery promise that represents the request,
	 *                     decorated with an abort() method.
	 */</span>
	wp.updates.deleteTheme = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> args </span>) </span>{
		<span class="hljs-keyword">var</span> $button;

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes'</span> === pagenow ) {
			$button = $( <span class="hljs-string">'.theme-actions .delete-theme'</span> );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes-network'</span> === pagenow ) {
			$button = $( <span class="hljs-string">'[data-slug="'</span> + args.slug + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.row-actions a.delete'</span> );
		}

		args = _.extend( {
			<span class="hljs-attr">success</span>: wp.updates.deleteThemeSuccess,
			<span class="hljs-attr">error</span>: wp.updates.deleteThemeError
		}, args );

		<span class="hljs-keyword">if</span> ( $button &amp;&amp; $button.html() !== wp.updates.l10n.deleting ) {
			$button
				.data( <span class="hljs-string">'originaltext'</span>, $button.html() )
				.text( wp.updates.l10n.deleting );
		}

		wp.a11y.speak( wp.updates.l10n.deleting, <span class="hljs-string">'polite'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Remove previous error messages, if any.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$( <span class="hljs-string">'.theme-info .update-message'</span> ).remove();

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-deleting'</span>, args );

		<span class="hljs-keyword">return</span> wp.updates.ajax( <span class="hljs-string">'delete-theme'</span>, args );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a successful theme deletion.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} deleteThemeSuccess
	 * @param {object} response      Response from the server.
	 * @param {string} response.slug Slug of the theme that was deleted.
	 */</span>
	wp.updates.deleteThemeSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $themeRows = $( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> );

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes-network'</span> === pagenow ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Removes the theme and updates rows.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$themeRows.css( { <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#faafaa'</span> } ).fadeOut( <span class="hljs-number">350</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $views     = $( <span class="hljs-string">'.subsubsub'</span> ),
					$themeRow  = $( <span class="hljs-keyword">this</span> ),
					totals     = settings.themes,
					deletedRow = wp.template( <span class="hljs-string">'item-deleted-row'</span> );

				<span class="hljs-keyword">if</span> ( ! $themeRow.hasClass( <span class="hljs-string">'plugin-update-tr'</span> ) ) {
					$themeRow.after(
						deletedRow( {
							<span class="hljs-attr">slug</span>:    response.slug,
							<span class="hljs-attr">colspan</span>: $( <span class="hljs-string">'#bulk-action-form'</span> ).find( <span class="hljs-string">'thead th:not(.hidden), thead td'</span> ).length,
							<span class="hljs-attr">name</span>:    $themeRow.find( <span class="hljs-string">'.theme-title strong'</span> ).text()
						} )
					);
				}

				$themeRow.remove();</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Remove theme from update count.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( $themeRow.hasClass( <span class="hljs-string">'update'</span> ) ) {
					totals.upgrade--;
					wp.updates.decrementCount( <span class="hljs-string">'theme'</span> );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Remove from views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( $themeRow.hasClass( <span class="hljs-string">'inactive'</span> ) ) {
					totals.disabled--;
					<span class="hljs-keyword">if</span> ( totals.disabled ) {
						$views.find( <span class="hljs-string">'.disabled .count'</span> ).text( <span class="hljs-string">'('</span> + totals.disabled + <span class="hljs-string">')'</span> );
					} <span class="hljs-keyword">else</span> {
						$views.find( <span class="hljs-string">'.disabled'</span> ).remove();
					}
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>There is always at least one theme available.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$views.find( <span class="hljs-string">'.all .count'</span> ).text( <span class="hljs-string">'('</span> + --totals.all + <span class="hljs-string">')'</span> );
			} );
		}

		wp.a11y.speak( wp.updates.l10n.themeDeleted, <span class="hljs-string">'polite'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-delete-success'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Updates the UI appropriately after a failed theme deletion.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} deleteThemeError
	 * @param {object} response              Response from the server.
	 * @param {string} response.slug         Slug of the theme to be deleted.
	 * @param {string} response.errorCode    Error code for the error that occurred.
	 * @param {string} response.errorMessage The error that occurred.
	 */</span>
	wp.updates.deleteThemeError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
		<span class="hljs-keyword">var</span> $themeRow    = $( <span class="hljs-string">'tr.inactive[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> ),
			$button      = $( <span class="hljs-string">'.theme-actions .delete-theme'</span> ),
			updateRow    = wp.template( <span class="hljs-string">'item-update-row'</span> ),
			$updateRow   = $themeRow.siblings( <span class="hljs-string">'#'</span> + response.slug + <span class="hljs-string">'-update'</span> ),
			errorMessage = wp.updates.l10n.deleteFailed.replace( <span class="hljs-string">'%s'</span>, response.errorMessage ),
			$message     = wp.updates.adminNotice( {
				<span class="hljs-attr">className</span>: <span class="hljs-string">'update-message notice-error notice-alt'</span>,
				<span class="hljs-attr">message</span>:   errorMessage
			} );

		<span class="hljs-keyword">if</span> ( wp.updates.maybeHandleCredentialError( response, <span class="hljs-string">'delete-theme'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes-network'</span> === pagenow ) {
			<span class="hljs-keyword">if</span> ( ! $updateRow.length ) {
				$themeRow.addClass( <span class="hljs-string">'update'</span> ).after(
					updateRow( {
						<span class="hljs-attr">slug</span>: response.slug,
						<span class="hljs-attr">colspan</span>: $( <span class="hljs-string">'#bulk-action-form'</span> ).find( <span class="hljs-string">'thead th:not(.hidden), thead td'</span> ).length,
						<span class="hljs-attr">content</span>: $message
					} )
				);
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Remove previous error messages, if any.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$updateRow.find( <span class="hljs-string">'.notice-error'</span> ).remove();
				$updateRow.find( <span class="hljs-string">'.plugin-update'</span> ).append( $message );
			}
		} <span class="hljs-keyword">else</span> {
			$( <span class="hljs-string">'.theme-info .theme-description'</span> ).before( $message );
		}

		$button.html( $button.data( <span class="hljs-string">'originaltext'</span> ) );

		wp.a11y.speak( errorMessage, <span class="hljs-string">'assertive'</span> );

		$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-theme-delete-error'</span>, response );
	};

	<span class="hljs-comment">/**
	 * Adds the appropriate callback based on the type of action and the current page.
	 *
	 * @since 4.6.0
	 * @private
	 *
	 * @param {object} data   AJAX payload.
	 * @param {string} action The type of request to perform.
	 * @return {object} The AJAX payload with the appropriate callbacks.
	 */</span>
	wp.updates._addCallbacks = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data, action </span>) </span>{
		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'import'</span> === pagenow &amp;&amp; <span class="hljs-string">'install-plugin'</span> === action ) {
			data.success = wp.updates.installImporterSuccess;
			data.error   = wp.updates.installImporterError;
		}

		<span class="hljs-keyword">return</span> data;
	};

	<span class="hljs-comment">/**
	 * Pulls available jobs from the queue and runs them.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 Can handle multiple job types.
	 */</span>
	wp.updates.queueChecker = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> job;

		<span class="hljs-keyword">if</span> ( wp.updates.ajaxLocked || ! wp.updates.queue.length ) {
			<span class="hljs-keyword">return</span>;
		}

		job = wp.updates.queue.shift();</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Handle a queue job.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">switch</span> ( job.action ) {
			<span class="hljs-keyword">case</span> <span class="hljs-string">'install-plugin'</span>:
				wp.updates.installPlugin( job.data );
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">case</span> <span class="hljs-string">'update-plugin'</span>:
				wp.updates.updatePlugin( job.data );
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">case</span> <span class="hljs-string">'delete-plugin'</span>:
				wp.updates.deletePlugin( job.data );
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">case</span> <span class="hljs-string">'install-theme'</span>:
				wp.updates.installTheme( job.data );
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">case</span> <span class="hljs-string">'update-theme'</span>:
				wp.updates.updateTheme( job.data );
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">case</span> <span class="hljs-string">'delete-theme'</span>:
				wp.updates.deleteTheme( job.data );
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">default</span>:
				<span class="hljs-keyword">break</span>;
		}
	};

	<span class="hljs-comment">/**
	 * Requests the users filesystem credentials if they aren't already known.
	 *
	 * @since 4.2.0
	 *
	 * @param {Event=} event Optional. Event interface.
	 */</span>
	wp.updates.requestFilesystemCredentials = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
		<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === wp.updates.filesystemCredentials.available ) {
			<span class="hljs-comment">/*
			 * After exiting the credentials request modal,
			 * return the focus to the element triggering the request.
			 */</span>
			<span class="hljs-keyword">if</span> ( event &amp;&amp; ! wp.updates.$elToReturnFocusToFromCredentialsModal ) {
				wp.updates.$elToReturnFocusToFromCredentialsModal = $( event.target );
			}

			wp.updates.ajaxLocked = <span class="hljs-literal">true</span>;
			wp.updates.requestForCredentialsModalOpen();
		}
	};

	<span class="hljs-comment">/**
	 * Requests the users filesystem credentials if needed and there is no lock.
	 *
	 * @since 4.6.0
	 *
	 * @param {Event=} event Optional. Event interface.
	 */</span>
	wp.updates.maybeRequestFilesystemCredentials = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
		<span class="hljs-keyword">if</span> ( wp.updates.shouldRequestFilesystemCredentials &amp;&amp; ! wp.updates.ajaxLocked ) {
			wp.updates.requestFilesystemCredentials( event );
		}
	};

	<span class="hljs-comment">/**
	 * Keydown handler for the request for credentials modal.
	 *
	 * Closes the modal when the escape key is pressed and
	 * constrains keyboard navigation to inside the modal.
	 *
	 * @since 4.2.0
	 *
	 * @param {Event} event Event interface.
	 */</span>
	wp.updates.keydown = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
		<span class="hljs-keyword">if</span> ( <span class="hljs-number">27</span> === event.keyCode ) {
			wp.updates.requestForCredentialsModalCancel();
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-number">9</span> === event.keyCode ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>#upgrade button must always be the last focus-able element in the dialog.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'upgrade'</span> === event.target.id &amp;&amp; ! event.shiftKey ) {
				$( <span class="hljs-string">'#hostname'</span> ).focus();

				event.preventDefault();
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'hostname'</span> === event.target.id &amp;&amp; event.shiftKey ) {
				$( <span class="hljs-string">'#upgrade'</span> ).focus();

				event.preventDefault();
			}
		}
	};

	<span class="hljs-comment">/**
	 * Opens the request for credentials modal.
	 *
	 * @since 4.2.0
	 */</span>
	wp.updates.requestForCredentialsModalOpen = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> $modal = $( <span class="hljs-string">'#request-filesystem-credentials-dialog'</span> );

		$( <span class="hljs-string">'body'</span> ).addClass( <span class="hljs-string">'modal-open'</span> );
		$modal.show();
		$modal.find( <span class="hljs-string">'input:enabled:first'</span> ).focus();
		$modal.on( <span class="hljs-string">'keydown'</span>, wp.updates.keydown );
	};

	<span class="hljs-comment">/**
	 * Closes the request for credentials modal.
	 *
	 * @since 4.2.0
	 */</span>
	wp.updates.requestForCredentialsModalClose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		$( <span class="hljs-string">'#request-filesystem-credentials-dialog'</span> ).hide();
		$( <span class="hljs-string">'body'</span> ).removeClass( <span class="hljs-string">'modal-open'</span> );

		<span class="hljs-keyword">if</span> ( wp.updates.$elToReturnFocusToFromCredentialsModal ) {
			wp.updates.$elToReturnFocusToFromCredentialsModal.focus();
		}
	};

	<span class="hljs-comment">/**
	 * Takes care of the steps that need to happen when the modal is canceled out.
	 *
	 * @since 4.2.0
	 * @since 4.6.0 Triggers an event for callbacks to listen to and add their actions.
	 */</span>
	wp.updates.requestForCredentialsModalCancel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Not ajaxLocked and no queue means we already have cleared things up.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! wp.updates.ajaxLocked &amp;&amp; ! wp.updates.queue.length ) {
			<span class="hljs-keyword">return</span>;
		}

		_.each( wp.updates.queue, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> job </span>) </span>{
			$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'credential-modal-cancel'</span>, job );
		} );</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Remove the lock, and clear the queue.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		wp.updates.ajaxLocked = <span class="hljs-literal">false</span>;
		wp.updates.queue = [];

		wp.updates.requestForCredentialsModalClose();
	};

	<span class="hljs-comment">/**
	 * Displays an error message in the request for credentials form.
	 *
	 * @since 4.2.0
	 *
	 * @param {string} message Error message.
	 */</span>
	wp.updates.showErrorInCredentialsForm = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> message </span>) </span>{
		<span class="hljs-keyword">var</span> $filesystemForm = $( <span class="hljs-string">'#request-filesystem-credentials-form'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Remove any existing error.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$filesystemForm.find( <span class="hljs-string">'.notice'</span> ).remove();
		$filesystemForm.find( <span class="hljs-string">'#request-filesystem-credentials-title'</span> ).after( <span class="hljs-string">'&lt;div class="notice notice-alt notice-error"&gt;&lt;p&gt;'</span> + message + <span class="hljs-string">'&lt;/p&gt;&lt;/div&gt;'</span> );
	};

	<span class="hljs-comment">/**
	 * Handles credential errors and runs events that need to happen in that case.
	 *
	 * @since 4.2.0
	 *
	 * @param {object} response Ajax response.
	 * @param {string} action   The type of request to perform.
	 */</span>
	wp.updates.credentialError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response, action </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Restore callbacks.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		response = wp.updates._addCallbacks( response, action );

		wp.updates.queue.unshift( {
			<span class="hljs-attr">action</span>: action,

			<span class="hljs-comment">/*
			 * Not cool that we're depending on response for this data.
			 * This would feel more whole in a view all tied together.
			 */</span>
			data: response
		} );

		wp.updates.filesystemCredentials.available = <span class="hljs-literal">false</span>;
		wp.updates.showErrorInCredentialsForm( response.errorMessage );
		wp.updates.requestFilesystemCredentials();
	};

	<span class="hljs-comment">/**
	 * Handles credentials errors if it could not connect to the filesystem.
	 *
	 * @since 4.6.0
	 *
	 * @typedef {object} maybeHandleCredentialError
	 * @param {object} response              Response from the server.
	 * @param {string} response.errorCode    Error code for the error that occurred.
	 * @param {string} response.errorMessage The error that occurred.
	 * @param {string} action                The type of request to perform.
	 * @returns {boolean} Whether there is an error that needs to be handled or not.
	 */</span>
	wp.updates.maybeHandleCredentialError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response, action </span>) </span>{
		<span class="hljs-keyword">if</span> ( wp.updates.shouldRequestFilesystemCredentials &amp;&amp; response.errorCode &amp;&amp; <span class="hljs-string">'unable_to_connect_to_filesystem'</span> === response.errorCode ) {
			wp.updates.credentialError( response, action );
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	};

	<span class="hljs-comment">/**
	 * Validates an AJAX response to ensure it's a proper object.
	 *
	 * If the response deems to be invalid, an admin notice is being displayed.
	 *
	 * @param {(object|string)} response              Response from the server.
	 * @param {function=}       response.always       Optional. Callback for when the Deferred is resolved or rejected.
	 * @param {string=}         response.statusText   Optional. Status message corresponding to the status code.
	 * @param {string=}         response.responseText Optional. Request response as text.
	 * @param {string}          action                Type of action the response is referring to. Can be 'delete',
	 *                                                'update' or 'install'.
	 */</span>
	wp.updates.isValidResponse = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response, action </span>) </span>{
		<span class="hljs-keyword">var</span> error = wp.updates.l10n.unknownError,
		    errorMessage;</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Make sure the response is a valid data object and not a Promise object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( _.isObject( response ) &amp;&amp; ! _.isFunction( response.always ) ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}

		<span class="hljs-keyword">if</span> ( _.isString( response ) &amp;&amp; <span class="hljs-string">'-1'</span> === response ) {
			error = wp.updates.l10n.nonceError;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( _.isString( response ) ) {
			error = response;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> response.readyState &amp;&amp; <span class="hljs-number">0</span> === response.readyState ) {
			error = wp.updates.l10n.connectionError;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( _.isString( response.responseText ) &amp;&amp; <span class="hljs-string">''</span> !== response.responseText ) {
			error = response.responseText;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( _.isString( response.statusText ) ) {
			error = response.statusText;
		}

		<span class="hljs-keyword">switch</span> ( action ) {
			<span class="hljs-keyword">case</span> <span class="hljs-string">'update'</span>:
				errorMessage = wp.updates.l10n.updateFailed;
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">case</span> <span class="hljs-string">'install'</span>:
				errorMessage = wp.updates.l10n.installFailed;
				<span class="hljs-keyword">break</span>;

			<span class="hljs-keyword">case</span> <span class="hljs-string">'delete'</span>:
				errorMessage = wp.updates.l10n.deleteFailed;
				<span class="hljs-keyword">break</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Messages are escaped, remove HTML tags to make them more readable.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		error = error.replace( <span class="hljs-regexp">/&lt;[\/a-z][^&lt;&gt;]*&gt;/gi</span>, <span class="hljs-string">''</span> );
		errorMessage = errorMessage.replace( <span class="hljs-string">'%s'</span>, error );</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Add admin notice.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		wp.updates.addAdminNotice( {
			<span class="hljs-attr">id</span>:        <span class="hljs-string">'unknown_error'</span>,
			<span class="hljs-attr">className</span>: <span class="hljs-string">'notice-error is-dismissible'</span>,
			<span class="hljs-attr">message</span>:   _.escape( errorMessage )
		} );</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Remove the lock, and clear the queue.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		wp.updates.ajaxLocked = <span class="hljs-literal">false</span>;
		wp.updates.queue      = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Change buttons of all running updates.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$( <span class="hljs-string">'.button.updating-message'</span> )
			.removeClass( <span class="hljs-string">'updating-message'</span> )
			.removeAttr( <span class="hljs-string">'aria-label'</span> )
			.prop( <span class="hljs-string">'disabled'</span>, <span class="hljs-literal">true</span> )
			.text( wp.updates.l10n.updateFailedShort );

		$( <span class="hljs-string">'.updating-message:not(.button):not(.thickbox)'</span> )
			.removeClass( <span class="hljs-string">'updating-message notice-warning'</span> )
			.addClass( <span class="hljs-string">'notice-error'</span> )
			.find( <span class="hljs-string">'p'</span> )
				.removeAttr( <span class="hljs-string">'aria-label'</span> )
				.text( errorMessage );

		wp.a11y.speak( errorMessage, <span class="hljs-string">'assertive'</span> );

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	};

	<span class="hljs-comment">/**
	 * Potentially adds an AYS to a user attempting to leave the page.
	 *
	 * If an update is on-going and a user attempts to leave the page,
	 * opens an "Are you sure?" alert.
	 *
	 * @since 4.2.0
	 */</span>
	wp.updates.beforeunload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">if</span> ( wp.updates.ajaxLocked ) {
			<span class="hljs-keyword">return</span> wp.updates.l10n.beforeunload;
		}
	};

	$( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> $pluginFilter        = $( <span class="hljs-string">'#plugin-filter'</span> ),
			$bulkActionForm      = $( <span class="hljs-string">'#bulk-action-form'</span> ),
			$filesystemForm      = $( <span class="hljs-string">'#request-filesystem-credentials-form'</span> ),
			$filesystemModal     = $( <span class="hljs-string">'#request-filesystem-credentials-dialog'</span> ),
			$pluginSearch        = $( <span class="hljs-string">'.plugins-php .wp-filter-search'</span> ),
			$pluginInstallSearch = $( <span class="hljs-string">'.plugin-install-php .wp-filter-search'</span> );

		settings = _.extend( settings, <span class="hljs-built_in">window</span>._wpUpdatesItemCounts || {} );

		<span class="hljs-keyword">if</span> ( settings.totals ) {
			wp.updates.refreshCount();
		}

		<span class="hljs-comment">/*
		 * Whether a user needs to submit filesystem credentials.
		 *
		 * This is based on whether the form was output on the page server-side.
		 *
		 * @see {wp_print_request_filesystem_credentials_modal() in PHP}
		 */</span>
		wp.updates.shouldRequestFilesystemCredentials = $filesystemModal.length &gt; <span class="hljs-number">0</span>;

		<span class="hljs-comment">/**
		 * File system credentials form submit noop-er / handler.
		 *
		 * @since 4.2.0
		 */</span>
		$filesystemModal.on( <span class="hljs-string">'submit'</span>, <span class="hljs-string">'form'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			event.preventDefault();</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Persist the credentials input by the user for the duration of the page load.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			wp.updates.filesystemCredentials.ftp.hostname       = $( <span class="hljs-string">'#hostname'</span> ).val();
			wp.updates.filesystemCredentials.ftp.username       = $( <span class="hljs-string">'#username'</span> ).val();
			wp.updates.filesystemCredentials.ftp.password       = $( <span class="hljs-string">'#password'</span> ).val();
			wp.updates.filesystemCredentials.ftp.connectionType = $( <span class="hljs-string">'input[name="connection_type"]:checked'</span> ).val();
			wp.updates.filesystemCredentials.ssh.publicKey      = $( <span class="hljs-string">'#public_key'</span> ).val();
			wp.updates.filesystemCredentials.ssh.privateKey     = $( <span class="hljs-string">'#private_key'</span> ).val();
			wp.updates.filesystemCredentials.fsNonce            = $( <span class="hljs-string">'#_fs_nonce'</span> ).val();
			wp.updates.filesystemCredentials.available          = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Unlock and invoke the queue.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			wp.updates.ajaxLocked = <span class="hljs-literal">false</span>;
			wp.updates.queueChecker();

			wp.updates.requestForCredentialsModalClose();
		} );

		<span class="hljs-comment">/**
		 * Closes the request credentials modal when clicking the 'Cancel' button or outside of the modal.
		 *
		 * @since 4.2.0
		 */</span>
		$filesystemModal.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'[data-js-action="close"], .notification-dialog-background'</span>, wp.updates.requestForCredentialsModalCancel );

		<span class="hljs-comment">/**
		 * Hide SSH fields when not selected.
		 *
		 * @since 4.2.0
		 */</span>
		$filesystemForm.on( <span class="hljs-string">'change'</span>, <span class="hljs-string">'input[name="connection_type"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'#ssh-keys'</span> ).toggleClass( <span class="hljs-string">'hidden'</span>, ( <span class="hljs-string">'ssh'</span> !== $( <span class="hljs-keyword">this</span> ).val() ) );
		} ).change();

		<span class="hljs-comment">/**
		 * Handles events after the credential modal was closed.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event}  event Event interface.
		 * @param {string} job   The install/update.delete request.
		 */</span>
		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'credential-modal-cancel'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, job </span>) </span>{
			<span class="hljs-keyword">var</span> $updatingMessage = $( <span class="hljs-string">'.updating-message'</span> ),
				$message, originalText;

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'import'</span> === pagenow ) {
				$updatingMessage.removeClass( <span class="hljs-string">'updating-message'</span> );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugins'</span> === pagenow || <span class="hljs-string">'plugins-network'</span> === pagenow ) {
				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'update-plugin'</span> === job.action ) {
					$message = $( <span class="hljs-string">'tr[data-plugin="'</span> + job.data.plugin + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.update-message'</span> );
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'delete-plugin'</span> === job.action ) {
					$message = $( <span class="hljs-string">'[data-plugin="'</span> + job.data.plugin + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.row-actions a.delete'</span> );
				}
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'themes'</span> === pagenow || <span class="hljs-string">'themes-network'</span> === pagenow ) {
				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'update-theme'</span> === job.action ) {
					$message = $( <span class="hljs-string">'[data-slug="'</span> + job.data.slug + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.update-message'</span> );
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'delete-theme'</span> === job.action &amp;&amp; <span class="hljs-string">'themes-network'</span> === pagenow ) {
					$message = $( <span class="hljs-string">'[data-slug="'</span> + job.data.slug + <span class="hljs-string">'"]'</span> ).find( <span class="hljs-string">'.row-actions a.delete'</span> );
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'delete-theme'</span> === job.action &amp;&amp; <span class="hljs-string">'themes'</span> === pagenow ) {
					$message = $( <span class="hljs-string">'.theme-actions .delete-theme'</span> );
				}
			} <span class="hljs-keyword">else</span> {
				$message = $updatingMessage;
			}

			<span class="hljs-keyword">if</span> ( $message &amp;&amp; $message.hasClass( <span class="hljs-string">'updating-message'</span> ) ) {
				originalText = $message.data( <span class="hljs-string">'originaltext'</span> );

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> originalText ) {
					originalText = $( <span class="hljs-string">'&lt;p&gt;'</span> ).html( $message.find( <span class="hljs-string">'p'</span> ).data( <span class="hljs-string">'originaltext'</span> ) );
				}

				$message
					.removeClass( <span class="hljs-string">'updating-message'</span> )
					.html( originalText );

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'plugin-install'</span> === pagenow || <span class="hljs-string">'plugin-install-network'</span> === pagenow ) {
					<span class="hljs-keyword">if</span> ( <span class="hljs-string">'update-plugin'</span> === job.action ) {
						$message.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginUpdateNowLabel.replace( <span class="hljs-string">'%s'</span>, $message.data( <span class="hljs-string">'name'</span> ) ) );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'install-plugin'</span> === job.action ) {
						$message.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.pluginInstallNowLabel.replace( <span class="hljs-string">'%s'</span>, $message.data( <span class="hljs-string">'name'</span> ) ) );
					}
				}
			}

			wp.a11y.speak( wp.updates.l10n.updateCancel, <span class="hljs-string">'polite'</span> );
		} );

		<span class="hljs-comment">/**
		 * Click handler for plugin updates in List Table view.
		 *
		 * @since 4.2.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$bulkActionForm.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'[data-plugin] .update-link'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $message   = $( event.target ),
				$pluginRow = $message.parents( <span class="hljs-string">'tr'</span> );

			event.preventDefault();

			<span class="hljs-keyword">if</span> ( $message.hasClass( <span class="hljs-string">'updating-message'</span> ) || $message.hasClass( <span class="hljs-string">'button-disabled'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			wp.updates.maybeRequestFilesystemCredentials( event );</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Return the user to the input box of the plugins table row after closing the modal.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			wp.updates.$elToReturnFocusToFromCredentialsModal = $pluginRow.find( <span class="hljs-string">'.check-column input'</span> );
			wp.updates.updatePlugin( {
				<span class="hljs-attr">plugin</span>: $pluginRow.data( <span class="hljs-string">'plugin'</span> ),
				<span class="hljs-attr">slug</span>:   $pluginRow.data( <span class="hljs-string">'slug'</span> )
			} );
		} );

		<span class="hljs-comment">/**
		 * Click handler for plugin updates in plugin install view.
		 *
		 * @since 4.2.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$pluginFilter.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.update-now'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $button = $( event.target );
			event.preventDefault();

			<span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'updating-message'</span> ) || $button.hasClass( <span class="hljs-string">'button-disabled'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			wp.updates.maybeRequestFilesystemCredentials( event );

			wp.updates.updatePlugin( {
				<span class="hljs-attr">plugin</span>: $button.data( <span class="hljs-string">'plugin'</span> ),
				<span class="hljs-attr">slug</span>:   $button.data( <span class="hljs-string">'slug'</span> )
			} );
		} );

		<span class="hljs-comment">/**
		 * Click handler for plugin installs in plugin install view.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$pluginFilter.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.install-now'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $button = $( event.target );
			event.preventDefault();

			<span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'updating-message'</span> ) || $button.hasClass( <span class="hljs-string">'button-disabled'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( wp.updates.shouldRequestFilesystemCredentials &amp;&amp; ! wp.updates.ajaxLocked ) {
				wp.updates.requestFilesystemCredentials( event );

				$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'credential-modal-cancel'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> $message = $( <span class="hljs-string">'.install-now.updating-message'</span> );

					$message
						.removeClass( <span class="hljs-string">'updating-message'</span> )
						.text( wp.updates.l10n.installNow );

					wp.a11y.speak( wp.updates.l10n.updateCancel, <span class="hljs-string">'polite'</span> );
				} );
			}

			wp.updates.installPlugin( {
				<span class="hljs-attr">slug</span>: $button.data( <span class="hljs-string">'slug'</span> )
			} );
		} );

		<span class="hljs-comment">/**
		 * Click handler for importer plugins installs in the Import screen.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.importer-item .install-now'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $button = $( event.target ),
				pluginName = $( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">'name'</span> );

			event.preventDefault();

			<span class="hljs-keyword">if</span> ( $button.hasClass( <span class="hljs-string">'updating-message'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( wp.updates.shouldRequestFilesystemCredentials &amp;&amp; ! wp.updates.ajaxLocked ) {
				wp.updates.requestFilesystemCredentials( event );

				$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'credential-modal-cancel'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

					$button
						.removeClass( <span class="hljs-string">'updating-message'</span> )
						.text( wp.updates.l10n.installNow )
						.attr( <span class="hljs-string">'aria-label'</span>, wp.updates.l10n.installNowLabel.replace( <span class="hljs-string">'%s'</span>, pluginName ) );

					wp.a11y.speak( wp.updates.l10n.updateCancel, <span class="hljs-string">'polite'</span> );
				} );
			}

			wp.updates.installPlugin( {
				<span class="hljs-attr">slug</span>:    $button.data( <span class="hljs-string">'slug'</span> ),
				<span class="hljs-attr">pagenow</span>: pagenow,
				<span class="hljs-attr">success</span>: wp.updates.installImporterSuccess,
				<span class="hljs-attr">error</span>:   wp.updates.installImporterError
			} );
		} );

		<span class="hljs-comment">/**
		 * Click handler for plugin deletions.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$bulkActionForm.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'[data-plugin] a.delete'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $pluginRow = $( event.target ).parents( <span class="hljs-string">'tr'</span> );

			event.preventDefault();

			<span class="hljs-keyword">if</span> ( ! <span class="hljs-built_in">window</span>.confirm( wp.updates.l10n.aysDeleteUninstall.replace( <span class="hljs-string">'%s'</span>, $pluginRow.find( <span class="hljs-string">'.plugin-title strong'</span> ).text() ) ) ) {
				<span class="hljs-keyword">return</span>;
			}

			wp.updates.maybeRequestFilesystemCredentials( event );

			wp.updates.deletePlugin( {
				<span class="hljs-attr">plugin</span>: $pluginRow.data( <span class="hljs-string">'plugin'</span> ),
				<span class="hljs-attr">slug</span>:   $pluginRow.data( <span class="hljs-string">'slug'</span> )
			} );

		} );

		<span class="hljs-comment">/**
		 * Click handler for theme updates.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.themes-php.network-admin .update-link'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $message  = $( event.target ),
				$themeRow = $message.parents( <span class="hljs-string">'tr'</span> );

			event.preventDefault();

			<span class="hljs-keyword">if</span> ( $message.hasClass( <span class="hljs-string">'updating-message'</span> ) || $message.hasClass( <span class="hljs-string">'button-disabled'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			wp.updates.maybeRequestFilesystemCredentials( event );</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Return the user to the input box of the themes table row after closing the modal.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			wp.updates.$elToReturnFocusToFromCredentialsModal = $themeRow.find( <span class="hljs-string">'.check-column input'</span> );
			wp.updates.updateTheme( {
				<span class="hljs-attr">slug</span>: $themeRow.data( <span class="hljs-string">'slug'</span> )
			} );
		} );

		<span class="hljs-comment">/**
		 * Click handler for theme deletions.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.themes-php.network-admin a.delete'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $themeRow = $( event.target ).parents( <span class="hljs-string">'tr'</span> );

			event.preventDefault();

			<span class="hljs-keyword">if</span> ( ! <span class="hljs-built_in">window</span>.confirm( wp.updates.l10n.aysDelete.replace( <span class="hljs-string">'%s'</span>, $themeRow.find( <span class="hljs-string">'.theme-title strong'</span> ).text() ) ) ) {
				<span class="hljs-keyword">return</span>;
			}

			wp.updates.maybeRequestFilesystemCredentials( event );

			wp.updates.deleteTheme( {
				<span class="hljs-attr">slug</span>: $themeRow.data( <span class="hljs-string">'slug'</span> )
			} );
		} );

		<span class="hljs-comment">/**
		 * Bulk action handler for plugins and themes.
		 *
		 * Handles both deletions and updates.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$bulkActionForm.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'[type="submit"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> bulkAction    = $( event.target ).siblings( <span class="hljs-string">'select'</span> ).val(),
				itemsSelected = $bulkActionForm.find( <span class="hljs-string">'input[name="checked[]"]:checked'</span> ),
				success       = <span class="hljs-number">0</span>,
				error         = <span class="hljs-number">0</span>,
				errorMessages = [],
				type, action;</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Determine which type of item were dealing with.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">switch</span> ( pagenow ) {
				<span class="hljs-keyword">case</span> <span class="hljs-string">'plugins'</span>:
				<span class="hljs-keyword">case</span> <span class="hljs-string">'plugins-network'</span>:
					type = <span class="hljs-string">'plugin'</span>;
					<span class="hljs-keyword">break</span>;

				<span class="hljs-keyword">case</span> <span class="hljs-string">'themes-network'</span>:
					type = <span class="hljs-string">'theme'</span>;
					<span class="hljs-keyword">break</span>;

				<span class="hljs-keyword">default</span>:
					<span class="hljs-keyword">return</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Bail if there were no items selected.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( ! itemsSelected.length ) {
				event.preventDefault();
				$( <span class="hljs-string">'html, body'</span> ).animate( { <span class="hljs-attr">scrollTop</span>: <span class="hljs-number">0</span> } );

				<span class="hljs-keyword">return</span> wp.updates.addAdminNotice( {
					<span class="hljs-attr">id</span>:        <span class="hljs-string">'no-items-selected'</span>,
					<span class="hljs-attr">className</span>: <span class="hljs-string">'notice-error is-dismissible'</span>,
					<span class="hljs-attr">message</span>:   wp.updates.l10n.noItemsSelected
				} );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Determine the type of request were dealing with.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">switch</span> ( bulkAction ) {
				<span class="hljs-keyword">case</span> <span class="hljs-string">'update-selected'</span>:
					action = bulkAction.replace( <span class="hljs-string">'selected'</span>, type );
					<span class="hljs-keyword">break</span>;

				<span class="hljs-keyword">case</span> <span class="hljs-string">'delete-selected'</span>:
					<span class="hljs-keyword">if</span> ( ! <span class="hljs-built_in">window</span>.confirm( <span class="hljs-string">'plugin'</span> === type ? wp.updates.l10n.aysBulkDelete : wp.updates.l10n.aysBulkDeleteThemes ) ) {
						event.preventDefault();
						<span class="hljs-keyword">return</span>;
					}

					action = bulkAction.replace( <span class="hljs-string">'selected'</span>, type );
					<span class="hljs-keyword">break</span>;

				<span class="hljs-keyword">default</span>:
					<span class="hljs-keyword">return</span>;
			}

			wp.updates.maybeRequestFilesystemCredentials( event );

			event.preventDefault();</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Un-check the bulk checkboxes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$bulkActionForm.find( <span class="hljs-string">'.manage-column [type="checkbox"]'</span> ).prop( <span class="hljs-string">'checked'</span>, <span class="hljs-literal">false</span> );

			$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'wp-'</span> + type + <span class="hljs-string">'-bulk-'</span> + bulkAction, itemsSelected );</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Find all the checkboxes which have been checked.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			itemsSelected.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> index, element </span>) </span>{
				<span class="hljs-keyword">var</span> $checkbox = $( element ),
					$itemRow = $checkbox.parents( <span class="hljs-string">'tr'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Only add update-able items to the update queue.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'update-selected'</span> === bulkAction &amp;&amp; ( ! $itemRow.hasClass( <span class="hljs-string">'update'</span> ) || $itemRow.find( <span class="hljs-string">'notice-error'</span> ).length ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Un-check the box.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$checkbox.prop( <span class="hljs-string">'checked'</span>, <span class="hljs-literal">false</span> );
					<span class="hljs-keyword">return</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Add it to the queue.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				wp.updates.queue.push( {
					<span class="hljs-attr">action</span>: action,
					<span class="hljs-attr">data</span>:   {
						<span class="hljs-attr">plugin</span>: $itemRow.data( <span class="hljs-string">'plugin'</span> ),
						<span class="hljs-attr">slug</span>:   $itemRow.data( <span class="hljs-string">'slug'</span> )
					}
				} );
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Display bulk notification for updates of any kind.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'wp-plugin-update-success wp-plugin-update-error wp-theme-update-success wp-theme-update-error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, response </span>) </span>{
				<span class="hljs-keyword">var</span> $itemRow = $( <span class="hljs-string">'[data-slug="'</span> + response.slug + <span class="hljs-string">'"]'</span> ),
					$bulkActionNotice, itemName;

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'wp-'</span> + response.update + <span class="hljs-string">'-update-success'</span> === event.type ) {
					success++;
				} <span class="hljs-keyword">else</span> {
					itemName = response.pluginName ? response.pluginName : $itemRow.find( <span class="hljs-string">'.column-primary strong'</span> ).text();

					error++;
					errorMessages.push( itemName + <span class="hljs-string">': '</span> + response.errorMessage );
				}

				$itemRow.find( <span class="hljs-string">'input[name="checked[]"]:checked'</span> ).prop( <span class="hljs-string">'checked'</span>, <span class="hljs-literal">false</span> );

				wp.updates.adminNotice = wp.template( <span class="hljs-string">'wp-bulk-updates-admin-notice'</span> );

				wp.updates.addAdminNotice( {
					<span class="hljs-attr">id</span>:            <span class="hljs-string">'bulk-action-notice'</span>,
					<span class="hljs-attr">className</span>:     <span class="hljs-string">'bulk-action-notice'</span>,
					<span class="hljs-attr">successes</span>:     success,
					<span class="hljs-attr">errors</span>:        error,
					<span class="hljs-attr">errorMessages</span>: errorMessages,
					<span class="hljs-attr">type</span>:          response.update
				} );

				$bulkActionNotice = $( <span class="hljs-string">'#bulk-action-notice'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'button'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>$( this ) is the clicked button, no need to get it again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$( <span class="hljs-keyword">this</span> )
						.toggleClass( <span class="hljs-string">'bulk-action-errors-collapsed'</span> )
						.attr( <span class="hljs-string">'aria-expanded'</span>, ! $( <span class="hljs-keyword">this</span> ).hasClass( <span class="hljs-string">'bulk-action-errors-collapsed'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Show the errors list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$bulkActionNotice.find( <span class="hljs-string">'.bulk-action-errors'</span> ).toggleClass( <span class="hljs-string">'hidden'</span> );
				} );

				<span class="hljs-keyword">if</span> ( error &gt; <span class="hljs-number">0</span> &amp;&amp; ! wp.updates.queue.length ) {
					$( <span class="hljs-string">'html, body'</span> ).animate( { <span class="hljs-attr">scrollTop</span>: <span class="hljs-number">0</span> } );
				}
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Reset admin notice template after #bulk-action-notice was added.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'wp-updates-notice-added'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				wp.updates.adminNotice = wp.template( <span class="hljs-string">'wp-updates-admin-notice'</span> );
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Check the queue, now that the event handlers have been added.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			wp.updates.queueChecker();
		} );

		<span class="hljs-keyword">if</span> ( $pluginInstallSearch.length ) {
			$pluginInstallSearch.attr( <span class="hljs-string">'aria-describedby'</span>, <span class="hljs-string">'live-search-desc'</span> );
		}

		<span class="hljs-comment">/**
		 * Handles changes to the plugin search box on the new-plugin page,
		 * searching the repository dynamically.
		 *
		 * @since 4.6.0
		 */</span>
		$pluginInstallSearch.on( <span class="hljs-string">'keyup input'</span>, _.debounce( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, eventtype </span>) </span>{
			<span class="hljs-keyword">var</span> $searchTab = $( <span class="hljs-string">'.plugin-install-search'</span> ), data, searchLocation;

			data = {
				<span class="hljs-attr">_ajax_nonce</span>: wp.updates.ajaxNonce,
				<span class="hljs-attr">s</span>:           event.target.value,
				<span class="hljs-attr">tab</span>:         <span class="hljs-string">'search'</span>,
				<span class="hljs-attr">type</span>:        $( <span class="hljs-string">'#typeselector'</span> ).val(),
				<span class="hljs-attr">pagenow</span>:     pagenow
			};
			searchLocation = location.href.split( <span class="hljs-string">'?'</span> )[ <span class="hljs-number">0</span> ] + <span class="hljs-string">'?'</span> + $.param( _.omit( data, [ <span class="hljs-string">'_ajax_nonce'</span>, <span class="hljs-string">'pagenow'</span> ] ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Clear on escape.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'keyup'</span> === event.type &amp;&amp; <span class="hljs-number">27</span> === event.which ) {
				event.target.value = <span class="hljs-string">''</span>;
			}

			<span class="hljs-keyword">if</span> ( wp.updates.searchTerm === data.s &amp;&amp; <span class="hljs-string">'typechange'</span> !== eventtype ) {
				<span class="hljs-keyword">return</span>;
			} <span class="hljs-keyword">else</span> {
				$pluginFilter.empty();
				wp.updates.searchTerm = data.s;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.history &amp;&amp; <span class="hljs-built_in">window</span>.history.replaceState ) {
				<span class="hljs-built_in">window</span>.history.replaceState( <span class="hljs-literal">null</span>, <span class="hljs-string">''</span>, searchLocation );
			}

			<span class="hljs-keyword">if</span> ( ! $searchTab.length ) {
				$searchTab = $( <span class="hljs-string">'&lt;li class="plugin-install-search" /&gt;'</span> )
					.append( $( <span class="hljs-string">'&lt;a /&gt;'</span>, {
						<span class="hljs-string">'class'</span>: <span class="hljs-string">'current'</span>,
						<span class="hljs-string">'href'</span>: searchLocation,
						<span class="hljs-string">'text'</span>: wp.updates.l10n.searchResultsLabel
					} ) );

				$( <span class="hljs-string">'.wp-filter .filter-links .current'</span> )
					.removeClass( <span class="hljs-string">'current'</span> )
					.parents( <span class="hljs-string">'.filter-links'</span> )
					.prepend( $searchTab );

				$pluginFilter.prev( <span class="hljs-string">'p'</span> ).remove();
				$( <span class="hljs-string">'.plugins-popular-tags-wrapper'</span> ).remove();
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> wp.updates.searchRequest ) {
				wp.updates.searchRequest.abort();
			}
			$( <span class="hljs-string">'body'</span> ).addClass( <span class="hljs-string">'loading-content'</span> );

			wp.updates.searchRequest = wp.ajax.post( <span class="hljs-string">'search-install-plugins'</span>, data ).done( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
				$( <span class="hljs-string">'body'</span> ).removeClass( <span class="hljs-string">'loading-content'</span> );
				$pluginFilter.append( response.items );
				<span class="hljs-keyword">delete</span> wp.updates.searchRequest;

				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === response.count ) {
					wp.a11y.speak( wp.updates.l10n.noPluginsFound );
				} <span class="hljs-keyword">else</span> {
					wp.a11y.speak( wp.updates.l10n.pluginsFound.replace( <span class="hljs-string">'%d'</span>, response.count ) );
				}
			} );
		}, <span class="hljs-number">500</span> ) );

		<span class="hljs-keyword">if</span> ( $pluginSearch.length ) {
			$pluginSearch.attr( <span class="hljs-string">'aria-describedby'</span>, <span class="hljs-string">'live-search-desc'</span> );
		}

		<span class="hljs-comment">/**
		 * Handles changes to the plugin search box on the Installed Plugins screen,
		 * searching the plugin list dynamically.
		 *
		 * @since 4.6.0
		 */</span>
		$pluginSearch.on( <span class="hljs-string">'keyup input'</span>, _.debounce( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> data = {
				<span class="hljs-attr">_ajax_nonce</span>:   wp.updates.ajaxNonce,
				<span class="hljs-attr">s</span>:             event.target.value,
				<span class="hljs-attr">pagenow</span>:       pagenow,
				<span class="hljs-attr">plugin_status</span>: <span class="hljs-string">'all'</span>
			},
			queryArgs;</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Clear on escape.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'keyup'</span> === event.type &amp;&amp; <span class="hljs-number">27</span> === event.which ) {
				event.target.value = <span class="hljs-string">''</span>;
			}

			<span class="hljs-keyword">if</span> ( wp.updates.searchTerm === data.s ) {
				<span class="hljs-keyword">return</span>;
			} <span class="hljs-keyword">else</span> {
				wp.updates.searchTerm = data.s;
			}

			queryArgs = _.object( _.compact( _.map( location.search.slice( <span class="hljs-number">1</span> ).split( <span class="hljs-string">'&amp;'</span> ), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> item </span>) </span>{
				<span class="hljs-keyword">if</span> ( item ) <span class="hljs-keyword">return</span> item.split( <span class="hljs-string">'='</span> );
			} ) ) );

			data.plugin_status = queryArgs.plugin_status || <span class="hljs-string">'all'</span>;

			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.history &amp;&amp; <span class="hljs-built_in">window</span>.history.replaceState ) {
				<span class="hljs-built_in">window</span>.history.replaceState( <span class="hljs-literal">null</span>, <span class="hljs-string">''</span>, location.href.split( <span class="hljs-string">'?'</span> )[ <span class="hljs-number">0</span> ] + <span class="hljs-string">'?s='</span> + data.s + <span class="hljs-string">'&amp;plugin_status='</span> + data.plugin_status );
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> wp.updates.searchRequest ) {
				wp.updates.searchRequest.abort();
			}

			$bulkActionForm.empty();
			$( <span class="hljs-string">'body'</span> ).addClass( <span class="hljs-string">'loading-content'</span> );
			$( <span class="hljs-string">'.subsubsub .current'</span> ).removeClass( <span class="hljs-string">'current'</span> );

			wp.updates.searchRequest = wp.ajax.post( <span class="hljs-string">'search-plugins'</span>, data ).done( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Can we just ditch this whole subtitle business?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> $subTitle    = $( <span class="hljs-string">'&lt;span /&gt;'</span> ).addClass( <span class="hljs-string">'subtitle'</span> ).html( wp.updates.l10n.searchResults.replace( <span class="hljs-string">'%s'</span>, _.escape( data.s ) ) ),
					$oldSubTitle = $( <span class="hljs-string">'.wrap .subtitle'</span> );

				<span class="hljs-keyword">if</span> ( ! data.s.length ) {
					$oldSubTitle.remove();
					$( <span class="hljs-string">'.subsubsub .'</span> + data.plugin_status + <span class="hljs-string">' a'</span> ).addClass( <span class="hljs-string">'current'</span> );
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $oldSubTitle.length ) {
					$oldSubTitle.replaceWith( $subTitle );
				} <span class="hljs-keyword">else</span> {
					$( <span class="hljs-string">'.wp-header-end'</span> ).before( $subTitle );
				}

				$( <span class="hljs-string">'body'</span> ).removeClass( <span class="hljs-string">'loading-content'</span> );
				$bulkActionForm.append( response.items );
				<span class="hljs-keyword">delete</span> wp.updates.searchRequest;

				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === response.count ) {
					wp.a11y.speak( wp.updates.l10n.noPluginsFound );
				} <span class="hljs-keyword">else</span> {
					wp.a11y.speak( wp.updates.l10n.pluginsFound.replace( <span class="hljs-string">'%d'</span>, response.count ) );
				}
			} );
		}, <span class="hljs-number">500</span> ) );

		<span class="hljs-comment">/**
		 * Trigger a search event when the search form gets submitted.
		 *
		 * @since 4.6.0
		 */</span>
		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'submit'</span>, <span class="hljs-string">'.search-plugins'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			event.preventDefault();

			$( <span class="hljs-string">'input.wp-filter-search'</span> ).trigger( <span class="hljs-string">'input'</span> );
		} );

		<span class="hljs-comment">/**
		 * Trigger a search event when the search type gets changed.
		 *
		 * @since 4.6.0
		 */</span>
		$( <span class="hljs-string">'#typeselector'</span> ).on( <span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $search = $( <span class="hljs-string">'input[name="s"]'</span> );

			<span class="hljs-keyword">if</span> ( $search.val().length ) {
				$search.trigger( <span class="hljs-string">'input'</span>, <span class="hljs-string">'typechange'</span> );
			}
		} );

		<span class="hljs-comment">/**
		 * Click handler for updating a plugin from the details modal on `plugin-install.php`.
		 *
		 * @since 4.2.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$( <span class="hljs-string">'#plugin_update_from_iframe'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> target = <span class="hljs-built_in">window</span>.parent === <span class="hljs-built_in">window</span> ? <span class="hljs-literal">null</span> : <span class="hljs-built_in">window</span>.parent,
				update;

			$.support.postMessage = !! <span class="hljs-built_in">window</span>.postMessage;

			<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === $.support.postMessage || <span class="hljs-literal">null</span> === target || <span class="hljs-number">-1</span> !== <span class="hljs-built_in">window</span>.parent.location.pathname.indexOf( <span class="hljs-string">'update-core.php'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			event.preventDefault();

			update = {
				<span class="hljs-attr">action</span>: <span class="hljs-string">'update-plugin'</span>,
				<span class="hljs-attr">data</span>:   {
					<span class="hljs-attr">plugin</span>: $( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">'plugin'</span> ),
					<span class="hljs-attr">slug</span>:   $( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">'slug'</span> )
				}
			};

			target.postMessage( <span class="hljs-built_in">JSON</span>.stringify( update ), <span class="hljs-built_in">window</span>.location.origin );
		} );

		<span class="hljs-comment">/**
		 * Click handler for installing a plugin from the details modal on `plugin-install.php`.
		 *
		 * @since 4.6.0
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$( <span class="hljs-string">'#plugin_install_from_iframe'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> target = <span class="hljs-built_in">window</span>.parent === <span class="hljs-built_in">window</span> ? <span class="hljs-literal">null</span> : <span class="hljs-built_in">window</span>.parent,
				install;

			$.support.postMessage = !! <span class="hljs-built_in">window</span>.postMessage;

			<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === $.support.postMessage || <span class="hljs-literal">null</span> === target || <span class="hljs-number">-1</span> !== <span class="hljs-built_in">window</span>.parent.location.pathname.indexOf( <span class="hljs-string">'index.php'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			event.preventDefault();

			install = {
				<span class="hljs-attr">action</span>: <span class="hljs-string">'install-plugin'</span>,
				<span class="hljs-attr">data</span>:   {
					<span class="hljs-attr">slug</span>: $( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">'slug'</span> )
				}
			};

			target.postMessage( <span class="hljs-built_in">JSON</span>.stringify( install ), <span class="hljs-built_in">window</span>.location.origin );
		} );

		<span class="hljs-comment">/**
		 * Handles postMessage events.
		 *
		 * @since 4.2.0
		 * @since 4.6.0 Switched `update-plugin` action to use the queue.
		 *
		 * @param {Event} event Event interface.
		 */</span>
		$( <span class="hljs-built_in">window</span> ).on( <span class="hljs-string">'message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> originalEvent  = event.originalEvent,
				expectedOrigin = <span class="hljs-built_in">document</span>.location.protocol + <span class="hljs-string">'//'</span> + <span class="hljs-built_in">document</span>.location.hostname,
				message;

			<span class="hljs-keyword">if</span> ( originalEvent.origin !== expectedOrigin ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">try</span> {
				message = $.parseJSON( originalEvent.data );
			} <span class="hljs-keyword">catch</span> ( e ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> message.action ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">switch</span> ( message.action ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Called from <code>wp-admin/includes/class-wp-upgrader-skins.php</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">case</span> <span class="hljs-string">'decrementUpdateCount'</span>:
					<span class="hljs-comment">/** @property {string} message.upgradeType */</span>
					wp.updates.decrementCount( message.upgradeType );
					<span class="hljs-keyword">break</span>;

				<span class="hljs-keyword">case</span> <span class="hljs-string">'install-plugin'</span>:
				<span class="hljs-keyword">case</span> <span class="hljs-string">'update-plugin'</span>:
					<span class="hljs-comment">/* jscs:disable requireCamelCaseOrUpperCaseIdentifiers */</span>
					<span class="hljs-built_in">window</span>.tb_remove();
					<span class="hljs-comment">/* jscs:enable */</span>

					message.data = wp.updates._addCallbacks( message.data, message.action );

					wp.updates.queue.push( message );
					wp.updates.queueChecker();
					<span class="hljs-keyword">break</span>;
			}
		} );

		<span class="hljs-comment">/**
		 * Adds a callback to display a warning before leaving the page.
		 *
		 * @since 4.2.0
		 */</span>
		$( <span class="hljs-built_in">window</span> ).on( <span class="hljs-string">'beforeunload'</span>, wp.updates.beforeunload );
	} );
})( jQuery, <span class="hljs-built_in">window</span>.wp, <span class="hljs-built_in">window</span>._wpUpdatesSettings );</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
