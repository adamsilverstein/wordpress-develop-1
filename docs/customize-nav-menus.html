<!DOCTYPE html>

<html>
<head>
  <title>customize-nav-menus.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>customize-nav-menus.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* global _wpCustomizeNavMenusSettings, wpNavMenu, console */</span>
( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> api, wp, $ </span>) </span>{
<span class="hljs-meta">	'use strict'</span>;

	<span class="hljs-comment">/**
	 * Set up wpNavMenu for drag and drop.
	 */</span>
	wpNavMenu.originalInit = wpNavMenu.init;
	wpNavMenu.options.menuItemDepthPerLevel = <span class="hljs-number">20</span>;
	wpNavMenu.options.sortableItems         = <span class="hljs-string">'&gt; .customize-control-nav_menu_item'</span>;
	wpNavMenu.options.targetTolerance       = <span class="hljs-number">10</span>;
	wpNavMenu.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>.jQueryExtensions();
	};

	api.Menus = api.Menus || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Link settings.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	api.Menus.data = {
		<span class="hljs-attr">itemTypes</span>: [],
		<span class="hljs-attr">l10n</span>: {},
		<span class="hljs-attr">settingTransport</span>: <span class="hljs-string">'refresh'</span>,
		<span class="hljs-attr">phpIntMax</span>: <span class="hljs-number">0</span>,
		<span class="hljs-attr">defaultSettingValues</span>: {
			<span class="hljs-attr">nav_menu</span>: {},
			<span class="hljs-attr">nav_menu_item</span>: {}
		},
		<span class="hljs-attr">locationSlugMappedToName</span>: {}
	};
	<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> _wpCustomizeNavMenusSettings ) {
		$.extend( api.Menus.data, _wpCustomizeNavMenusSettings );
	}

	<span class="hljs-comment">/**
	 * Newly-created Nav Menus and Nav Menu Items have negative integer IDs which
	 * serve as placeholders until Save &amp; Publish happens.
	 *
	 * @return {number}
	 */</span>
	api.Menus.generatePlaceholderAutoIncrementId = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">return</span> -<span class="hljs-built_in">Math</span>.ceil( api.Menus.data.phpIntMax * <span class="hljs-built_in">Math</span>.random() );
	};

	<span class="hljs-comment">/**
	 * wp.customize.Menus.AvailableItemModel
	 *
	 * A single available menu item model. See PHP's WP_Customize_Nav_Menu_Item_Setting class.
	 *
	 * @constructor
	 * @augments Backbone.Model
	 */</span>
	api.Menus.AvailableItemModel = Backbone.Model.extend( $.extend(
		{
			<span class="hljs-attr">id</span>: <span class="hljs-literal">null</span> <span class="hljs-comment">// This is only used by Backbone.</span>
		},
		api.Menus.data.defaultSettingValues.nav_menu_item
	) );

	<span class="hljs-comment">/**
	 * wp.customize.Menus.AvailableItemCollection
	 *
	 * Collection for available menu item models.
	 *
	 * @constructor
	 * @augments Backbone.Model
	 */</span>
	api.Menus.AvailableItemCollection = Backbone.Collection.extend({
		<span class="hljs-attr">model</span>: api.Menus.AvailableItemModel,

		<span class="hljs-attr">sort_key</span>: <span class="hljs-string">'order'</span>,

		<span class="hljs-attr">comparator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> item </span>) </span>{
			<span class="hljs-keyword">return</span> -item.get( <span class="hljs-keyword">this</span>.sort_key );
		},

		<span class="hljs-attr">sortByField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> fieldName </span>) </span>{
			<span class="hljs-keyword">this</span>.sort_key = fieldName;
			<span class="hljs-keyword">this</span>.sort();
		}
	});
	api.Menus.availableMenuItems = <span class="hljs-keyword">new</span> api.Menus.AvailableItemCollection( api.Menus.data.availableMenuItems );

	<span class="hljs-comment">/**
	 * Insert a new `auto-draft` post.
	 *
	 * @since 4.7.0
	 * @access public
	 *
	 * @param {object} params - Parameters for the draft post to create.
	 * @param {string} params.post_type - Post type to add.
	 * @param {string} params.post_title - Post title to use.
	 * @return {jQuery.promise} Promise resolved with the added post.
	 */</span>
	api.Menus.insertAutoDraftPost = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insertAutoDraftPost</span>(<span class="hljs-params"> params </span>) </span>{
		<span class="hljs-keyword">var</span> request, deferred = $.Deferred();

		request = wp.ajax.post( <span class="hljs-string">'customize-nav-menus-insert-auto-draft'</span>, {
			<span class="hljs-string">'customize-menus-nonce'</span>: api.settings.nonce[<span class="hljs-string">'customize-menus'</span>],
			<span class="hljs-string">'wp_customize'</span>: <span class="hljs-string">'on'</span>,
			<span class="hljs-string">'params'</span>: params
		} );

		request.done( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
			<span class="hljs-keyword">if</span> ( response.post_id ) {
				api( <span class="hljs-string">'nav_menus_created_posts'</span> ).set(
					api( <span class="hljs-string">'nav_menus_created_posts'</span> ).get().concat( [ response.post_id ] )
				);

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'page'</span> === params.post_type ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Activate static front page controls as this could be the first page created.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( api.section.has( <span class="hljs-string">'static_front_page'</span> ) ) {
						api.section( <span class="hljs-string">'static_front_page'</span> ).activate();
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Add new page to dropdown-pages controls.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					api.control.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> control </span>) </span>{
						<span class="hljs-keyword">var</span> select;
						<span class="hljs-keyword">if</span> ( <span class="hljs-string">'dropdown-pages'</span> === control.params.type ) {
							select = control.container.find( <span class="hljs-string">'select[name^="_customize-dropdown-pages-"]'</span> );
							select.append( <span class="hljs-keyword">new</span> Option( params.post_title, response.post_id ) );
						}
					} );
				}
				deferred.resolve( response );
			}
		} );

		request.fail( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> response </span>) </span>{
			<span class="hljs-keyword">var</span> error = response || <span class="hljs-string">''</span>;

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> response.message ) {
				error = response.message;
			}

			<span class="hljs-built_in">console</span>.error( error );
			deferred.rejectWith( error );
		} );

		<span class="hljs-keyword">return</span> deferred.promise();
	};

	<span class="hljs-comment">/**
	 * wp.customize.Menus.AvailableMenuItemsPanelView
	 *
	 * View class for the available menu items panel.
	 *
	 * @constructor
	 * @augments wp.Backbone.View
	 * @augments Backbone.View
	 */</span>
	api.Menus.AvailableMenuItemsPanelView = wp.Backbone.View.extend({

		<span class="hljs-attr">el</span>: <span class="hljs-string">'#available-menu-items'</span>,

		<span class="hljs-attr">events</span>: {
			<span class="hljs-string">'input #menu-items-search'</span>: <span class="hljs-string">'debounceSearch'</span>,
			<span class="hljs-string">'keyup #menu-items-search'</span>: <span class="hljs-string">'debounceSearch'</span>,
			<span class="hljs-string">'focus .menu-item-tpl'</span>: <span class="hljs-string">'focus'</span>,
			<span class="hljs-string">'click .menu-item-tpl'</span>: <span class="hljs-string">'_submit'</span>,
			<span class="hljs-string">'click #custom-menu-item-submit'</span>: <span class="hljs-string">'_submitLink'</span>,
			<span class="hljs-string">'keypress #custom-menu-item-name'</span>: <span class="hljs-string">'_submitLink'</span>,
			<span class="hljs-string">'click .new-content-item .add-content'</span>: <span class="hljs-string">'_submitNew'</span>,
			<span class="hljs-string">'keypress .create-item-input'</span>: <span class="hljs-string">'_submitNew'</span>,
			<span class="hljs-string">'keydown'</span>: <span class="hljs-string">'keyboardAccessible'</span>
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Cache current selected menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		selected: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Cache menu control that opened the panel.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		currentMenuControl: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">debounceSearch</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">$search</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">$clearResults</span>: <span class="hljs-literal">null</span>,
		<span class="hljs-attr">searchTerm</span>: <span class="hljs-string">''</span>,
		<span class="hljs-attr">rendered</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">pages</span>: {},
		<span class="hljs-attr">sectionContent</span>: <span class="hljs-string">''</span>,
		<span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
		<span class="hljs-attr">addingNew</span>: <span class="hljs-literal">false</span>,

		<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

			<span class="hljs-keyword">if</span> ( ! api.panel.has( <span class="hljs-string">'nav_menus'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>.$search = $( <span class="hljs-string">'#menu-items-search'</span> );
			<span class="hljs-keyword">this</span>.$clearResults = <span class="hljs-keyword">this</span>.$el.find( <span class="hljs-string">'.clear-results'</span> );
			<span class="hljs-keyword">this</span>.sectionContent = <span class="hljs-keyword">this</span>.$el.find( <span class="hljs-string">'.available-menu-items-list'</span> );

			<span class="hljs-keyword">this</span>.debounceSearch = _.debounce( self.search, <span class="hljs-number">500</span> );

			_.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'close'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>If the available menu items panel is open and the customize controls are
interacted with (other than an item being deleted), then close the
available menu items panel. Also close on back button click.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'#customize-controls, .customize-section-back'</span> ).on( <span class="hljs-string">'click keydown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> e </span>) </span>{
				<span class="hljs-keyword">var</span> isDeleteBtn = $( e.target ).is( <span class="hljs-string">'.item-delete, .item-delete *'</span> ),
					isAddNewBtn = $( e.target ).is( <span class="hljs-string">'.add-new-menu-item, .add-new-menu-item *'</span> );
				<span class="hljs-keyword">if</span> ( $( <span class="hljs-string">'body'</span> ).hasClass( <span class="hljs-string">'adding-menu-items'</span> ) &amp;&amp; ! isDeleteBtn &amp;&amp; ! isAddNewBtn ) {
					self.close();
				}
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Clear the search results and trigger a <code>keyup</code> event to fire a new search.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.$clearResults.on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				self.$search.val( <span class="hljs-string">''</span> ).focus().trigger( <span class="hljs-string">'keyup'</span> );
			} );

			<span class="hljs-keyword">this</span>.$el.on( <span class="hljs-string">'input'</span>, <span class="hljs-string">'#custom-menu-item-name.invalid, #custom-menu-item-url.invalid'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				$( <span class="hljs-keyword">this</span> ).removeClass( <span class="hljs-string">'invalid'</span> );
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Load available items if it looks like well need them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.panel( <span class="hljs-string">'nav_menus'</span> ).container.bind( <span class="hljs-string">'expanded'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( ! self.rendered ) {
					self.initList();
					self.rendered = <span class="hljs-literal">true</span>;
				}
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Load more items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.sectionContent.scroll( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> totalHeight = self.$el.find( <span class="hljs-string">'.accordion-section.open .available-menu-items-list'</span> ).prop( <span class="hljs-string">'scrollHeight'</span> ),
					visibleHeight = self.$el.find( <span class="hljs-string">'.accordion-section.open'</span> ).height();

				<span class="hljs-keyword">if</span> ( ! self.loading &amp;&amp; $( <span class="hljs-keyword">this</span> ).scrollTop() &gt; <span class="hljs-number">3</span> / <span class="hljs-number">4</span> * totalHeight - visibleHeight ) {
					<span class="hljs-keyword">var</span> type = $( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">'type'</span> ),
						object = $( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">'object'</span> );

					<span class="hljs-keyword">if</span> ( <span class="hljs-string">'search'</span> === type ) {
						<span class="hljs-keyword">if</span> ( self.searchTerm ) {
							self.doSearch( self.pages.search );
						}
					} <span class="hljs-keyword">else</span> {
						self.loadItems( [
							{ <span class="hljs-attr">type</span>: type, <span class="hljs-attr">object</span>: object }
						] );
					}
				}
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Close the panel if the URL in the preview changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.previewer.bind( <span class="hljs-string">'url'</span>, <span class="hljs-keyword">this</span>.close );

			self.delegateEvents();
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Search input change handler.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		search: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> $searchSection = $( <span class="hljs-string">'#available-menu-items-search'</span> ),
				$otherSections = $( <span class="hljs-string">'#available-menu-items .accordion-section'</span> ).not( $searchSection );

			<span class="hljs-keyword">if</span> ( ! event ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.searchTerm === event.target.value ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> !== event.target.value &amp;&amp; ! $searchSection.hasClass( <span class="hljs-string">'open'</span> ) ) {
				$otherSections.fadeOut( <span class="hljs-number">100</span> );
				$searchSection.find( <span class="hljs-string">'.accordion-section-content'</span> ).slideDown( <span class="hljs-string">'fast'</span> );
				$searchSection.addClass( <span class="hljs-string">'open'</span> );
				<span class="hljs-keyword">this</span>.$clearResults.addClass( <span class="hljs-string">'is-visible'</span> );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> === event.target.value ) {
				$searchSection.removeClass( <span class="hljs-string">'open'</span> );
				$otherSections.show();
				<span class="hljs-keyword">this</span>.$clearResults.removeClass( <span class="hljs-string">'is-visible'</span> );
			}

			<span class="hljs-keyword">this</span>.searchTerm = event.target.value;
			<span class="hljs-keyword">this</span>.pages.search = <span class="hljs-number">1</span>;
			<span class="hljs-keyword">this</span>.doSearch( <span class="hljs-number">1</span> );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Get search results.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		doSearch: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> page </span>) </span>{
			<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>, params,
				$section = $( <span class="hljs-string">'#available-menu-items-search'</span> ),
				$content = $section.find( <span class="hljs-string">'.accordion-section-content'</span> ),
				itemTemplate = wp.template( <span class="hljs-string">'available-menu-item'</span> );

			<span class="hljs-keyword">if</span> ( self.currentRequest ) {
				self.currentRequest.abort();
			}

			<span class="hljs-keyword">if</span> ( page &lt; <span class="hljs-number">0</span> ) {
				<span class="hljs-keyword">return</span>;
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( page &gt; <span class="hljs-number">1</span> ) {
				$section.addClass( <span class="hljs-string">'loading-more'</span> );
				$content.attr( <span class="hljs-string">'aria-busy'</span>, <span class="hljs-string">'true'</span> );
				wp.a11y.speak( api.Menus.data.l10n.itemsLoadingMore );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> === self.searchTerm ) {
				$content.html( <span class="hljs-string">''</span> );
				wp.a11y.speak( <span class="hljs-string">''</span> );
				<span class="hljs-keyword">return</span>;
			}

			$section.addClass( <span class="hljs-string">'loading'</span> );
			self.loading = <span class="hljs-literal">true</span>;

			params = api.previewer.query( { <span class="hljs-attr">excludeCustomizedSaved</span>: <span class="hljs-literal">true</span> } );
			_.extend( params, {
				<span class="hljs-string">'customize-menus-nonce'</span>: api.settings.nonce[<span class="hljs-string">'customize-menus'</span>],
				<span class="hljs-string">'wp_customize'</span>: <span class="hljs-string">'on'</span>,
				<span class="hljs-string">'search'</span>: self.searchTerm,
				<span class="hljs-string">'page'</span>: page
			} );

			self.currentRequest = wp.ajax.post( <span class="hljs-string">'search-available-menu-items-customizer'</span>, params );

			self.currentRequest.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
				<span class="hljs-keyword">var</span> items;
				<span class="hljs-keyword">if</span> ( <span class="hljs-number">1</span> === page ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Clear previous results as its a new search.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$content.empty();
				}
				$section.removeClass( <span class="hljs-string">'loading loading-more'</span> );
				$content.attr( <span class="hljs-string">'aria-busy'</span>, <span class="hljs-string">'false'</span> );
				$section.addClass( <span class="hljs-string">'open'</span> );
				self.loading = <span class="hljs-literal">false</span>;
				items = <span class="hljs-keyword">new</span> api.Menus.AvailableItemCollection( data.items );
				self.collection.add( items.models );
				items.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItem </span>) </span>{
					$content.append( itemTemplate( menuItem.attributes ) );
				} );
				<span class="hljs-keyword">if</span> ( <span class="hljs-number">20</span> &gt; items.length ) {
					self.pages.search = <span class="hljs-number">-1</span>; <span class="hljs-comment">// Up to 20 posts and 20 terms in results, if &lt;20, no more results for either.</span>
				} <span class="hljs-keyword">else</span> {
					self.pages.search = self.pages.search + <span class="hljs-number">1</span>;
				}
				<span class="hljs-keyword">if</span> ( items &amp;&amp; page &gt; <span class="hljs-number">1</span> ) {
					wp.a11y.speak( api.Menus.data.l10n.itemsFoundMore.replace( <span class="hljs-string">'%d'</span>, items.length ) );
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( items &amp;&amp; page === <span class="hljs-number">1</span> ) {
					wp.a11y.speak( api.Menus.data.l10n.itemsFound.replace( <span class="hljs-string">'%d'</span>, items.length ) );
				}
			});

			self.currentRequest.fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>data.message may be undefined, for example when typing slow and the request is aborted.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( data.message ) {
					$content.empty().append( $( <span class="hljs-string">'&lt;li class="nothing-found"&gt;&lt;/li&gt;'</span> ).text( data.message ) );
					wp.a11y.speak( data.message );
				}
				self.pages.search = <span class="hljs-number">-1</span>;
			});

			self.currentRequest.always(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				$section.removeClass( <span class="hljs-string">'loading loading-more'</span> );
				$content.attr( <span class="hljs-string">'aria-busy'</span>, <span class="hljs-string">'false'</span> );
				self.loading = <span class="hljs-literal">false</span>;
				self.currentRequest = <span class="hljs-literal">null</span>;
			});
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Render the individual items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		initList: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Render the template for each item by type.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			_.each( api.Menus.data.itemTypes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> itemType </span>) </span>{
				self.pages[ itemType.type + <span class="hljs-string">':'</span> + itemType.object ] = <span class="hljs-number">0</span>;
			} );
			self.loadItems( api.Menus.data.itemTypes );
		},

		<span class="hljs-comment">/**
		 * Load available nav menu items.
		 *
		 * @since 4.3.0
		 * @since 4.7.0 Changed function signature to take list of item types instead of single type/object.
		 * @access private
		 *
		 * @param {Array.&lt;object&gt;} itemTypes List of objects containing type and key.
		 * @param {string} deprecated Formerly the object parameter.
		 * @returns {void}
		 */</span>
		loadItems: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> itemTypes, deprecated </span>) </span>{
			<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>, _itemTypes, requestItemTypes = [], params, request, itemTemplate, availableMenuItemContainers = {};
			itemTemplate = wp.template( <span class="hljs-string">'available-menu-item'</span> );

			<span class="hljs-keyword">if</span> ( _.isString( itemTypes ) &amp;&amp; _.isString( deprecated ) ) {
				_itemTypes = [ { <span class="hljs-attr">type</span>: itemTypes, <span class="hljs-attr">object</span>: deprecated } ];
			} <span class="hljs-keyword">else</span> {
				_itemTypes = itemTypes;
			}

			_.each( _itemTypes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> itemType </span>) </span>{
				<span class="hljs-keyword">var</span> container, name = itemType.type + <span class="hljs-string">':'</span> + itemType.object;
				<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> === self.pages[ name ] ) {
					<span class="hljs-keyword">return</span>; <span class="hljs-comment">// Skip types for which there are no more results.</span>
				}
				container = $( <span class="hljs-string">'#available-menu-items-'</span> + itemType.type + <span class="hljs-string">'-'</span> + itemType.object );
				container.find( <span class="hljs-string">'.accordion-section-title'</span> ).addClass( <span class="hljs-string">'loading'</span> );
				availableMenuItemContainers[ name ] = container;

				requestItemTypes.push( {
					<span class="hljs-attr">object</span>: itemType.object,
					<span class="hljs-attr">type</span>: itemType.type,
					<span class="hljs-attr">page</span>: self.pages[ name ]
				} );
			} );

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === requestItemTypes.length ) {
				<span class="hljs-keyword">return</span>;
			}

			self.loading = <span class="hljs-literal">true</span>;

			params = api.previewer.query( { <span class="hljs-attr">excludeCustomizedSaved</span>: <span class="hljs-literal">true</span> } );
			_.extend( params, {
				<span class="hljs-string">'customize-menus-nonce'</span>: api.settings.nonce[<span class="hljs-string">'customize-menus'</span>],
				<span class="hljs-string">'wp_customize'</span>: <span class="hljs-string">'on'</span>,
				<span class="hljs-string">'item_types'</span>: requestItemTypes
			} );

			request = wp.ajax.post( <span class="hljs-string">'load-available-menu-items-customizer'</span>, params );

			request.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
				<span class="hljs-keyword">var</span> typeInner;
				_.each( data.items, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> typeItems, name </span>) </span>{
					<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === typeItems.length ) {
						<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === self.pages[ name ] ) {
							availableMenuItemContainers[ name ].find( <span class="hljs-string">'.accordion-section-title'</span> )
								.addClass( <span class="hljs-string">'cannot-expand'</span> )
								.removeClass( <span class="hljs-string">'loading'</span> )
								.find( <span class="hljs-string">'.accordion-section-title &gt; button'</span> )
								.prop( <span class="hljs-string">'tabIndex'</span>, <span class="hljs-number">-1</span> );
						}
						self.pages[ name ] = <span class="hljs-number">-1</span>;
						<span class="hljs-keyword">return</span>;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( ( <span class="hljs-string">'post_type:page'</span> === name ) &amp;&amp; ( ! availableMenuItemContainers[ name ].hasClass( <span class="hljs-string">'open'</span> ) ) ) {
						availableMenuItemContainers[ name ].find( <span class="hljs-string">'.accordion-section-title &gt; button'</span> ).click();
					}
					typeItems = <span class="hljs-keyword">new</span> api.Menus.AvailableItemCollection( typeItems ); <span class="hljs-comment">// @todo Why is this collection created and then thrown away?</span>
					self.collection.add( typeItems.models );
					typeInner = availableMenuItemContainers[ name ].find( <span class="hljs-string">'.available-menu-items-list'</span> );
					typeItems.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItem </span>) </span>{
						typeInner.append( itemTemplate( menuItem.attributes ) );
					} );
					self.pages[ name ] += <span class="hljs-number">1</span>;
				});
			});
			request.fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">console</span>.error ) {
					<span class="hljs-built_in">console</span>.error( data );
				}
			});
			request.always(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				_.each( availableMenuItemContainers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> container </span>) </span>{
					container.find( <span class="hljs-string">'.accordion-section-title'</span> ).removeClass( <span class="hljs-string">'loading'</span> );
				} );
				self.loading = <span class="hljs-literal">false</span>;
			});
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Adjust the height of each section of items to fit the screen.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		itemSectionHeight: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> sections, lists, totalHeight, accordionHeight, diff;
			totalHeight = <span class="hljs-built_in">window</span>.innerHeight;
			sections = <span class="hljs-keyword">this</span>.$el.find( <span class="hljs-string">'.accordion-section:not( #available-menu-items-search ) .accordion-section-content'</span> );
			lists = <span class="hljs-keyword">this</span>.$el.find( <span class="hljs-string">'.accordion-section:not( #available-menu-items-search ) .available-menu-items-list:not(":only-child")'</span> );
			accordionHeight =  <span class="hljs-number">46</span> * ( <span class="hljs-number">1</span> + sections.length ) + <span class="hljs-number">14</span>; <span class="hljs-comment">// Magic numbers.</span>
			diff = totalHeight - accordionHeight;
			<span class="hljs-keyword">if</span> ( <span class="hljs-number">120</span> &lt; diff &amp;&amp; <span class="hljs-number">290</span> &gt; diff ) {
				sections.css( <span class="hljs-string">'max-height'</span>, diff );
				lists.css( <span class="hljs-string">'max-height'</span>, ( diff - <span class="hljs-number">60</span> ) );
			}
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Highlights a menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		select: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuitemTpl </span>) </span>{
			<span class="hljs-keyword">this</span>.selected = $( menuitemTpl );
			<span class="hljs-keyword">this</span>.selected.siblings( <span class="hljs-string">'.menu-item-tpl'</span> ).removeClass( <span class="hljs-string">'selected'</span> );
			<span class="hljs-keyword">this</span>.selected.addClass( <span class="hljs-string">'selected'</span> );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Highlights a menu item on focus.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		focus: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">this</span>.select( $( event.currentTarget ) );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Submit handler for keypress and click on menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_submit: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Only proceed with keypress if it is Enter or Spacebar</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'keypress'</span> === event.type &amp;&amp; ( <span class="hljs-number">13</span> !== event.which &amp;&amp; <span class="hljs-number">32</span> !== event.which ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>.submit( $( event.currentTarget ) );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Adds a selected menu item to the menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		submit: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuitemTpl </span>) </span>{
			<span class="hljs-keyword">var</span> menuitemId, menu_item;

			<span class="hljs-keyword">if</span> ( ! menuitemTpl ) {
				menuitemTpl = <span class="hljs-keyword">this</span>.selected;
			}

			<span class="hljs-keyword">if</span> ( ! menuitemTpl || ! <span class="hljs-keyword">this</span>.currentMenuControl ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>.select( menuitemTpl );

			menuitemId = $( <span class="hljs-keyword">this</span>.selected ).data( <span class="hljs-string">'menu-item-id'</span> );
			menu_item = <span class="hljs-keyword">this</span>.collection.findWhere( { <span class="hljs-attr">id</span>: menuitemId } );
			<span class="hljs-keyword">if</span> ( ! menu_item ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>.currentMenuControl.addItemToMenu( menu_item.attributes );

			$( menuitemTpl ).find( <span class="hljs-string">'.menu-item-handle'</span> ).addClass( <span class="hljs-string">'item-added'</span> );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Submit handler for keypress and click on custom menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_submitLink: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Only proceed with keypress if it is Enter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'keypress'</span> === event.type &amp;&amp; <span class="hljs-number">13</span> !== event.which ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>.submitLink();
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Adds the custom menu item to the menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		submitLink: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> menuItem,
				itemName = $( <span class="hljs-string">'#custom-menu-item-name'</span> ),
				itemUrl = $( <span class="hljs-string">'#custom-menu-item-url'</span> );

			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">this</span>.currentMenuControl ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> === itemName.val() ) {
				itemName.addClass( <span class="hljs-string">'invalid'</span> );
				<span class="hljs-keyword">return</span>;
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> === itemUrl.val() || <span class="hljs-string">'http://'</span> === itemUrl.val() ) {
				itemUrl.addClass( <span class="hljs-string">'invalid'</span> );
				<span class="hljs-keyword">return</span>;
			}

			menuItem = {
				<span class="hljs-string">'title'</span>: itemName.val(),
				<span class="hljs-string">'url'</span>: itemUrl.val(),
				<span class="hljs-string">'type'</span>: <span class="hljs-string">'custom'</span>,
				<span class="hljs-string">'type_label'</span>: api.Menus.data.l10n.custom_label,
				<span class="hljs-string">'object'</span>: <span class="hljs-string">'custom'</span>
			};

			<span class="hljs-keyword">this</span>.currentMenuControl.addItemToMenu( menuItem );</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Reset the custom link form.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			itemUrl.val( <span class="hljs-string">'http://'</span> );
			itemName.val( <span class="hljs-string">''</span> );
		},

		<span class="hljs-comment">/**
		 * Submit handler for keypress (enter) on field and click on button.
		 *
		 * @since 4.7.0
		 * @private
		 *
		 * @param {jQuery.Event} event Event.
		 * @returns {void}
		 */</span>
		_submitNew: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> container;</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Only proceed with keypress if it is Enter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'keypress'</span> === event.type &amp;&amp; <span class="hljs-number">13</span> !== event.which ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.addingNew ) {
				<span class="hljs-keyword">return</span>;
			}

			container = $( event.target ).closest( <span class="hljs-string">'.accordion-section'</span> );

			<span class="hljs-keyword">this</span>.submitNew( container );
		},

		<span class="hljs-comment">/**
		 * Creates a new object and adds an associated menu item to the menu.
		 *
		 * @since 4.7.0
		 * @private
		 *
		 * @param {jQuery} container
		 * @returns {void}
		 */</span>
		submitNew: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> container </span>) </span>{
			<span class="hljs-keyword">var</span> panel = <span class="hljs-keyword">this</span>,
				itemName = container.find( <span class="hljs-string">'.create-item-input'</span> ),
				title = itemName.val(),
				dataContainer = container.find( <span class="hljs-string">'.available-menu-items-list'</span> ),
				itemType = dataContainer.data( <span class="hljs-string">'type'</span> ),
				itemObject = dataContainer.data( <span class="hljs-string">'object'</span> ),
				itemTypeLabel = dataContainer.data( <span class="hljs-string">'type_label'</span> ),
				promise;

			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">this</span>.currentMenuControl ) {
				<span class="hljs-keyword">return</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Only posts are supported currently.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'post_type'</span> !== itemType ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> === $.trim( itemName.val() ) ) {
				itemName.addClass( <span class="hljs-string">'invalid'</span> );
				itemName.focus();
				<span class="hljs-keyword">return</span>;
			} <span class="hljs-keyword">else</span> {
				itemName.removeClass( <span class="hljs-string">'invalid'</span> );
				container.find( <span class="hljs-string">'.accordion-section-title'</span> ).addClass( <span class="hljs-string">'loading'</span> );
			}

			panel.addingNew = <span class="hljs-literal">true</span>;
			itemName.attr( <span class="hljs-string">'disabled'</span>, <span class="hljs-string">'disabled'</span> );
			promise = api.Menus.insertAutoDraftPost( {
				<span class="hljs-attr">post_title</span>: title,
				<span class="hljs-attr">post_type</span>: itemObject
			} );
			promise.done( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
				<span class="hljs-keyword">var</span> availableItem, $content, itemElement;
				availableItem = <span class="hljs-keyword">new</span> api.Menus.AvailableItemModel( {
					<span class="hljs-string">'id'</span>: <span class="hljs-string">'post-'</span> + data.post_id, <span class="hljs-comment">// Used for available menu item Backbone models.</span>
					<span class="hljs-string">'title'</span>: itemName.val(),
					<span class="hljs-string">'type'</span>: itemType,
					<span class="hljs-string">'type_label'</span>: itemTypeLabel,
					<span class="hljs-string">'object'</span>: itemObject,
					<span class="hljs-string">'object_id'</span>: data.post_id,
					<span class="hljs-string">'url'</span>: data.url
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Add new item to menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				panel.currentMenuControl.addItemToMenu( availableItem.attributes );</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Add the new item to the list of available items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.Menus.availableMenuItemsPanel.collection.add( availableItem );
				$content = container.find( <span class="hljs-string">'.available-menu-items-list'</span> );
				itemElement = $( wp.template( <span class="hljs-string">'available-menu-item'</span> )( availableItem.attributes ) );
				itemElement.find( <span class="hljs-string">'.menu-item-handle:first'</span> ).addClass( <span class="hljs-string">'item-added'</span> );
				$content.prepend( itemElement );
				$content.scrollTop();</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Reset the create content form.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				itemName.val( <span class="hljs-string">''</span> ).removeAttr( <span class="hljs-string">'disabled'</span> );
				panel.addingNew = <span class="hljs-literal">false</span>;
				container.find( <span class="hljs-string">'.accordion-section-title'</span> ).removeClass( <span class="hljs-string">'loading'</span> );
			} );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Opens the panel.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		open: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuControl </span>) </span>{
			<span class="hljs-keyword">var</span> panel = <span class="hljs-keyword">this</span>, close;

			<span class="hljs-keyword">this</span>.currentMenuControl = menuControl;

			<span class="hljs-keyword">this</span>.itemSectionHeight();

			$( <span class="hljs-string">'body'</span> ).addClass( <span class="hljs-string">'adding-menu-items'</span> );

			close = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				panel.close();
				$( <span class="hljs-keyword">this</span> ).off( <span class="hljs-string">'click'</span>, close );
			};
			$( <span class="hljs-string">'#customize-preview'</span> ).on( <span class="hljs-string">'click'</span>, close );</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Collapse all controls.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			_( <span class="hljs-keyword">this</span>.currentMenuControl.getMenuItemControls() ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> control </span>) </span>{
				control.collapseForm();
			} );

			<span class="hljs-keyword">this</span>.$el.find( <span class="hljs-string">'.selected'</span> ).removeClass( <span class="hljs-string">'selected'</span> );

			<span class="hljs-keyword">this</span>.$search.focus();
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Closes the panel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		close: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> options </span>) </span>{
			options = options || {};

			<span class="hljs-keyword">if</span> ( options.returnFocus &amp;&amp; <span class="hljs-keyword">this</span>.currentMenuControl ) {
				<span class="hljs-keyword">this</span>.currentMenuControl.container.find( <span class="hljs-string">'.add-new-menu-item'</span> ).focus();
			}

			<span class="hljs-keyword">this</span>.currentMenuControl = <span class="hljs-literal">null</span>;
			<span class="hljs-keyword">this</span>.selected = <span class="hljs-literal">null</span>;

			$( <span class="hljs-string">'body'</span> ).removeClass( <span class="hljs-string">'adding-menu-items'</span> );
			$( <span class="hljs-string">'#available-menu-items .menu-item-handle.item-added'</span> ).removeClass( <span class="hljs-string">'item-added'</span> );

			<span class="hljs-keyword">this</span>.$search.val( <span class="hljs-string">''</span> );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Add a few keyboard enhancements to the panel.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		keyboardAccessible: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> isEnter = ( <span class="hljs-number">13</span> === event.which ),
				isEsc = ( <span class="hljs-number">27</span> === event.which ),
				isBackTab = ( <span class="hljs-number">9</span> === event.which &amp;&amp; event.shiftKey ),
				isSearchFocused = $( event.target ).is( <span class="hljs-keyword">this</span>.$search );</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>If enter pressed but nothing entered, dont do anything</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( isEnter &amp;&amp; ! <span class="hljs-keyword">this</span>.$search.val() ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( isSearchFocused &amp;&amp; isBackTab ) {
				<span class="hljs-keyword">this</span>.currentMenuControl.container.find( <span class="hljs-string">'.add-new-menu-item'</span> ).focus();
				event.preventDefault(); <span class="hljs-comment">// Avoid additional back-tab.</span>
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( isEsc ) {
				<span class="hljs-keyword">this</span>.close( { <span class="hljs-attr">returnFocus</span>: <span class="hljs-literal">true</span> } );
			}
		}
	});

	<span class="hljs-comment">/**
	 * wp.customize.Menus.MenusPanel
	 *
	 * Customizer panel for menus. This is used only for screen options management.
	 * Note that 'menus' must match the WP_Customize_Menu_Panel::$type.
	 *
	 * @constructor
	 * @augments wp.customize.Panel
	 */</span>
	api.Menus.MenusPanel = api.Panel.extend({

		<span class="hljs-attr">attachEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			api.Panel.prototype.attachEvents.call( <span class="hljs-keyword">this</span> );

			<span class="hljs-keyword">var</span> panel = <span class="hljs-keyword">this</span>,
				panelMeta = panel.container.find( <span class="hljs-string">'.panel-meta'</span> ),
				help = panelMeta.find( <span class="hljs-string">'.customize-help-toggle'</span> ),
				content = panelMeta.find( <span class="hljs-string">'.customize-panel-description'</span> ),
				options = $( <span class="hljs-string">'#screen-options-wrap'</span> ),
				button = panelMeta.find( <span class="hljs-string">'.customize-screen-options-toggle'</span> );
			button.on( <span class="hljs-string">'click keydown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( api.utils.isKeydownButNotEnterEvent( event ) ) {
					<span class="hljs-keyword">return</span>;
				}
				event.preventDefault();</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Hide description</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( content.not( <span class="hljs-string">':hidden'</span> ) ) {
					content.slideUp( <span class="hljs-string">'fast'</span> );
					help.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
				}

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'true'</span> === button.attr( <span class="hljs-string">'aria-expanded'</span> ) ) {
					button.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
					panelMeta.removeClass( <span class="hljs-string">'open'</span> );
					panelMeta.removeClass( <span class="hljs-string">'active-menu-screen-options'</span> );
					options.slideUp( <span class="hljs-string">'fast'</span> );
				} <span class="hljs-keyword">else</span> {
					button.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
					panelMeta.addClass( <span class="hljs-string">'open'</span> );
					panelMeta.addClass( <span class="hljs-string">'active-menu-screen-options'</span> );
					options.slideDown( <span class="hljs-string">'fast'</span> );
				}

				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Help toggle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			help.on( <span class="hljs-string">'click keydown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( api.utils.isKeydownButNotEnterEvent( event ) ) {
					<span class="hljs-keyword">return</span>;
				}
				event.preventDefault();

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'true'</span> === button.attr( <span class="hljs-string">'aria-expanded'</span> ) ) {
					button.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
					help.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
					panelMeta.addClass( <span class="hljs-string">'open'</span> );
					panelMeta.removeClass( <span class="hljs-string">'active-menu-screen-options'</span> );
					options.slideUp( <span class="hljs-string">'fast'</span> );
					content.slideDown( <span class="hljs-string">'fast'</span> );
				}
			} );
		},

		<span class="hljs-comment">/**
		 * Update field visibility when clicking on the field toggles.
		 */</span>
		ready: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> panel = <span class="hljs-keyword">this</span>;
			panel.container.find( <span class="hljs-string">'.hide-column-tog'</span> ).click( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				panel.saveManageColumnsState();
			});
		},

		<span class="hljs-comment">/**
		 * Save hidden column states.
		 *
		 * @since 4.3.0
		 * @private
		 *
		 * @returns {void}
		 */</span>
		saveManageColumnsState: _.debounce( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> panel = <span class="hljs-keyword">this</span>;
			<span class="hljs-keyword">if</span> ( panel._updateHiddenColumnsRequest ) {
				panel._updateHiddenColumnsRequest.abort();
			}

			panel._updateHiddenColumnsRequest = wp.ajax.post( <span class="hljs-string">'hidden-columns'</span>, {
				<span class="hljs-attr">hidden</span>: panel.hidden(),
				<span class="hljs-attr">screenoptionnonce</span>: $( <span class="hljs-string">'#screenoptionnonce'</span> ).val(),
				<span class="hljs-attr">page</span>: <span class="hljs-string">'nav-menus'</span>
			} );
			panel._updateHiddenColumnsRequest.always( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				panel._updateHiddenColumnsRequest = <span class="hljs-literal">null</span>;
			} );
		}, <span class="hljs-number">2000</span> ),

		<span class="hljs-comment">/**
		 * @deprecated Since 4.7.0 now that the nav_menu sections are responsible for toggling the classes on their own containers.
		 */</span>
		checked: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{},

		<span class="hljs-comment">/**
		 * @deprecated Since 4.7.0 now that the nav_menu sections are responsible for toggling the classes on their own containers.
		 */</span>
		unchecked: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{},

		<span class="hljs-comment">/**
		 * Get hidden fields.
		 *
		 * @since 4.3.0
		 * @private
		 *
		 * @returns {Array} Fields (columns) that are hidden.
		 */</span>
		hidden: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">return</span> $( <span class="hljs-string">'.hide-column-tog'</span> ).not( <span class="hljs-string">':checked'</span> ).map( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> id = <span class="hljs-keyword">this</span>.id;
				<span class="hljs-keyword">return</span> id.substring( <span class="hljs-number">0</span>, id.length - <span class="hljs-number">5</span> );
			}).get().join( <span class="hljs-string">','</span> );
		}
	} );

	<span class="hljs-comment">/**
	 * wp.customize.Menus.MenuSection
	 *
	 * Customizer section for menus. This is used only for lazy-loading child controls.
	 * Note that 'nav_menu' must match the WP_Customize_Menu_Section::$type.
	 *
	 * @constructor
	 * @augments wp.customize.Section
	 */</span>
	api.Menus.MenuSection = api.Section.extend({

		<span class="hljs-comment">/**
		 * Initialize.
		 *
		 * @since 4.3.0
		 *
		 * @param {String} id
		 * @param {Object} options
		 */</span>
		initialize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> id, options </span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>;
			api.Section.prototype.initialize.call( section, id, options );
			section.deferred.initSortables = $.Deferred();
		},

		<span class="hljs-comment">/**
		 * Ready.
		 */</span>
		ready: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>, fieldActiveToggles, handleFieldActiveToggle;

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> section.params.menu_id ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'params.menu_id was not defined'</span> );
			}

			<span class="hljs-comment">/*
			 * Since newly created sections won't be registered in PHP, we need to prevent the
			 * preview's sending of the activeSections to result in this control
			 * being deactivated when the preview refreshes. So we can hook onto
			 * the setting that has the same ID and its presence can dictate
			 * whether the section is active.
			 */</span>
			section.active.validate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( ! api.has( section.id ) ) {
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
				<span class="hljs-keyword">return</span> !! api( section.id ).get();
			};

			section.populateControls();

			section.navMenuLocationSettings = {};
			section.assignedLocations = <span class="hljs-keyword">new</span> api.Value( [] );

			api.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting, id </span>) </span>{
				<span class="hljs-keyword">var</span> matches = id.match( <span class="hljs-regexp">/^nav_menu_locations\[(.+?)]/</span> );
				<span class="hljs-keyword">if</span> ( matches ) {
					section.navMenuLocationSettings[ matches[<span class="hljs-number">1</span>] ] = setting;
					setting.bind( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						section.refreshAssignedLocations();
					});
				}
			});

			section.assignedLocations.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> to </span>) </span>{
				section.updateAssignedLocationsInSectionTitle( to );
			});

			section.refreshAssignedLocations();

			api.bind( <span class="hljs-string">'pane-contents-reflowed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Skip menus that have been removed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ! section.contentContainer.parent().length ) {
					<span class="hljs-keyword">return</span>;
				}
				section.container.find( <span class="hljs-string">'.menu-item .menu-item-reorder-nav button'</span> ).attr({ <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'0'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'false'</span> });
				section.container.find( <span class="hljs-string">'.menu-item.move-up-disabled .menus-move-up'</span> ).attr({ <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span> });
				section.container.find( <span class="hljs-string">'.menu-item.move-down-disabled .menus-move-down'</span> ).attr({ <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span> });
				section.container.find( <span class="hljs-string">'.menu-item.move-left-disabled .menus-move-left'</span> ).attr({ <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span> });
				section.container.find( <span class="hljs-string">'.menu-item.move-right-disabled .menus-move-right'</span> ).attr({ <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span> });
			} );

			<span class="hljs-comment">/**
			 * Update the active field class for the content container for a given checkbox toggle.
			 *
			 * @this {jQuery}
			 * @returns {void}
			 */</span>
			handleFieldActiveToggle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> className = <span class="hljs-string">'field-'</span> + $( <span class="hljs-keyword">this</span> ).val() + <span class="hljs-string">'-active'</span>;
				section.contentContainer.toggleClass( className, $( <span class="hljs-keyword">this</span> ).prop( <span class="hljs-string">'checked'</span> ) );
			};
			fieldActiveToggles = api.panel( <span class="hljs-string">'nav_menus'</span> ).contentContainer.find( <span class="hljs-string">'.metabox-prefs:first'</span> ).find( <span class="hljs-string">'.hide-column-tog'</span> );
			fieldActiveToggles.each( handleFieldActiveToggle );
			fieldActiveToggles.on( <span class="hljs-string">'click'</span>, handleFieldActiveToggle );
		},

		<span class="hljs-attr">populateControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>, menuNameControlId, menuAutoAddControlId, menuControl, menuNameControl, menuAutoAddControl;</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Add the control for managing the menu name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menuNameControlId = section.id + <span class="hljs-string">'[name]'</span>;
			menuNameControl = api.control( menuNameControlId );
			<span class="hljs-keyword">if</span> ( ! menuNameControl ) {
				menuNameControl = <span class="hljs-keyword">new</span> api.controlConstructor.nav_menu_name( menuNameControlId, {
					<span class="hljs-attr">params</span>: {
						<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu_name'</span>,
						<span class="hljs-attr">content</span>: <span class="hljs-string">'&lt;li id="customize-control-'</span> + section.id.replace( <span class="hljs-string">'['</span>, <span class="hljs-string">'-'</span> ).replace( <span class="hljs-string">']'</span>, <span class="hljs-string">''</span> ) + <span class="hljs-string">'-name" class="customize-control customize-control-nav_menu_name"&gt;&lt;/li&gt;'</span>, <span class="hljs-comment">// @todo core should do this for us; see #30741</span>
						label: api.Menus.data.l10n.menuNameLabel,
						<span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
						<span class="hljs-attr">section</span>: section.id,
						<span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>,
						<span class="hljs-attr">settings</span>: {
							<span class="hljs-string">'default'</span>: section.id
						}
					}
				} );
				api.control.add( menuNameControl.id, menuNameControl );
				menuNameControl.active.set( <span class="hljs-literal">true</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Add the menu control.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menuControl = api.control( section.id );
			<span class="hljs-keyword">if</span> ( ! menuControl ) {
				menuControl = <span class="hljs-keyword">new</span> api.controlConstructor.nav_menu( section.id, {
					<span class="hljs-attr">params</span>: {
						<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu'</span>,
						<span class="hljs-attr">content</span>: <span class="hljs-string">'&lt;li id="customize-control-'</span> + section.id.replace( <span class="hljs-string">'['</span>, <span class="hljs-string">'-'</span> ).replace( <span class="hljs-string">']'</span>, <span class="hljs-string">''</span> ) + <span class="hljs-string">'" class="customize-control customize-control-nav_menu"&gt;&lt;/li&gt;'</span>, <span class="hljs-comment">// @todo core should do this for us; see #30741</span>
						section: section.id,
						<span class="hljs-attr">priority</span>: <span class="hljs-number">998</span>,
						<span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
						<span class="hljs-attr">settings</span>: {
							<span class="hljs-string">'default'</span>: section.id
						},
						<span class="hljs-attr">menu_id</span>: section.params.menu_id
					}
				} );
				api.control.add( menuControl.id, menuControl );
				menuControl.active.set( <span class="hljs-literal">true</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Add the control for managing the menu auto_add.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menuAutoAddControlId = section.id + <span class="hljs-string">'[auto_add]'</span>;
			menuAutoAddControl = api.control( menuAutoAddControlId );
			<span class="hljs-keyword">if</span> ( ! menuAutoAddControl ) {
				menuAutoAddControl = <span class="hljs-keyword">new</span> api.controlConstructor.nav_menu_auto_add( menuAutoAddControlId, {
					<span class="hljs-attr">params</span>: {
						<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu_auto_add'</span>,
						<span class="hljs-attr">content</span>: <span class="hljs-string">'&lt;li id="customize-control-'</span> + section.id.replace( <span class="hljs-string">'['</span>, <span class="hljs-string">'-'</span> ).replace( <span class="hljs-string">']'</span>, <span class="hljs-string">''</span> ) + <span class="hljs-string">'-auto-add" class="customize-control customize-control-nav_menu_auto_add"&gt;&lt;/li&gt;'</span>, <span class="hljs-comment">// @todo core should do this for us</span>
						label: <span class="hljs-string">''</span>,
						<span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
						<span class="hljs-attr">section</span>: section.id,
						<span class="hljs-attr">priority</span>: <span class="hljs-number">999</span>,
						<span class="hljs-attr">settings</span>: {
							<span class="hljs-string">'default'</span>: section.id
						}
					}
				} );
				api.control.add( menuAutoAddControl.id, menuAutoAddControl );
				menuAutoAddControl.active.set( <span class="hljs-literal">true</span> );
			}

		},

		<span class="hljs-comment">/**
		 *
		 */</span>
		refreshAssignedLocations: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>,
				menuTermId = section.params.menu_id,
				currentAssignedLocations = [];
			_.each( section.navMenuLocationSettings, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting, themeLocation </span>) </span>{
				<span class="hljs-keyword">if</span> ( setting() === menuTermId ) {
					currentAssignedLocations.push( themeLocation );
				}
			});
			section.assignedLocations.set( currentAssignedLocations );
		},

		<span class="hljs-comment">/**
		 * @param {Array} themeLocationSlugs Theme location slugs.
		 */</span>
		updateAssignedLocationsInSectionTitle: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> themeLocationSlugs </span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>,
				$title;

			$title = section.container.find( <span class="hljs-string">'.accordion-section-title:first'</span> );
			$title.find( <span class="hljs-string">'.menu-in-location'</span> ).remove();
			_.each( themeLocationSlugs, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> themeLocationSlug </span>) </span>{
				<span class="hljs-keyword">var</span> $label, locationName;
				$label = $( <span class="hljs-string">'&lt;span class="menu-in-location"&gt;&lt;/span&gt;'</span> );
				locationName = api.Menus.data.locationSlugMappedToName[ themeLocationSlug ];
				$label.text( api.Menus.data.l10n.menuLocation.replace( <span class="hljs-string">'%s'</span>, locationName ) );
				$title.append( $label );
			});

			section.container.toggleClass( <span class="hljs-string">'assigned-to-menu-location'</span>, <span class="hljs-number">0</span> !== themeLocationSlugs.length );

		},

		<span class="hljs-attr">onChangeExpanded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> expanded, args </span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>, completeCallback;

			<span class="hljs-keyword">if</span> ( expanded ) {
				wpNavMenu.menuList = section.contentContainer;
				wpNavMenu.targetList = wpNavMenu.menuList;</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Add attributes needed by wpNavMenu</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$( <span class="hljs-string">'#menu-to-edit'</span> ).removeAttr( <span class="hljs-string">'id'</span> );
				wpNavMenu.menuList.attr( <span class="hljs-string">'id'</span>, <span class="hljs-string">'menu-to-edit'</span> ).addClass( <span class="hljs-string">'menu'</span> );

				_.each( api.section( section.id ).controls(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> control </span>) </span>{
					<span class="hljs-keyword">if</span> ( <span class="hljs-string">'nav_menu_item'</span> === control.params.type ) {
						control.actuallyEmbed();
					}
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Make sure Sortables is initialized after the section has been expanded to prevent <code>offset</code> issues.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( args.completeCallback ) {
					completeCallback = args.completeCallback;
				}
				args.completeCallback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">if</span> ( <span class="hljs-string">'resolved'</span> !== section.deferred.initSortables.state() ) {
						wpNavMenu.initSortables(); <span class="hljs-comment">// Depends on menu-to-edit ID being set above.</span>
						section.deferred.initSortables.resolve( wpNavMenu.menuList ); <span class="hljs-comment">// Now MenuControl can extend the sortable.</span></pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>@todo Note that wp.customize.reflowPaneContents() is debounced, so this immediate change will show a slight flicker while priorities get updated.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						api.control( <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( section.params.menu_id ) + <span class="hljs-string">']'</span> ).reflowMenuItems();
					}
					<span class="hljs-keyword">if</span> ( _.isFunction( completeCallback ) ) {
						completeCallback();
					}
				};
			}
			api.Section.prototype.onChangeExpanded.call( section, expanded, args );
		}
	});

	<span class="hljs-comment">/**
	 * wp.customize.Menus.NewMenuSection
	 *
	 * Customizer section for new menus.
	 * Note that 'new_menu' must match the WP_Customize_New_Menu_Section::$type.
	 *
	 * @constructor
	 * @augments wp.customize.Section
	 */</span>
	api.Menus.NewMenuSection = api.Section.extend({

		<span class="hljs-comment">/**
		 * Add behaviors for the accordion section.
		 *
		 * @since 4.3.0
		 */</span>
		attachEvents: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>;
			<span class="hljs-keyword">this</span>.container.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.add-menu-toggle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( section.expanded() ) {
					section.collapse();
				} <span class="hljs-keyword">else</span> {
					section.expand();
				}
			});
		},

		<span class="hljs-comment">/**
		 * Update UI to reflect expanded state.
		 *
		 * @since 4.1.0
		 *
		 * @param {Boolean} expanded
		 */</span>
		onChangeExpanded: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> expanded </span>) </span>{
			<span class="hljs-keyword">var</span> section = <span class="hljs-keyword">this</span>,
				button = section.container.find( <span class="hljs-string">'.add-menu-toggle'</span> ),
				content = section.contentContainer,
				customizer = section.headContainer.closest( <span class="hljs-string">'.wp-full-overlay-sidebar-content'</span> );
			<span class="hljs-keyword">if</span> ( expanded ) {
				button.addClass( <span class="hljs-string">'open'</span> );
				button.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
				content.slideDown( <span class="hljs-string">'fast'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					customizer.scrollTop( customizer.height() );
				});
			} <span class="hljs-keyword">else</span> {
				button.removeClass( <span class="hljs-string">'open'</span> );
				button.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
				content.slideUp( <span class="hljs-string">'fast'</span> );
				content.find( <span class="hljs-string">'.menu-name-field'</span> ).removeClass( <span class="hljs-string">'invalid'</span> );
			}
		},

		<span class="hljs-comment">/**
		 * Find the content element.
		 *
		 * @since 4.7.0
		 *
		 * @returns {jQuery} Content UL element.
		 */</span>
		getContent: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.container.find( <span class="hljs-string">'ul:first'</span> );
		}
	});

	<span class="hljs-comment">/**
	 * wp.customize.Menus.MenuLocationControl
	 *
	 * Customizer control for menu locations (rendered as a &lt;select&gt;).
	 * Note that 'nav_menu_location' must match the WP_Customize_Nav_Menu_Location_Control::$type.
	 *
	 * @constructor
	 * @augments wp.customize.Control
	 */</span>
	api.Menus.MenuLocationControl = api.Control.extend({
		<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> id, options </span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				matches = id.match( <span class="hljs-regexp">/^nav_menu_locations\[(.+?)]/</span> );
			control.themeLocation = matches[<span class="hljs-number">1</span>];
			api.Control.prototype.initialize.call( control, id, options );
		},

		<span class="hljs-attr">ready</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>, navMenuIdRegex = <span class="hljs-regexp">/^nav_menu\[(-?\d+)]/</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>@todo It would be better if this was added directly on the setting itself, as opposed to the control.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			control.setting.validate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> value </span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> === value ) {
					<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>( value, <span class="hljs-number">10</span> );
				}
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Edit menu button.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			control.container.find( <span class="hljs-string">'.edit-menu'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> menuId = control.setting();
				api.section( <span class="hljs-string">'nav_menu['</span> + menuId + <span class="hljs-string">']'</span> ).focus();
			});
			control.setting.bind( <span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === control.setting() ) {
					control.container.find( <span class="hljs-string">'.edit-menu'</span> ).addClass( <span class="hljs-string">'hidden'</span> );
				} <span class="hljs-keyword">else</span> {
					control.container.find( <span class="hljs-string">'.edit-menu'</span> ).removeClass( <span class="hljs-string">'hidden'</span> );
				}
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Add/remove menus from the available options when they are added and removed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.bind( <span class="hljs-string">'add'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting </span>) </span>{
				<span class="hljs-keyword">var</span> option, menuId, matches = setting.id.match( navMenuIdRegex );
				<span class="hljs-keyword">if</span> ( ! matches || <span class="hljs-literal">false</span> === setting() ) {
					<span class="hljs-keyword">return</span>;
				}
				menuId = matches[<span class="hljs-number">1</span>];
				option = <span class="hljs-keyword">new</span> Option( displayNavMenuName( setting().name ), menuId );
				control.container.find( <span class="hljs-string">'select'</span> ).append( option );
			});
			api.bind( <span class="hljs-string">'remove'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting </span>) </span>{
				<span class="hljs-keyword">var</span> menuId, matches = setting.id.match( navMenuIdRegex );
				<span class="hljs-keyword">if</span> ( ! matches ) {
					<span class="hljs-keyword">return</span>;
				}
				menuId = <span class="hljs-built_in">parseInt</span>( matches[<span class="hljs-number">1</span>], <span class="hljs-number">10</span> );
				<span class="hljs-keyword">if</span> ( control.setting() === menuId ) {
					control.setting.set( <span class="hljs-string">''</span> );
				}
				control.container.find( <span class="hljs-string">'option[value='</span> + menuId + <span class="hljs-string">']'</span> ).remove();
			});
			api.bind( <span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting </span>) </span>{
				<span class="hljs-keyword">var</span> menuId, matches = setting.id.match( navMenuIdRegex );
				<span class="hljs-keyword">if</span> ( ! matches ) {
					<span class="hljs-keyword">return</span>;
				}
				menuId = <span class="hljs-built_in">parseInt</span>( matches[<span class="hljs-number">1</span>], <span class="hljs-number">10</span> );
				<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === setting() ) {
					<span class="hljs-keyword">if</span> ( control.setting() === menuId ) {
						control.setting.set( <span class="hljs-string">''</span> );
					}
					control.container.find( <span class="hljs-string">'option[value='</span> + menuId + <span class="hljs-string">']'</span> ).remove();
				} <span class="hljs-keyword">else</span> {
					control.container.find( <span class="hljs-string">'option[value='</span> + menuId + <span class="hljs-string">']'</span> ).text( displayNavMenuName( setting().name ) );
				}
			});
		}
	});

	<span class="hljs-comment">/**
	 * wp.customize.Menus.MenuItemControl
	 *
	 * Customizer control for menu items.
	 * Note that 'menu_item' must match the WP_Customize_Menu_Item_Control::$type.
	 *
	 * @constructor
	 * @augments wp.customize.Control
	 */</span>
	api.Menus.MenuItemControl = api.Control.extend({

		<span class="hljs-comment">/**
		 * @inheritdoc
		 */</span>
		initialize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> id, options </span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>;
			control.expanded = <span class="hljs-keyword">new</span> api.Value( <span class="hljs-literal">false</span> );
			control.expandedArgumentsQueue = [];
			control.expanded.bind( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> expanded </span>) </span>{
				<span class="hljs-keyword">var</span> args = control.expandedArgumentsQueue.shift();
				args = $.extend( {}, control.defaultExpandedArguments, args );
				control.onChangeExpanded( expanded, args );
			});
			api.Control.prototype.initialize.call( control, id, options );
			control.active.validate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> value, section = api.section( control.section() );
				<span class="hljs-keyword">if</span> ( section ) {
					value = section.active();
				} <span class="hljs-keyword">else</span> {
					value = <span class="hljs-literal">false</span>;
				}
				<span class="hljs-keyword">return</span> value;
			};
		},

		<span class="hljs-comment">/**
		 * Override the embed() method to do nothing,
		 * so that the control isn't embedded on load,
		 * unless the containing section is already expanded.
		 *
		 * @since 4.3.0
		 */</span>
		embed: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				sectionId = control.section(),
				section;
			<span class="hljs-keyword">if</span> ( ! sectionId ) {
				<span class="hljs-keyword">return</span>;
			}
			section = api.section( sectionId );
			<span class="hljs-keyword">if</span> ( ( section &amp;&amp; section.expanded() ) || api.settings.autofocus.control === control.id ) {
				control.actuallyEmbed();
			}
		},

		<span class="hljs-comment">/**
		 * This function is called in Section.onChangeExpanded() so the control
		 * will only get embedded when the Section is first expanded.
		 *
		 * @since 4.3.0
		 */</span>
		actuallyEmbed: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>;
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'resolved'</span> === control.deferred.embedded.state() ) {
				<span class="hljs-keyword">return</span>;
			}
			control.renderContent();
			control.deferred.embedded.resolve(); <span class="hljs-comment">// This triggers control.ready().</span>
		},

		<span class="hljs-comment">/**
		 * Set up the control.
		 */</span>
		ready: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.params.menu_item_id ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'params.menu_item_id was not defined'</span> );
			}

			<span class="hljs-keyword">this</span>._setupControlToggle();
			<span class="hljs-keyword">this</span>._setupReorderUI();
			<span class="hljs-keyword">this</span>._setupUpdateUI();
			<span class="hljs-keyword">this</span>._setupRemoveUI();
			<span class="hljs-keyword">this</span>._setupLinksUI();
			<span class="hljs-keyword">this</span>._setupTitleUI();
		},

		<span class="hljs-comment">/**
		 * Show/hide the settings when clicking on the menu item handle.
		 */</span>
		_setupControlToggle: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>;

			<span class="hljs-keyword">this</span>.container.find( <span class="hljs-string">'.menu-item-handle'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> e </span>) </span>{
				e.preventDefault();
				e.stopPropagation();
				<span class="hljs-keyword">var</span> menuControl = control.getMenuControl(),
					isDeleteBtn = $( e.target ).is( <span class="hljs-string">'.item-delete, .item-delete *'</span> ),
					isAddNewBtn = $( e.target ).is( <span class="hljs-string">'.add-new-menu-item, .add-new-menu-item *'</span> );

				<span class="hljs-keyword">if</span> ( $( <span class="hljs-string">'body'</span> ).hasClass( <span class="hljs-string">'adding-menu-items'</span> ) &amp;&amp; ! isDeleteBtn &amp;&amp; ! isAddNewBtn ) {
					api.Menus.availableMenuItemsPanel.close();
				}

				<span class="hljs-keyword">if</span> ( menuControl.isReordering || menuControl.isSorting ) {
					<span class="hljs-keyword">return</span>;
				}
				control.toggleForm();
			} );
		},

		<span class="hljs-comment">/**
		 * Set up the menu-item-reorder-nav
		 */</span>
		_setupReorderUI: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>, template, $reorderNav;

			template = wp.template( <span class="hljs-string">'menu-item-reorder-nav'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Add the menu item reordering elements to the menu item control.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			control.container.find( <span class="hljs-string">'.item-controls'</span> ).after( template );</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Handle clicks for up/down/left-right on the reorder nav.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$reorderNav = control.container.find( <span class="hljs-string">'.menu-item-reorder-nav'</span> );
			$reorderNav.find( <span class="hljs-string">'.menus-move-up, .menus-move-down, .menus-move-left, .menus-move-right'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> moveBtn = $( <span class="hljs-keyword">this</span> );
				moveBtn.focus();

				<span class="hljs-keyword">var</span> isMoveUp = moveBtn.is( <span class="hljs-string">'.menus-move-up'</span> ),
					isMoveDown = moveBtn.is( <span class="hljs-string">'.menus-move-down'</span> ),
					isMoveLeft = moveBtn.is( <span class="hljs-string">'.menus-move-left'</span> ),
					isMoveRight = moveBtn.is( <span class="hljs-string">'.menus-move-right'</span> );

				<span class="hljs-keyword">if</span> ( isMoveUp ) {
					control.moveUp();
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( isMoveDown ) {
					control.moveDown();
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( isMoveLeft ) {
					control.moveLeft();
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( isMoveRight ) {
					control.moveRight();
				}

				moveBtn.focus(); <span class="hljs-comment">// Re-focus after the container was moved.</span>
			} );
		},

		<span class="hljs-comment">/**
		 * Set up event handlers for menu item updating.
		 */</span>
		_setupUpdateUI: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				settingValue = control.setting();

			control.elements = {};
			control.elements.url = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.edit-menu-item-url'</span> ) );
			control.elements.title = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.edit-menu-item-title'</span> ) );
			control.elements.attr_title = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.edit-menu-item-attr-title'</span> ) );
			control.elements.target = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.edit-menu-item-target'</span> ) );
			control.elements.classes = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.edit-menu-item-classes'</span> ) );
			control.elements.xfn = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.edit-menu-item-xfn'</span> ) );
			control.elements.description = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.edit-menu-item-description'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>@todo allow other elements, added by plugins, to be automatically picked up here; allow additional values to be added to setting array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
			_.each( control.elements, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> element, property </span>) </span>{
				element.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> value </span>) </span>{
					<span class="hljs-keyword">if</span> ( element.element.is( <span class="hljs-string">'input[type=checkbox]'</span> ) ) {
						value = ( value ) ? element.element.val() : <span class="hljs-string">''</span>;
					}

					<span class="hljs-keyword">var</span> settingValue = control.setting();
					<span class="hljs-keyword">if</span> ( settingValue &amp;&amp; settingValue[ property ] !== value ) {
						settingValue = _.clone( settingValue );
						settingValue[ property ] = value;
						control.setting.set( settingValue );
					}
				});
				<span class="hljs-keyword">if</span> ( settingValue ) {
					<span class="hljs-keyword">if</span> ( ( property === <span class="hljs-string">'classes'</span> || property === <span class="hljs-string">'xfn'</span> ) &amp;&amp; _.isArray( settingValue[ property ] ) ) {
						element.set( settingValue[ property ].join( <span class="hljs-string">' '</span> ) );
					} <span class="hljs-keyword">else</span> {
						element.set( settingValue[ property ] );
					}
				}
			});

			control.setting.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> to, from </span>) </span>{
				<span class="hljs-keyword">var</span> itemId = control.params.menu_item_id,
					followingSiblingItemControls = [],
					childrenItemControls = [],
					menuControl;

				<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === to ) {
					menuControl = api.control( <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( <span class="hljs-keyword">from</span>.nav_menu_term_id ) + <span class="hljs-string">']'</span> );
					control.container.remove();

					_.each( menuControl.getMenuItemControls(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> otherControl </span>) </span>{
						<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">from</span>.menu_item_parent === otherControl.setting().menu_item_parent &amp;&amp; otherControl.setting().position &gt; <span class="hljs-keyword">from</span>.position ) {
							followingSiblingItemControls.push( otherControl );
						} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( otherControl.setting().menu_item_parent === itemId ) {
							childrenItemControls.push( otherControl );
						}
					});</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Shift all following siblings by the number of children this item has.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					_.each( followingSiblingItemControls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> followingSiblingItemControl </span>) </span>{
						<span class="hljs-keyword">var</span> value = _.clone( followingSiblingItemControl.setting() );
						value.position += childrenItemControls.length;
						followingSiblingItemControl.setting.set( value );
					});</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Now move the children up to be the new subsequent siblings.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					_.each( childrenItemControls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> childrenItemControl, i </span>) </span>{
						<span class="hljs-keyword">var</span> value = _.clone( childrenItemControl.setting() );
						value.position = <span class="hljs-keyword">from</span>.position + i;
						value.menu_item_parent = <span class="hljs-keyword">from</span>.menu_item_parent;
						childrenItemControl.setting.set( value );
					});

					menuControl.debouncedReflowMenuItems();
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Update the elements values to match the new setting properties.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					_.each( to, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> value, key </span>) </span>{
						<span class="hljs-keyword">if</span> ( control.elements[ key] ) {
							control.elements[ key ].set( to[ key ] );
						}
					} );
					control.container.find( <span class="hljs-string">'.menu-item-data-parent-id'</span> ).val( to.menu_item_parent );</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Handle UI updates when the position or depth (parent) change.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( to.position !== <span class="hljs-keyword">from</span>.position || to.menu_item_parent !== <span class="hljs-keyword">from</span>.menu_item_parent ) {
						control.getMenuControl().debouncedReflowMenuItems();
					}
				}
			});
		},

		<span class="hljs-comment">/**
		 * Set up event handlers for menu item deletion.
		 */</span>
		_setupRemoveUI: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>, $removeBtn;</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Configure delete button.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$removeBtn = control.container.find( <span class="hljs-string">'.item-delete'</span> );

			$removeBtn.on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Find an adjacent element to add focus to when this menu item goes away</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> addingItems = <span class="hljs-literal">true</span>, $adjacentFocusTarget, $next, $prev;

				<span class="hljs-keyword">if</span> ( ! $( <span class="hljs-string">'body'</span> ).hasClass( <span class="hljs-string">'adding-menu-items'</span> ) ) {
					addingItems = <span class="hljs-literal">false</span>;
				}

				$next = control.container.nextAll( <span class="hljs-string">'.customize-control-nav_menu_item:visible'</span> ).first();
				$prev = control.container.prevAll( <span class="hljs-string">'.customize-control-nav_menu_item:visible'</span> ).first();

				<span class="hljs-keyword">if</span> ( $next.length ) {
					$adjacentFocusTarget = $next.find( <span class="hljs-literal">false</span> === addingItems ? <span class="hljs-string">'.item-edit'</span> : <span class="hljs-string">'.item-delete'</span> ).first();
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $prev.length ) {
					$adjacentFocusTarget = $prev.find( <span class="hljs-literal">false</span> === addingItems ? <span class="hljs-string">'.item-edit'</span> : <span class="hljs-string">'.item-delete'</span> ).first();
				} <span class="hljs-keyword">else</span> {
					$adjacentFocusTarget = control.container.nextAll( <span class="hljs-string">'.customize-control-nav_menu'</span> ).find( <span class="hljs-string">'.add-new-menu-item'</span> ).first();
				}

				control.container.slideUp( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					control.setting.set( <span class="hljs-literal">false</span> );
					wp.a11y.speak( api.Menus.data.l10n.itemDeleted );
					$adjacentFocusTarget.focus(); <span class="hljs-comment">// keyboard accessibility</span>
				} );
			} );
		},

		<span class="hljs-attr">_setupLinksUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $origBtn;</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Configure original link.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$origBtn = <span class="hljs-keyword">this</span>.container.find( <span class="hljs-string">'a.original-link'</span> );

			$origBtn.on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> e </span>) </span>{
				e.preventDefault();
				api.previewer.previewUrl( e.target.toString() );
			} );
		},

		<span class="hljs-comment">/**
		 * Update item handle title when changed.
		 */</span>
		_setupTitleUI: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>, titleEl;</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Ensure that whitespace is trimmed on blur so placeholder can be shown.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			control.container.find( <span class="hljs-string">'.edit-menu-item-title'</span> ).on( <span class="hljs-string">'blur'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				$( <span class="hljs-keyword">this</span> ).val( $.trim( $( <span class="hljs-keyword">this</span> ).val() ) );
			} );

			titleEl = control.container.find( <span class="hljs-string">'.menu-item-title'</span> );
			control.setting.bind( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> item </span>) </span>{
				<span class="hljs-keyword">var</span> trimmedTitle, titleText;
				<span class="hljs-keyword">if</span> ( ! item ) {
					<span class="hljs-keyword">return</span>;
				}
				trimmedTitle = $.trim( item.title );

				titleText = trimmedTitle || item.original_title || api.Menus.data.l10n.untitled;

				<span class="hljs-keyword">if</span> ( item._invalid ) {
					titleText = api.Menus.data.l10n.invalidTitleTpl.replace( <span class="hljs-string">'%s'</span>, titleText );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Dont update to an empty title.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( trimmedTitle || item.original_title ) {
					titleEl
						.text( titleText )
						.removeClass( <span class="hljs-string">'no-title'</span> );
				} <span class="hljs-keyword">else</span> {
					titleEl
						.text( titleText )
						.addClass( <span class="hljs-string">'no-title'</span> );
				}
			} );
		},

		<span class="hljs-comment">/**
		 *
		 * @returns {number}
		 */</span>
		getDepth: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>, setting = control.setting(), depth = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">if</span> ( ! setting ) {
				<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
			}
			<span class="hljs-keyword">while</span> ( setting &amp;&amp; setting.menu_item_parent ) {
				depth += <span class="hljs-number">1</span>;
				control = api.control( <span class="hljs-string">'nav_menu_item['</span> + setting.menu_item_parent + <span class="hljs-string">']'</span> );
				<span class="hljs-keyword">if</span> ( ! control ) {
					<span class="hljs-keyword">break</span>;
				}
				setting = control.setting();
			}
			<span class="hljs-keyword">return</span> depth;
		},

		<span class="hljs-comment">/**
		 * Amend the control's params with the data necessary for the JS template just in time.
		 */</span>
		renderContent: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				settingValue = control.setting(),
				containerClasses;

			control.params.title = settingValue.title || <span class="hljs-string">''</span>;
			control.params.depth = control.getDepth();
			control.container.data( <span class="hljs-string">'item-depth'</span>, control.params.depth );
			containerClasses = [
				<span class="hljs-string">'menu-item'</span>,
				<span class="hljs-string">'menu-item-depth-'</span> + <span class="hljs-built_in">String</span>( control.params.depth ),
				<span class="hljs-string">'menu-item-'</span> + settingValue.object,
				<span class="hljs-string">'menu-item-edit-inactive'</span>
			];

			<span class="hljs-keyword">if</span> ( settingValue._invalid ) {
				containerClasses.push( <span class="hljs-string">'menu-item-invalid'</span> );
				control.params.title = api.Menus.data.l10n.invalidTitleTpl.replace( <span class="hljs-string">'%s'</span>, control.params.title );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'draft'</span> === settingValue.status ) {
				containerClasses.push( <span class="hljs-string">'pending'</span> );
				control.params.title = api.Menus.data.pendingTitleTpl.replace( <span class="hljs-string">'%s'</span>, control.params.title );
			}

			control.params.el_classes = containerClasses.join( <span class="hljs-string">' '</span> );
			control.params.item_type_label = settingValue.type_label;
			control.params.item_type = settingValue.type;
			control.params.url = settingValue.url;
			control.params.target = settingValue.target;
			control.params.attr_title = settingValue.attr_title;
			control.params.classes = _.isArray( settingValue.classes ) ? settingValue.classes.join( <span class="hljs-string">' '</span> ) : settingValue.classes;
			control.params.attr_title = settingValue.attr_title;
			control.params.xfn = settingValue.xfn;
			control.params.description = settingValue.description;
			control.params.parent = settingValue.menu_item_parent;
			control.params.original_title = settingValue.original_title || <span class="hljs-string">''</span>;

			control.container.addClass( control.params.el_classes );

			api.Control.prototype.renderContent.call( control );
		},

		<span class="hljs-comment">/***********************************************************************
		 * Begin public API methods
		 **********************************************************************/</span>

		<span class="hljs-comment">/**
		 * @return {wp.customize.controlConstructor.nav_menu|null}
		 */</span>
		getMenuControl: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>, settingValue = control.setting();
			<span class="hljs-keyword">if</span> ( settingValue &amp;&amp; settingValue.nav_menu_term_id ) {
				<span class="hljs-keyword">return</span> api.control( <span class="hljs-string">'nav_menu['</span> + settingValue.nav_menu_term_id + <span class="hljs-string">']'</span> );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
			}
		},

		<span class="hljs-comment">/**
		 * Expand the accordion section containing a control
		 */</span>
		expandControlSection: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> $section = <span class="hljs-keyword">this</span>.container.closest( <span class="hljs-string">'.accordion-section'</span> );
			<span class="hljs-keyword">if</span> ( ! $section.hasClass( <span class="hljs-string">'open'</span> ) ) {
				$section.find( <span class="hljs-string">'.accordion-section-title:first'</span> ).trigger( <span class="hljs-string">'click'</span> );
			}
		},

		<span class="hljs-comment">/**
		 * @since 4.6.0
		 *
		 * @param {Boolean} expanded
		 * @param {Object} [params]
		 * @returns {Boolean} false if state already applied
		 */</span>
		_toggleExpanded: api.Section.prototype._toggleExpanded,

		<span class="hljs-comment">/**
		 * @since 4.6.0
		 *
		 * @param {Object} [params]
		 * @returns {Boolean} false if already expanded
		 */</span>
		expand: api.Section.prototype.expand,

		<span class="hljs-comment">/**
		 * Expand the menu item form control.
		 *
		 * @since 4.5.0 Added params.completeCallback.
		 *
		 * @param {Object}   [params] - Optional params.
		 * @param {Function} [params.completeCallback] - Function to call when the form toggle has finished animating.
		 */</span>
		expandForm: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> params </span>) </span>{
			<span class="hljs-keyword">this</span>.expand( params );
		},

		<span class="hljs-comment">/**
		 * @since 4.6.0
		 *
		 * @param {Object} [params]
		 * @returns {Boolean} false if already collapsed
		 */</span>
		collapse: api.Section.prototype.collapse,

		<span class="hljs-comment">/**
		 * Collapse the menu item form control.
		 *
		 * @since 4.5.0 Added params.completeCallback.
		 *
		 * @param {Object}   [params] - Optional params.
		 * @param {Function} [params.completeCallback] - Function to call when the form toggle has finished animating.
		 */</span>
		collapseForm: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> params </span>) </span>{
			<span class="hljs-keyword">this</span>.collapse( params );
		},

		<span class="hljs-comment">/**
		 * Expand or collapse the menu item control.
		 *
		 * @deprecated this is poor naming, and it is better to directly set control.expanded( showOrHide )
		 * @since 4.5.0 Added params.completeCallback.
		 *
		 * @param {boolean}  [showOrHide] - If not supplied, will be inverse of current visibility
		 * @param {Object}   [params] - Optional params.
		 * @param {Function} [params.completeCallback] - Function to call when the form toggle has finished animating.
		 */</span>
		toggleForm: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> showOrHide, params </span>) </span>{
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> showOrHide === <span class="hljs-string">'undefined'</span> ) {
				showOrHide = ! <span class="hljs-keyword">this</span>.expanded();
			}
			<span class="hljs-keyword">if</span> ( showOrHide ) {
				<span class="hljs-keyword">this</span>.expand( params );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.collapse( params );
			}
		},

		<span class="hljs-comment">/**
		 * Expand or collapse the menu item control.
		 *
		 * @since 4.6.0
		 * @param {boolean}  [showOrHide] - If not supplied, will be inverse of current visibility
		 * @param {Object}   [params] - Optional params.
		 * @param {Function} [params.completeCallback] - Function to call when the form toggle has finished animating.
		 */</span>
		onChangeExpanded: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> showOrHide, params </span>) </span>{
			<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>, $menuitem, $inside, complete;

			$menuitem = <span class="hljs-keyword">this</span>.container;
			$inside = $menuitem.find( <span class="hljs-string">'.menu-item-settings:first'</span> );
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> showOrHide ) {
				showOrHide = ! $inside.is( <span class="hljs-string">':visible'</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Already expanded or collapsed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( $inside.is( <span class="hljs-string">':visible'</span> ) === showOrHide ) {
				<span class="hljs-keyword">if</span> ( params &amp;&amp; params.completeCallback ) {
					params.completeCallback();
				}
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( showOrHide ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Close all other menu item controls before expanding this one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.control.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> otherControl </span>) </span>{
					<span class="hljs-keyword">if</span> ( self.params.type === otherControl.params.type &amp;&amp; self !== otherControl ) {
						otherControl.collapseForm();
					}
				} );

				complete = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$menuitem
						.removeClass( <span class="hljs-string">'menu-item-edit-inactive'</span> )
						.addClass( <span class="hljs-string">'menu-item-edit-active'</span> );
					self.container.trigger( <span class="hljs-string">'expanded'</span> );

					<span class="hljs-keyword">if</span> ( params &amp;&amp; params.completeCallback ) {
						params.completeCallback();
					}
				};

				$menuitem.find( <span class="hljs-string">'.item-edit'</span> ).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
				$inside.slideDown( <span class="hljs-string">'fast'</span>, complete );

				self.container.trigger( <span class="hljs-string">'expand'</span> );
			} <span class="hljs-keyword">else</span> {
				complete = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$menuitem
						.addClass( <span class="hljs-string">'menu-item-edit-inactive'</span> )
						.removeClass( <span class="hljs-string">'menu-item-edit-active'</span> );
					self.container.trigger( <span class="hljs-string">'collapsed'</span> );

					<span class="hljs-keyword">if</span> ( params &amp;&amp; params.completeCallback ) {
						params.completeCallback();
					}
				};

				self.container.trigger( <span class="hljs-string">'collapse'</span> );

				$menuitem.find( <span class="hljs-string">'.item-edit'</span> ).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
				$inside.slideUp( <span class="hljs-string">'fast'</span>, complete );
			}
		},

		<span class="hljs-comment">/**
		 * Expand the containing menu section, expand the form, and focus on
		 * the first input in the control.
		 *
		 * @since 4.5.0 Added params.completeCallback.
		 *
		 * @param {Object}   [params] - Params object.
		 * @param {Function} [params.completeCallback] - Optional callback function when focus has completed.
		 */</span>
		focus: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> params </span>) </span>{
			params = params || {};
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>, originalCompleteCallback = params.completeCallback, focusControl;

			focusControl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				control.expandControlSection();

				params.completeCallback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> focusable;</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Note that we cant use :focusable due to a jQuery UI issue. See: <a href="https://github.com/jquery/jquery-ui/pull/1583">https://github.com/jquery/jquery-ui/pull/1583</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					focusable = control.container.find( <span class="hljs-string">'.menu-item-settings'</span> ).find( <span class="hljs-string">'input, select, textarea, button, object, a[href], [tabindex]'</span> ).filter( <span class="hljs-string">':visible'</span> );
					focusable.first().focus();

					<span class="hljs-keyword">if</span> ( originalCompleteCallback ) {
						originalCompleteCallback();
					}
				};

				control.expandForm( params );
			};

			<span class="hljs-keyword">if</span> ( api.section.has( control.section() ) ) {
				api.section( control.section() ).expand( {
					<span class="hljs-attr">completeCallback</span>: focusControl
				} );
			} <span class="hljs-keyword">else</span> {
				focusControl();
			}
		},

		<span class="hljs-comment">/**
		 * Move menu item up one in the menu.
		 */</span>
		moveUp: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">this</span>._changePosition( <span class="hljs-number">-1</span> );
			wp.a11y.speak( api.Menus.data.l10n.movedUp );
		},

		<span class="hljs-comment">/**
		 * Move menu item up one in the menu.
		 */</span>
		moveDown: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">this</span>._changePosition( <span class="hljs-number">1</span> );
			wp.a11y.speak( api.Menus.data.l10n.movedDown );
		},
		<span class="hljs-comment">/**
		 * Move menu item and all children up one level of depth.
		 */</span>
		moveLeft: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">this</span>._changeDepth( <span class="hljs-number">-1</span> );
			wp.a11y.speak( api.Menus.data.l10n.movedLeft );
		},

		<span class="hljs-comment">/**
		 * Move menu item and children one level deeper, as a submenu of the previous item.
		 */</span>
		moveRight: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">this</span>._changeDepth( <span class="hljs-number">1</span> );
			wp.a11y.speak( api.Menus.data.l10n.movedRight );
		},

		<span class="hljs-comment">/**
		 * Note that this will trigger a UI update, causing child items to
		 * move as well and cardinal order class names to be updated.
		 *
		 * @private
		 *
		 * @param {Number} offset 1|-1
		 */</span>
		_changePosition: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> offset </span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				adjacentSetting,
				settingValue = _.clone( control.setting() ),
				siblingSettings = [],
				realPosition;

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">1</span> !== offset &amp;&amp; <span class="hljs-number">-1</span> !== offset ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Offset changes by 1 are only supported.'</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Skip moving deleted items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( ! control.setting() ) {
				<span class="hljs-keyword">return</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Locate the other items under the same parent (siblings).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			_( control.getMenuControl().getMenuItemControls() ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> otherControl </span>) </span>{
				<span class="hljs-keyword">if</span> ( otherControl.setting().menu_item_parent === settingValue.menu_item_parent ) {
					siblingSettings.push( otherControl.setting );
				}
			});
			siblingSettings.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> a, b </span>) </span>{
				<span class="hljs-keyword">return</span> a().position - b().position;
			});

			realPosition = _.indexOf( siblingSettings, control.setting );
			<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> === realPosition ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected setting to be among siblings.'</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Skip doing anything if the item is already at the edge in the desired direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( ( realPosition === <span class="hljs-number">0</span> &amp;&amp; offset &lt; <span class="hljs-number">0</span> ) || ( realPosition === siblingSettings.length - <span class="hljs-number">1</span> &amp;&amp; offset &gt; <span class="hljs-number">0</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>@todo Should we allow a menu item to be moved up to break it out of a parent? Adopt with previous or following parent?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">return</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Update any adjacent menu item setting to take on this items position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			adjacentSetting = siblingSettings[ realPosition + offset ];
			<span class="hljs-keyword">if</span> ( adjacentSetting ) {
				adjacentSetting.set( $.extend(
					_.clone( adjacentSetting() ),
					{
						<span class="hljs-attr">position</span>: settingValue.position
					}
				) );
			}

			settingValue.position += offset;
			control.setting.set( settingValue );
		},

		<span class="hljs-comment">/**
		 * Note that this will trigger a UI update, causing child items to
		 * move as well and cardinal order class names to be updated.
		 *
		 * @private
		 *
		 * @param {Number} offset 1|-1
		 */</span>
		_changeDepth: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> offset </span>) </span>{
			<span class="hljs-keyword">if</span> ( <span class="hljs-number">1</span> !== offset &amp;&amp; <span class="hljs-number">-1</span> !== offset ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Offset changes by 1 are only supported.'</span> );
			}
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				settingValue = _.clone( control.setting() ),
				siblingControls = [],
				realPosition,
				siblingControl,
				parentControl;</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Locate the other items under the same parent (siblings).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			_( control.getMenuControl().getMenuItemControls() ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> otherControl </span>) </span>{
				<span class="hljs-keyword">if</span> ( otherControl.setting().menu_item_parent === settingValue.menu_item_parent ) {
					siblingControls.push( otherControl );
				}
			});
			siblingControls.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> a, b </span>) </span>{
				<span class="hljs-keyword">return</span> a.setting().position - b.setting().position;
			});

			realPosition = _.indexOf( siblingControls, control );
			<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> === realPosition ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected control to be among siblings.'</span> );
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> === offset ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Skip moving left an item that is already at the top level.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ! settingValue.menu_item_parent ) {
					<span class="hljs-keyword">return</span>;
				}

				parentControl = api.control( <span class="hljs-string">'nav_menu_item['</span> + settingValue.menu_item_parent + <span class="hljs-string">']'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Make this control the parent of all the following siblings.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				_( siblingControls ).chain().slice( realPosition ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> siblingControl, i </span>) </span>{
					siblingControl.setting.set(
						$.extend(
							{},
							siblingControl.setting(),
							{
								<span class="hljs-attr">menu_item_parent</span>: control.params.menu_item_id,
								<span class="hljs-attr">position</span>: i
							}
						)
					);
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Increase the positions of the parent items subsequent children to make room for this one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				_( control.getMenuControl().getMenuItemControls() ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> otherControl </span>) </span>{
					<span class="hljs-keyword">var</span> otherControlSettingValue, isControlToBeShifted;
					isControlToBeShifted = (
						otherControl.setting().menu_item_parent === parentControl.setting().menu_item_parent &amp;&amp;
						otherControl.setting().position &gt; parentControl.setting().position
					);
					<span class="hljs-keyword">if</span> ( isControlToBeShifted ) {
						otherControlSettingValue = _.clone( otherControl.setting() );
						otherControl.setting.set(
							$.extend(
								otherControlSettingValue,
								{ <span class="hljs-attr">position</span>: otherControlSettingValue.position + <span class="hljs-number">1</span> }
							)
						);
					}
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Make this control the following sibling of its parent item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				settingValue.position = parentControl.setting().position + <span class="hljs-number">1</span>;
				settingValue.menu_item_parent = parentControl.setting().menu_item_parent;
				control.setting.set( settingValue );

			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-number">1</span> === offset ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Skip moving right an item that doesnt have a previous sibling.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( realPosition === <span class="hljs-number">0</span> ) {
					<span class="hljs-keyword">return</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Make the control the last child of the previous sibling.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				siblingControl = siblingControls[ realPosition - <span class="hljs-number">1</span> ];
				settingValue.menu_item_parent = siblingControl.params.menu_item_id;
				settingValue.position = <span class="hljs-number">0</span>;
				_( control.getMenuControl().getMenuItemControls() ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> otherControl </span>) </span>{
					<span class="hljs-keyword">if</span> ( otherControl.setting().menu_item_parent === settingValue.menu_item_parent ) {
						settingValue.position = <span class="hljs-built_in">Math</span>.max( settingValue.position, otherControl.setting().position );
					}
				});
				settingValue.position += <span class="hljs-number">1</span>;
				control.setting.set( settingValue );
			}
		}
	} );

	<span class="hljs-comment">/**
	 * wp.customize.Menus.MenuNameControl
	 *
	 * Customizer control for a nav menu's name.
	 *
	 * @constructor
	 * @augments wp.customize.Control
	 */</span>
	api.Menus.MenuNameControl = api.Control.extend({

		<span class="hljs-attr">ready</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				settingValue = control.setting();

			<span class="hljs-comment">/*
			 * Since the control is not registered in PHP, we need to prevent the
			 * preview's sending of the activeControls to result in this control
			 * being deactivated.
			 */</span>
			control.active.validate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> value, section = api.section( control.section() );
				<span class="hljs-keyword">if</span> ( section ) {
					value = section.active();
				} <span class="hljs-keyword">else</span> {
					value = <span class="hljs-literal">false</span>;
				}
				<span class="hljs-keyword">return</span> value;
			};

			control.nameElement = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'.menu-name-field'</span> ) );

			control.nameElement.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> value </span>) </span>{
				<span class="hljs-keyword">var</span> settingValue = control.setting();
				<span class="hljs-keyword">if</span> ( settingValue &amp;&amp; settingValue.name !== value ) {
					settingValue = _.clone( settingValue );
					settingValue.name = value;
					control.setting.set( settingValue );
				}
			});
			<span class="hljs-keyword">if</span> ( settingValue ) {
				control.nameElement.set( settingValue.name );
			}

			control.setting.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> object </span>) </span>{
				<span class="hljs-keyword">if</span> ( object ) {
					control.nameElement.set( object.name );
				}
			});
		}

	});

	<span class="hljs-comment">/**
	 * wp.customize.Menus.MenuAutoAddControl
	 *
	 * Customizer control for a nav menu's auto add.
	 *
	 * @constructor
	 * @augments wp.customize.Control
	 */</span>
	api.Menus.MenuAutoAddControl = api.Control.extend({

		<span class="hljs-attr">ready</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				settingValue = control.setting();

			<span class="hljs-comment">/*
			 * Since the control is not registered in PHP, we need to prevent the
			 * preview's sending of the activeControls to result in this control
			 * being deactivated.
			 */</span>
			control.active.validate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> value, section = api.section( control.section() );
				<span class="hljs-keyword">if</span> ( section ) {
					value = section.active();
				} <span class="hljs-keyword">else</span> {
					value = <span class="hljs-literal">false</span>;
				}
				<span class="hljs-keyword">return</span> value;
			};

			control.autoAddElement = <span class="hljs-keyword">new</span> api.Element( control.container.find( <span class="hljs-string">'input[type=checkbox].auto_add'</span> ) );

			control.autoAddElement.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> value </span>) </span>{
				<span class="hljs-keyword">var</span> settingValue = control.setting();
				<span class="hljs-keyword">if</span> ( settingValue &amp;&amp; settingValue.name !== value ) {
					settingValue = _.clone( settingValue );
					settingValue.auto_add = value;
					control.setting.set( settingValue );
				}
			});
			<span class="hljs-keyword">if</span> ( settingValue ) {
				control.autoAddElement.set( settingValue.auto_add );
			}

			control.setting.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> object </span>) </span>{
				<span class="hljs-keyword">if</span> ( object ) {
					control.autoAddElement.set( object.auto_add );
				}
			});
		}

	});

	<span class="hljs-comment">/**
	 * wp.customize.Menus.MenuControl
	 *
	 * Customizer control for menus.
	 * Note that 'nav_menu' must match the WP_Menu_Customize_Control::$type
	 *
	 * @constructor
	 * @augments wp.customize.Control
	 */</span>
	api.Menus.MenuControl = api.Control.extend({
		<span class="hljs-comment">/**
		 * Set up the control.
		 */</span>
		ready: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				section = api.section( control.section() ),
				menuId = control.params.menu_id,
				menu = control.setting(),
				name,
				widgetTemplate,
				select;

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.params.menu_id ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'params.menu_id was not defined'</span> );
			}

			<span class="hljs-comment">/*
			 * Since the control is not registered in PHP, we need to prevent the
			 * preview's sending of the activeControls to result in this control
			 * being deactivated.
			 */</span>
			control.active.validate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> value;
				<span class="hljs-keyword">if</span> ( section ) {
					value = section.active();
				} <span class="hljs-keyword">else</span> {
					value = <span class="hljs-literal">false</span>;
				}
				<span class="hljs-keyword">return</span> value;
			};

			control.$controlSection = section.headContainer;
			control.$sectionContent = control.container.closest( <span class="hljs-string">'.accordion-section-content'</span> );

			<span class="hljs-keyword">this</span>._setupModel();

			api.section( control.section(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> section </span>) </span>{
				section.deferred.initSortables.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuList </span>) </span>{
					control._setupSortable( menuList );
				});
			} );

			<span class="hljs-keyword">this</span>._setupAddition();
			<span class="hljs-keyword">this</span>._setupLocations();
			<span class="hljs-keyword">this</span>._setupTitle();</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>Add menu to Custom Menu widgets.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( menu ) {
				name = displayNavMenuName( menu.name );</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Add the menu to the existing controls.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.control.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> widgetControl </span>) </span>{
					<span class="hljs-keyword">if</span> ( ! widgetControl.extended( api.controlConstructor.widget_form ) || <span class="hljs-string">'nav_menu'</span> !== widgetControl.params.widget_id_base ) {
						<span class="hljs-keyword">return</span>;
					}
					widgetControl.container.find( <span class="hljs-string">'.nav-menu-widget-form-controls:first'</span> ).show();
					widgetControl.container.find( <span class="hljs-string">'.nav-menu-widget-no-menus-message:first'</span> ).hide();

					select = widgetControl.container.find( <span class="hljs-string">'select'</span> );
					<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === select.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( menuId ) + <span class="hljs-string">']'</span> ).length ) {
						select.append( <span class="hljs-keyword">new</span> Option( name, menuId ) );
					}
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Add the menu to the widget template.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				widgetTemplate = $( <span class="hljs-string">'#available-widgets-list .widget-tpl:has( input.id_base[ value=nav_menu ] )'</span> );
				widgetTemplate.find( <span class="hljs-string">'.nav-menu-widget-form-controls:first'</span> ).show();
				widgetTemplate.find( <span class="hljs-string">'.nav-menu-widget-no-menus-message:first'</span> ).hide();
				select = widgetTemplate.find( <span class="hljs-string">'.widget-inside select:first'</span> );
				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === select.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( menuId ) + <span class="hljs-string">']'</span> ).length ) {
					select.append( <span class="hljs-keyword">new</span> Option( name, menuId ) );
				}
			}
		},

		<span class="hljs-comment">/**
		 * Update ordering of menu item controls when the setting is updated.
		 */</span>
		_setupModel: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				menuId = control.params.menu_id;

			control.setting.bind( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> to </span>) </span>{
				<span class="hljs-keyword">var</span> name;
				<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === to ) {
					control._handleDeletion();
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Update names in the Custom Menu widgets.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					name = displayNavMenuName( to.name );
					api.control.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> widgetControl </span>) </span>{
						<span class="hljs-keyword">if</span> ( ! widgetControl.extended( api.controlConstructor.widget_form ) || <span class="hljs-string">'nav_menu'</span> !== widgetControl.params.widget_id_base ) {
							<span class="hljs-keyword">return</span>;
						}
						<span class="hljs-keyword">var</span> select = widgetControl.container.find( <span class="hljs-string">'select'</span> );
						select.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( menuId ) + <span class="hljs-string">']'</span> ).text( name );
					});
				}
			} );

			control.container.find( <span class="hljs-string">'.menu-delete-item'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				event.stopPropagation();
				event.preventDefault();
				control.setting.set( <span class="hljs-literal">false</span> );
			});
		},

		<span class="hljs-comment">/**
		 * Allow items in each menu to be re-ordered, and for the order to be previewed.
		 *
		 * Notice that the UI aspects here are handled by wpNavMenu.initSortables()
		 * which is called in MenuSection.onChangeExpanded()
		 *
		 * @param {object} menuList - The element that has sortable().
		 */</span>
		_setupSortable: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuList </span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>;

			<span class="hljs-keyword">if</span> ( ! menuList.is( control.$sectionContent ) ) {
				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Unexpected menuList.'</span> );
			}

			menuList.on( <span class="hljs-string">'sortstart'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				control.isSorting = <span class="hljs-literal">true</span>;
			});

			menuList.on( <span class="hljs-string">'sortstop'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-comment">// Next tick.</span>
					<span class="hljs-keyword">var</span> menuItemContainerIds = control.$sectionContent.sortable( <span class="hljs-string">'toArray'</span> ),
						menuItemControls = [],
						position = <span class="hljs-number">0</span>,
						priority = <span class="hljs-number">10</span>;

					control.isSorting = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Reset horizontal scroll position when done dragging.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					control.$sectionContent.scrollLeft( <span class="hljs-number">0</span> );

					_.each( menuItemContainerIds, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItemContainerId </span>) </span>{
						<span class="hljs-keyword">var</span> menuItemId, menuItemControl, matches;
						matches = menuItemContainerId.match( <span class="hljs-regexp">/^customize-control-nav_menu_item-(-?\d+)$/</span>, <span class="hljs-string">''</span> );
						<span class="hljs-keyword">if</span> ( ! matches ) {
							<span class="hljs-keyword">return</span>;
						}
						menuItemId = <span class="hljs-built_in">parseInt</span>( matches[<span class="hljs-number">1</span>], <span class="hljs-number">10</span> );
						menuItemControl = api.control( <span class="hljs-string">'nav_menu_item['</span> + <span class="hljs-built_in">String</span>( menuItemId ) + <span class="hljs-string">']'</span> );
						<span class="hljs-keyword">if</span> ( menuItemControl ) {
							menuItemControls.push( menuItemControl );
						}
					} );

					_.each( menuItemControls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItemControl </span>) </span>{
						<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === menuItemControl.setting() ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>Skip deleted items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							<span class="hljs-keyword">return</span>;
						}
						<span class="hljs-keyword">var</span> setting = _.clone( menuItemControl.setting() );
						position += <span class="hljs-number">1</span>;
						priority += <span class="hljs-number">1</span>;
						setting.position = position;
						menuItemControl.priority( priority );</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>Note that wpNavMenu will be setting this .menu-item-data-parent-id inputs value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						setting.menu_item_parent = <span class="hljs-built_in">parseInt</span>( menuItemControl.container.find( <span class="hljs-string">'.menu-item-data-parent-id'</span> ).val(), <span class="hljs-number">10</span> );
						<span class="hljs-keyword">if</span> ( ! setting.menu_item_parent ) {
							setting.menu_item_parent = <span class="hljs-number">0</span>;
						}

						menuItemControl.setting.set( setting );
					});
				});

			});
			control.isReordering = <span class="hljs-literal">false</span>;

			<span class="hljs-comment">/**
			 * Keyboard-accessible reordering.
			 */</span>
			<span class="hljs-keyword">this</span>.container.find( <span class="hljs-string">'.reorder-toggle'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				control.toggleReordering( ! control.isReordering );
			} );
		},

		<span class="hljs-comment">/**
		 * Set up UI for adding a new menu item.
		 */</span>
		_setupAddition: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

			<span class="hljs-keyword">this</span>.container.find( <span class="hljs-string">'.add-new-menu-item'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( self.$sectionContent.hasClass( <span class="hljs-string">'reordering'</span> ) ) {
					<span class="hljs-keyword">return</span>;
				}

				<span class="hljs-keyword">if</span> ( ! $( <span class="hljs-string">'body'</span> ).hasClass( <span class="hljs-string">'adding-menu-items'</span> ) ) {
					$( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> );
					api.Menus.availableMenuItemsPanel.open( self );
				} <span class="hljs-keyword">else</span> {
					$( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> );
					api.Menus.availableMenuItemsPanel.close();
					event.stopPropagation();
				}
			} );
		},

		<span class="hljs-attr">_handleDeletion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				section,
				menuId = control.params.menu_id,
				removeSection,
				widgetTemplate,
				navMenuCount = <span class="hljs-number">0</span>;
			section = api.section( control.section() );
			removeSection = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				section.container.remove();
				api.section.remove( section.id );
			};

			<span class="hljs-keyword">if</span> ( section &amp;&amp; section.expanded() ) {
				section.collapse({
					<span class="hljs-attr">completeCallback</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						removeSection();
						wp.a11y.speak( api.Menus.data.l10n.menuDeleted );
						api.panel( <span class="hljs-string">'nav_menus'</span> ).focus();
					}
				});
			} <span class="hljs-keyword">else</span> {
				removeSection();
			}

			api.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting </span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^nav_menu\[/</span>.test( setting.id ) &amp;&amp; <span class="hljs-literal">false</span> !== setting() ) {
					navMenuCount += <span class="hljs-number">1</span>;
				}
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Remove the menu from any Custom Menu widgets.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.control.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> widgetControl </span>) </span>{
				<span class="hljs-keyword">if</span> ( ! widgetControl.extended( api.controlConstructor.widget_form ) || <span class="hljs-string">'nav_menu'</span> !== widgetControl.params.widget_id_base ) {
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">var</span> select = widgetControl.container.find( <span class="hljs-string">'select'</span> );
				<span class="hljs-keyword">if</span> ( select.val() === <span class="hljs-built_in">String</span>( menuId ) ) {
					select.prop( <span class="hljs-string">'selectedIndex'</span>, <span class="hljs-number">0</span> ).trigger( <span class="hljs-string">'change'</span> );
				}

				widgetControl.container.find( <span class="hljs-string">'.nav-menu-widget-form-controls:first'</span> ).toggle( <span class="hljs-number">0</span> !== navMenuCount );
				widgetControl.container.find( <span class="hljs-string">'.nav-menu-widget-no-menus-message:first'</span> ).toggle( <span class="hljs-number">0</span> === navMenuCount );
				widgetControl.container.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( menuId ) + <span class="hljs-string">']'</span> ).remove();
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Remove the menu to the nav menu widget template.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			widgetTemplate = $( <span class="hljs-string">'#available-widgets-list .widget-tpl:has( input.id_base[ value=nav_menu ] )'</span> );
			widgetTemplate.find( <span class="hljs-string">'.nav-menu-widget-form-controls:first'</span> ).toggle( <span class="hljs-number">0</span> !== navMenuCount );
			widgetTemplate.find( <span class="hljs-string">'.nav-menu-widget-no-menus-message:first'</span> ).toggle( <span class="hljs-number">0</span> === navMenuCount );
			widgetTemplate.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( menuId ) + <span class="hljs-string">']'</span> ).remove();
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Setup theme location checkboxes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_setupLocations: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>;

			control.container.find( <span class="hljs-string">'.assigned-menu-location'</span> ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> container = $( <span class="hljs-keyword">this</span> ),
					checkbox = container.find( <span class="hljs-string">'input[type=checkbox]'</span> ),
					element,
					updateSelectedMenuLabel,
					navMenuLocationSetting = api( <span class="hljs-string">'nav_menu_locations['</span> + checkbox.data( <span class="hljs-string">'location-id'</span> ) + <span class="hljs-string">']'</span> );

				updateSelectedMenuLabel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> selectedMenuId </span>) </span>{
					<span class="hljs-keyword">var</span> menuSetting = api( <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( selectedMenuId ) + <span class="hljs-string">']'</span> );
					<span class="hljs-keyword">if</span> ( ! selectedMenuId || ! menuSetting || ! menuSetting() ) {
						container.find( <span class="hljs-string">'.theme-location-set'</span> ).hide();
					} <span class="hljs-keyword">else</span> {
						container.find( <span class="hljs-string">'.theme-location-set'</span> ).show().find( <span class="hljs-string">'span'</span> ).text( displayNavMenuName( menuSetting().name ) );
					}
				};

				element = <span class="hljs-keyword">new</span> api.Element( checkbox );
				element.set( navMenuLocationSetting.get() === control.params.menu_id );

				checkbox.on( <span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Note: We cant use element.bind( function( checked ){  } ) here because it will trigger a change as well.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					navMenuLocationSetting.set( <span class="hljs-keyword">this</span>.checked ? control.params.menu_id : <span class="hljs-number">0</span> );
				} );

				navMenuLocationSetting.bind(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> selectedMenuId </span>) </span>{
					element.set( selectedMenuId === control.params.menu_id );
					updateSelectedMenuLabel( selectedMenuId );
				});
				updateSelectedMenuLabel( navMenuLocationSetting.get() );

			});
		},

		<span class="hljs-comment">/**
		 * Update Section Title as menu name is changed.
		 */</span>
		_setupTitle: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>;

			control.setting.bind( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menu </span>) </span>{
				<span class="hljs-keyword">if</span> ( ! menu ) {
					<span class="hljs-keyword">return</span>;
				}

				<span class="hljs-keyword">var</span> section = api.section( control.section() ),
					menuId = control.params.menu_id,
					controlTitle = section.headContainer.find( <span class="hljs-string">'.accordion-section-title'</span> ),
					sectionTitle = section.contentContainer.find( <span class="hljs-string">'.customize-section-title h3'</span> ),
					location = section.headContainer.find( <span class="hljs-string">'.menu-in-location'</span> ),
					action = sectionTitle.find( <span class="hljs-string">'.customize-action'</span> ),
					name = displayNavMenuName( menu.name );</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Update the control title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				controlTitle.text( name );
				<span class="hljs-keyword">if</span> ( location.length ) {
					location.appendTo( controlTitle );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Update the section title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				sectionTitle.text( name );
				<span class="hljs-keyword">if</span> ( action.length ) {
					action.prependTo( sectionTitle );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Update the nav menu name in location selects.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.control.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> control </span>) </span>{
					<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^nav_menu_locations\[/</span>.test( control.id ) ) {
						control.container.find( <span class="hljs-string">'option[value='</span> + menuId + <span class="hljs-string">']'</span> ).text( name );
					}
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Update the nav menu name in all location checkboxes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				section.contentContainer.find( <span class="hljs-string">'.customize-control-checkbox input'</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">if</span> ( $( <span class="hljs-keyword">this</span> ).prop( <span class="hljs-string">'checked'</span> ) ) {
						$( <span class="hljs-string">'.current-menu-location-name-'</span> + $( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">'location-id'</span> ) ).text( name );
					}
				} );
			} );
		},

		<span class="hljs-comment">/***********************************************************************
		 * Begin public API methods
		 **********************************************************************/</span>

		<span class="hljs-comment">/**
		 * Enable/disable the reordering UI
		 *
		 * @param {Boolean} showOrHide to enable/disable reordering
		 */</span>
		toggleReordering: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> showOrHide </span>) </span>{
			<span class="hljs-keyword">var</span> addNewItemBtn = <span class="hljs-keyword">this</span>.container.find( <span class="hljs-string">'.add-new-menu-item'</span> ),
				reorderBtn = <span class="hljs-keyword">this</span>.container.find( <span class="hljs-string">'.reorder-toggle'</span> ),
				itemsTitle = <span class="hljs-keyword">this</span>.$sectionContent.find( <span class="hljs-string">'.item-title'</span> );

			showOrHide = <span class="hljs-built_in">Boolean</span>( showOrHide );

			<span class="hljs-keyword">if</span> ( showOrHide === <span class="hljs-keyword">this</span>.$sectionContent.hasClass( <span class="hljs-string">'reordering'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>.isReordering = showOrHide;
			<span class="hljs-keyword">this</span>.$sectionContent.toggleClass( <span class="hljs-string">'reordering'</span>, showOrHide );
			<span class="hljs-keyword">this</span>.$sectionContent.sortable( <span class="hljs-keyword">this</span>.isReordering ? <span class="hljs-string">'disable'</span> : <span class="hljs-string">'enable'</span> );
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.isReordering ) {
				addNewItemBtn.attr({ <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'-1'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span> });
				reorderBtn.attr( <span class="hljs-string">'aria-label'</span>, api.Menus.data.l10n.reorderLabelOff );
				wp.a11y.speak( api.Menus.data.l10n.reorderModeOn );
				itemsTitle.attr( <span class="hljs-string">'aria-hidden'</span>, <span class="hljs-string">'false'</span> );
			} <span class="hljs-keyword">else</span> {
				addNewItemBtn.removeAttr( <span class="hljs-string">'tabindex aria-hidden'</span> );
				reorderBtn.attr( <span class="hljs-string">'aria-label'</span>, api.Menus.data.l10n.reorderLabelOn );
				wp.a11y.speak( api.Menus.data.l10n.reorderModeOff );
				itemsTitle.attr( <span class="hljs-string">'aria-hidden'</span>, <span class="hljs-string">'true'</span> );
			}

			<span class="hljs-keyword">if</span> ( showOrHide ) {
				_( <span class="hljs-keyword">this</span>.getMenuItemControls() ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> formControl </span>) </span>{
					formControl.collapseForm();
				} );
			}
		},

		<span class="hljs-comment">/**
		 * @return {wp.customize.controlConstructor.nav_menu_item[]}
		 */</span>
		getMenuItemControls: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> menuControl = <span class="hljs-keyword">this</span>,
				menuItemControls = [],
				menuTermId = menuControl.params.menu_id;

			api.control.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> control </span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'nav_menu_item'</span> === control.params.type &amp;&amp; control.setting() &amp;&amp; menuTermId === control.setting().nav_menu_term_id ) {
					menuItemControls.push( control );
				}
			});

			<span class="hljs-keyword">return</span> menuItemControls;
		},

		<span class="hljs-comment">/**
		 * Make sure that each menu item control has the proper depth.
		 */</span>
		reflowMenuItems: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> menuControl = <span class="hljs-keyword">this</span>,
				menuItemControls = menuControl.getMenuItemControls(),
				reflowRecursively;

			reflowRecursively = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> context </span>) </span>{
				<span class="hljs-keyword">var</span> currentMenuItemControls = [],
					thisParent = context.currentParent;
				_.each( context.menuItemControls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItemControl </span>) </span>{
					<span class="hljs-keyword">if</span> ( thisParent === menuItemControl.setting().menu_item_parent ) {
						currentMenuItemControls.push( menuItemControl );</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>@todo We could remove this item from menuItemControls now, for efficiency.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					}
				});
				currentMenuItemControls.sort( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> a, b </span>) </span>{
					<span class="hljs-keyword">return</span> a.setting().position - b.setting().position;
				});

				_.each( currentMenuItemControls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItemControl </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Update position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					context.currentAbsolutePosition += <span class="hljs-number">1</span>;
					menuItemControl.priority.set( context.currentAbsolutePosition ); <span class="hljs-comment">// This will change the sort order.</span></pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Update depth.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( ! menuItemControl.container.hasClass( <span class="hljs-string">'menu-item-depth-'</span> + <span class="hljs-built_in">String</span>( context.currentDepth ) ) ) {
						_.each( menuItemControl.container.prop( <span class="hljs-string">'className'</span> ).match( <span class="hljs-regexp">/menu-item-depth-\d+/g</span> ), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> className </span>) </span>{
							menuItemControl.container.removeClass( className );
						});
						menuItemControl.container.addClass( <span class="hljs-string">'menu-item-depth-'</span> + <span class="hljs-built_in">String</span>( context.currentDepth ) );
					}
					menuItemControl.container.data( <span class="hljs-string">'item-depth'</span>, context.currentDepth );</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Process any children items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					context.currentDepth += <span class="hljs-number">1</span>;
					context.currentParent = menuItemControl.params.menu_item_id;
					reflowRecursively( context );
					context.currentDepth -= <span class="hljs-number">1</span>;
					context.currentParent = thisParent;
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Update class names for reordering controls.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( currentMenuItemControls.length ) {
					_( currentMenuItemControls ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItemControl </span>) </span>{
						menuItemControl.container.removeClass( <span class="hljs-string">'move-up-disabled move-down-disabled move-left-disabled move-right-disabled'</span> );
						<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === context.currentDepth ) {
							menuItemControl.container.addClass( <span class="hljs-string">'move-left-disabled'</span> );
						} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-number">10</span> === context.currentDepth ) {
							menuItemControl.container.addClass( <span class="hljs-string">'move-right-disabled'</span> );
						}
					});

					currentMenuItemControls[<span class="hljs-number">0</span>].container
						.addClass( <span class="hljs-string">'move-up-disabled'</span> )
						.addClass( <span class="hljs-string">'move-right-disabled'</span> )
						.toggleClass( <span class="hljs-string">'move-down-disabled'</span>, <span class="hljs-number">1</span> === currentMenuItemControls.length );
					currentMenuItemControls[ currentMenuItemControls.length - <span class="hljs-number">1</span> ].container
						.addClass( <span class="hljs-string">'move-down-disabled'</span> )
						.toggleClass( <span class="hljs-string">'move-up-disabled'</span>, <span class="hljs-number">1</span> === currentMenuItemControls.length );
				}
			};

			reflowRecursively( {
				<span class="hljs-attr">menuItemControls</span>: menuItemControls,
				<span class="hljs-attr">currentParent</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">currentDepth</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">currentAbsolutePosition</span>: <span class="hljs-number">0</span>
			} );

			menuControl.container.find( <span class="hljs-string">'.reorder-toggle'</span> ).toggle( menuItemControls.length &gt; <span class="hljs-number">1</span> );
		},

		<span class="hljs-comment">/**
		 * Note that this function gets debounced so that when a lot of setting
		 * changes are made at once, for instance when moving a menu item that
		 * has child items, this function will only be called once all of the
		 * settings have been updated.
		 */</span>
		debouncedReflowMenuItems: _.debounce( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">this</span>.reflowMenuItems.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		}, <span class="hljs-number">0</span> ),

		<span class="hljs-comment">/**
		 * Add a new item to this menu.
		 *
		 * @param {object} item - Value for the nav_menu_item setting to be created.
		 * @returns {wp.customize.Menus.controlConstructor.nav_menu_item} The newly-created nav_menu_item control instance.
		 */</span>
		addItemToMenu: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> item </span>) </span>{
			<span class="hljs-keyword">var</span> menuControl = <span class="hljs-keyword">this</span>, customizeId, settingArgs, setting, menuItemControl, placeholderId, position = <span class="hljs-number">0</span>, priority = <span class="hljs-number">10</span>;

			_.each( menuControl.getMenuItemControls(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> control </span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> === control.setting() ) {
					<span class="hljs-keyword">return</span>;
				}
				priority = <span class="hljs-built_in">Math</span>.max( priority, control.priority() );
				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === control.setting().menu_item_parent ) {
					position = <span class="hljs-built_in">Math</span>.max( position, control.setting().position );
				}
			});
			position += <span class="hljs-number">1</span>;
			priority += <span class="hljs-number">1</span>;

			item = $.extend(
				{},
				api.Menus.data.defaultSettingValues.nav_menu_item,
				item,
				{
					<span class="hljs-attr">nav_menu_term_id</span>: menuControl.params.menu_id,
					<span class="hljs-attr">original_title</span>: item.title,
					<span class="hljs-attr">position</span>: position
				}
			);
			<span class="hljs-keyword">delete</span> item.id; <span class="hljs-comment">// only used by Backbone</span>

			placeholderId = api.Menus.generatePlaceholderAutoIncrementId();
			customizeId = <span class="hljs-string">'nav_menu_item['</span> + <span class="hljs-built_in">String</span>( placeholderId ) + <span class="hljs-string">']'</span>;
			settingArgs = {
				<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu_item'</span>,
				<span class="hljs-attr">transport</span>: api.Menus.data.settingTransport,
				<span class="hljs-attr">previewer</span>: api.previewer
			};
			setting = api.create( customizeId, customizeId, {}, settingArgs );
			setting.set( item ); <span class="hljs-comment">// Change from initial empty object to actual item to mark as dirty.</span></pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>Add the menu item control.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menuItemControl = <span class="hljs-keyword">new</span> api.controlConstructor.nav_menu_item( customizeId, {
				<span class="hljs-attr">params</span>: {
					<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu_item'</span>,
					<span class="hljs-attr">content</span>: <span class="hljs-string">'&lt;li id="customize-control-nav_menu_item-'</span> + <span class="hljs-built_in">String</span>( placeholderId ) + <span class="hljs-string">'" class="customize-control customize-control-nav_menu_item"&gt;&lt;/li&gt;'</span>,
					<span class="hljs-attr">section</span>: menuControl.id,
					<span class="hljs-attr">priority</span>: priority,
					<span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
					<span class="hljs-attr">settings</span>: {
						<span class="hljs-string">'default'</span>: customizeId
					},
					<span class="hljs-attr">menu_item_id</span>: placeholderId
				},
				<span class="hljs-attr">previewer</span>: api.previewer
			} );

			api.control.add( customizeId, menuItemControl );
			setting.preview();
			menuControl.debouncedReflowMenuItems();

			wp.a11y.speak( api.Menus.data.l10n.itemAdded );

			<span class="hljs-keyword">return</span> menuItemControl;
		}
	} );

	<span class="hljs-comment">/**
	 * wp.customize.Menus.NewMenuControl
	 *
	 * Customizer control for creating new menus and handling deletion of existing menus.
	 * Note that 'new_menu' must match the WP_Customize_New_Menu_Control::$type.
	 *
	 * @constructor
	 * @augments wp.customize.Control
	 */</span>
	api.Menus.NewMenuControl = api.Control.extend({
		<span class="hljs-comment">/**
		 * Set up the control.
		 */</span>
		ready: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">this</span>._bindHandlers();
		},

		<span class="hljs-attr">_bindHandlers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
				name = $( <span class="hljs-string">'#customize-control-new_menu_name input'</span> ),
				submit = $( <span class="hljs-string">'#create-new-menu-submit'</span> );
			name.on( <span class="hljs-string">'keydown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( <span class="hljs-number">13</span> === event.which ) { <span class="hljs-comment">// Enter.</span>
					self.submit();
				}
			} );
			submit.on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				self.submit();
				event.stopPropagation();
				event.preventDefault();
			} );
		},

		<span class="hljs-comment">/**
		 * Create the new menu with the name supplied.
		 */</span>
		submit: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

			<span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>,
				container = control.container.closest( <span class="hljs-string">'.accordion-section-new-menu'</span> ),
				nameInput = container.find( <span class="hljs-string">'.menu-name-field'</span> ).first(),
				name = nameInput.val(),
				menuSection,
				customizeId,
				placeholderId = api.Menus.generatePlaceholderAutoIncrementId();

			<span class="hljs-keyword">if</span> ( ! name ) {
				nameInput.addClass( <span class="hljs-string">'invalid'</span> );
				nameInput.focus();
				<span class="hljs-keyword">return</span>;
			}

			customizeId = <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( placeholderId ) + <span class="hljs-string">']'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Register the menu control setting.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.create( customizeId, customizeId, {}, {
				<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu'</span>,
				<span class="hljs-attr">transport</span>: api.Menus.data.settingTransport,
				<span class="hljs-attr">previewer</span>: api.previewer
			} );
			api( customizeId ).set( $.extend(
				{},
				api.Menus.data.defaultSettingValues.nav_menu,
				{
					<span class="hljs-attr">name</span>: name
				}
			) );

			<span class="hljs-comment">/*
			 * Add the menu section (and its controls).
			 * Note that this will automatically create the required controls
			 * inside via the Section's ready method.
			 */</span>
			menuSection = <span class="hljs-keyword">new</span> api.Menus.MenuSection( customizeId, {
				<span class="hljs-attr">params</span>: {
					<span class="hljs-attr">id</span>: customizeId,
					<span class="hljs-attr">panel</span>: <span class="hljs-string">'nav_menus'</span>,
					<span class="hljs-attr">title</span>: displayNavMenuName( name ),
					<span class="hljs-attr">customizeAction</span>: api.Menus.data.l10n.customizingMenus,
					<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu'</span>,
					<span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>,
					<span class="hljs-attr">menu_id</span>: placeholderId
				}
			} );
			api.section.add( customizeId, menuSection );</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Clear name field.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			nameInput.val( <span class="hljs-string">''</span> );
			nameInput.removeClass( <span class="hljs-string">'invalid'</span> );

			wp.a11y.speak( api.Menus.data.l10n.menuAdded );</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Focus on the new menu section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.section( customizeId ).focus(); <span class="hljs-comment">// @todo should we focus on the new menu's control and open the add-items panel? Thinking user flow...</span>
		}
	});

	<span class="hljs-comment">/**
	 * Extends wp.customize.controlConstructor with control constructor for
	 * menu_location, menu_item, nav_menu, and new_menu.
	 */</span>
	$.extend( api.controlConstructor, {
		<span class="hljs-attr">nav_menu_location</span>: api.Menus.MenuLocationControl,
		<span class="hljs-attr">nav_menu_item</span>: api.Menus.MenuItemControl,
		<span class="hljs-attr">nav_menu</span>: api.Menus.MenuControl,
		<span class="hljs-attr">nav_menu_name</span>: api.Menus.MenuNameControl,
		<span class="hljs-attr">nav_menu_auto_add</span>: api.Menus.MenuAutoAddControl,
		<span class="hljs-attr">new_menu</span>: api.Menus.NewMenuControl
	});

	<span class="hljs-comment">/**
	 * Extends wp.customize.panelConstructor with section constructor for menus.
	 */</span>
	$.extend( api.panelConstructor, {
		<span class="hljs-attr">nav_menus</span>: api.Menus.MenusPanel
	});

	<span class="hljs-comment">/**
	 * Extends wp.customize.sectionConstructor with section constructor for menu.
	 */</span>
	$.extend( api.sectionConstructor, {
		<span class="hljs-attr">nav_menu</span>: api.Menus.MenuSection,
		<span class="hljs-attr">new_menu</span>: api.Menus.NewMenuSection
	});

	<span class="hljs-comment">/**
	 * Init Customizer for menus.
	 */</span>
	api.bind( <span class="hljs-string">'ready'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Set up the menu items panel.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		api.Menus.availableMenuItemsPanel = <span class="hljs-keyword">new</span> api.Menus.AvailableMenuItemsPanelView({
			<span class="hljs-attr">collection</span>: api.Menus.availableMenuItems
		});

		api.bind( <span class="hljs-string">'saved'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
			<span class="hljs-keyword">if</span> ( data.nav_menu_updates || data.nav_menu_item_updates ) {
				api.Menus.applySavedData( data );
			}
		} );

		<span class="hljs-comment">/*
		 * Reset the list of posts created in the customizer once published.
		 * The setting is updated quietly (bypassing events being triggered)
		 * so that the customized state doesn't become immediately dirty.
		 */</span>
		api.state( <span class="hljs-string">'changesetStatus'</span> ).bind( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> status </span>) </span>{
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'publish'</span> === status ) {
				api( <span class="hljs-string">'nav_menus_created_posts'</span> )._value = [];
			}
		} );</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>Open and focus menu control.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		api.previewer.bind( <span class="hljs-string">'focus-nav-menu-item-control'</span>, api.Menus.focusMenuItemControl );
	} );

	<span class="hljs-comment">/**
	 * When customize_save comes back with a success, make sure any inserted
	 * nav menus and items are properly re-added with their newly-assigned IDs.
	 *
	 * @param {object} data
	 * @param {array} data.nav_menu_updates
	 * @param {array} data.nav_menu_item_updates
	 */</span>
	api.Menus.applySavedData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{

		<span class="hljs-keyword">var</span> insertedMenuIdMapping = {}, insertedMenuItemIdMapping = {};

		_( data.nav_menu_updates ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> update </span>) </span>{
			<span class="hljs-keyword">var</span> oldCustomizeId, newCustomizeId, customizeId, oldSetting, newSetting, setting, settingValue, oldSection, newSection, wasSaved, widgetTemplate, navMenuCount;
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'inserted'</span> === update.status ) {
				<span class="hljs-keyword">if</span> ( ! update.previous_term_id ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected previous_term_id'</span> );
				}
				<span class="hljs-keyword">if</span> ( ! update.term_id ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected term_id'</span> );
				}
				oldCustomizeId = <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( update.previous_term_id ) + <span class="hljs-string">']'</span>;
				<span class="hljs-keyword">if</span> ( ! api.has( oldCustomizeId ) ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected setting to exist: '</span> + oldCustomizeId );
				}
				oldSetting = api( oldCustomizeId );
				<span class="hljs-keyword">if</span> ( ! api.section.has( oldCustomizeId ) ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected control to exist: '</span> + oldCustomizeId );
				}
				oldSection = api.section( oldCustomizeId );

				settingValue = oldSetting.get();
				<span class="hljs-keyword">if</span> ( ! settingValue ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Did not expect setting to be empty (deleted).'</span> );
				}
				settingValue = $.extend( _.clone( settingValue ), update.saved_value );

				insertedMenuIdMapping[ update.previous_term_id ] = update.term_id;
				newCustomizeId = <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( update.term_id ) + <span class="hljs-string">']'</span>;
				newSetting = api.create( newCustomizeId, newCustomizeId, settingValue, {
					<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu'</span>,
					<span class="hljs-attr">transport</span>: api.Menus.data.settingTransport,
					<span class="hljs-attr">previewer</span>: api.previewer
				} );

				<span class="hljs-keyword">if</span> ( oldSection.expanded() ) {
					oldSection.collapse();
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>Add the menu section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				newSection = <span class="hljs-keyword">new</span> api.Menus.MenuSection( newCustomizeId, {
					<span class="hljs-attr">params</span>: {
						<span class="hljs-attr">id</span>: newCustomizeId,
						<span class="hljs-attr">panel</span>: <span class="hljs-string">'nav_menus'</span>,
						<span class="hljs-attr">title</span>: settingValue.name,
						<span class="hljs-attr">customizeAction</span>: api.Menus.data.l10n.customizingMenus,
						<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu'</span>,
						<span class="hljs-attr">priority</span>: oldSection.priority.get(),
						<span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
						<span class="hljs-attr">menu_id</span>: update.term_id
					}
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>Add new control for the new menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.section.add( newCustomizeId, newSection );</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Update the values for nav menus in Custom Menu controls.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.control.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting </span>) </span>{
					<span class="hljs-keyword">if</span> ( ! setting.extended( api.controlConstructor.widget_form ) || <span class="hljs-string">'nav_menu'</span> !== setting.params.widget_id_base ) {
						<span class="hljs-keyword">return</span>;
					}
					<span class="hljs-keyword">var</span> select, oldMenuOption, newMenuOption;
					select = setting.container.find( <span class="hljs-string">'select'</span> );
					oldMenuOption = select.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( update.previous_term_id ) + <span class="hljs-string">']'</span> );
					newMenuOption = select.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( update.term_id ) + <span class="hljs-string">']'</span> );
					newMenuOption.prop( <span class="hljs-string">'selected'</span>, oldMenuOption.prop( <span class="hljs-string">'selected'</span> ) );
					oldMenuOption.remove();
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Delete the old placeholder nav_menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				oldSetting.callbacks.disable(); <span class="hljs-comment">// Prevent setting triggering Customizer dirty state when set.</span>
				oldSetting.set( <span class="hljs-literal">false</span> );
				oldSetting.preview();
				newSetting.preview();
				oldSetting._dirty = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Remove nav_menu section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				oldSection.container.remove();
				api.section.remove( oldCustomizeId );</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Update the nav_menu widget to reflect removed placeholder menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				navMenuCount = <span class="hljs-number">0</span>;
				api.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting </span>) </span>{
					<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^nav_menu\[/</span>.test( setting.id ) &amp;&amp; <span class="hljs-literal">false</span> !== setting() ) {
						navMenuCount += <span class="hljs-number">1</span>;
					}
				});
				widgetTemplate = $( <span class="hljs-string">'#available-widgets-list .widget-tpl:has( input.id_base[ value=nav_menu ] )'</span> );
				widgetTemplate.find( <span class="hljs-string">'.nav-menu-widget-form-controls:first'</span> ).toggle( <span class="hljs-number">0</span> !== navMenuCount );
				widgetTemplate.find( <span class="hljs-string">'.nav-menu-widget-no-menus-message:first'</span> ).toggle( <span class="hljs-number">0</span> === navMenuCount );
				widgetTemplate.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( update.previous_term_id ) + <span class="hljs-string">']'</span> ).remove();</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>Update the nav_menu_locations[] controls to remove the placeholder menus from the dropdown options.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				wp.customize.control.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> control </span>)</span>{
					<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^nav_menu_locations\[/</span>.test( control.id ) ) {
						control.container.find( <span class="hljs-string">'option[value='</span> + <span class="hljs-built_in">String</span>( update.previous_term_id ) + <span class="hljs-string">']'</span> ).remove();
					}
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>Update nav_menu_locations to reference the new ID.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> setting </span>) </span>{
					<span class="hljs-keyword">var</span> wasSaved = api.state( <span class="hljs-string">'saved'</span> ).get();
					<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^nav_menu_locations\[/</span>.test( setting.id ) &amp;&amp; setting.get() === update.previous_term_id ) {
						setting.set( update.term_id );
						setting._dirty = <span class="hljs-literal">false</span>; <span class="hljs-comment">// Not dirty because this is has also just been done on server in WP_Customize_Nav_Menu_Setting::update().</span>
						api.state( <span class="hljs-string">'saved'</span> ).set( wasSaved );
						setting.preview();
					}
				} );

				<span class="hljs-keyword">if</span> ( oldSection.expanded.get() ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>@todo This doesnt seem to be working.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					newSection.expand();
				}
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'updated'</span> === update.status ) {
				customizeId = <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( update.term_id ) + <span class="hljs-string">']'</span>;
				<span class="hljs-keyword">if</span> ( ! api.has( customizeId ) ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected setting to exist: '</span> + customizeId );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Make sure the setting gets updated with its sanitized server value (specifically the conflict-resolved name).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				setting = api( customizeId );
				<span class="hljs-keyword">if</span> ( ! _.isEqual( update.saved_value, setting.get() ) ) {
					wasSaved = api.state( <span class="hljs-string">'saved'</span> ).get();
					setting.set( update.saved_value );
					setting._dirty = <span class="hljs-literal">false</span>;
					api.state( <span class="hljs-string">'saved'</span> ).set( wasSaved );
				}
			}
		} );</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>Build up mapping of nav_menu_item placeholder IDs to inserted IDs.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_( data.nav_menu_item_updates ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> update </span>) </span>{
			<span class="hljs-keyword">if</span> ( update.previous_post_id ) {
				insertedMenuItemIdMapping[ update.previous_post_id ] = update.post_id;
			}
		});

		_( data.nav_menu_item_updates ).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> update </span>) </span>{
			<span class="hljs-keyword">var</span> oldCustomizeId, newCustomizeId, oldSetting, newSetting, settingValue, oldControl, newControl;
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'inserted'</span> === update.status ) {
				<span class="hljs-keyword">if</span> ( ! update.previous_post_id ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected previous_post_id'</span> );
				}
				<span class="hljs-keyword">if</span> ( ! update.post_id ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected post_id'</span> );
				}
				oldCustomizeId = <span class="hljs-string">'nav_menu_item['</span> + <span class="hljs-built_in">String</span>( update.previous_post_id ) + <span class="hljs-string">']'</span>;
				<span class="hljs-keyword">if</span> ( ! api.has( oldCustomizeId ) ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected setting to exist: '</span> + oldCustomizeId );
				}
				oldSetting = api( oldCustomizeId );
				<span class="hljs-keyword">if</span> ( ! api.control.has( oldCustomizeId ) ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Expected control to exist: '</span> + oldCustomizeId );
				}
				oldControl = api.control( oldCustomizeId );

				settingValue = oldSetting.get();
				<span class="hljs-keyword">if</span> ( ! settingValue ) {
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'Did not expect setting to be empty (deleted).'</span> );
				}
				settingValue = _.clone( settingValue );</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>If the parent menu item was also inserted, update the menu_item_parent to the new ID.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( settingValue.menu_item_parent &lt; <span class="hljs-number">0</span> ) {
					<span class="hljs-keyword">if</span> ( ! insertedMenuItemIdMapping[ settingValue.menu_item_parent ] ) {
						<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">'inserted ID for menu_item_parent not available'</span> );
					}
					settingValue.menu_item_parent = insertedMenuItemIdMapping[ settingValue.menu_item_parent ];
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>If the menu was also inserted, then make sure it uses the new menu ID for nav_menu_term_id.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( insertedMenuIdMapping[ settingValue.nav_menu_term_id ] ) {
					settingValue.nav_menu_term_id = insertedMenuIdMapping[ settingValue.nav_menu_term_id ];
				}

				newCustomizeId = <span class="hljs-string">'nav_menu_item['</span> + <span class="hljs-built_in">String</span>( update.post_id ) + <span class="hljs-string">']'</span>;
				newSetting = api.create( newCustomizeId, newCustomizeId, settingValue, {
					<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu_item'</span>,
					<span class="hljs-attr">transport</span>: api.Menus.data.settingTransport,
					<span class="hljs-attr">previewer</span>: api.previewer
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>Add the menu control.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				newControl = <span class="hljs-keyword">new</span> api.controlConstructor.nav_menu_item( newCustomizeId, {
					<span class="hljs-attr">params</span>: {
						<span class="hljs-attr">type</span>: <span class="hljs-string">'nav_menu_item'</span>,
						<span class="hljs-attr">content</span>: <span class="hljs-string">'&lt;li id="customize-control-nav_menu_item-'</span> + <span class="hljs-built_in">String</span>( update.post_id ) + <span class="hljs-string">'" class="customize-control customize-control-nav_menu_item"&gt;&lt;/li&gt;'</span>,
						<span class="hljs-attr">menu_id</span>: update.post_id,
						<span class="hljs-attr">section</span>: <span class="hljs-string">'nav_menu['</span> + <span class="hljs-built_in">String</span>( settingValue.nav_menu_term_id ) + <span class="hljs-string">']'</span>,
						<span class="hljs-attr">priority</span>: oldControl.priority.get(),
						<span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
						<span class="hljs-attr">settings</span>: {
							<span class="hljs-string">'default'</span>: newCustomizeId
						},
						<span class="hljs-attr">menu_item_id</span>: update.post_id
					},
					<span class="hljs-attr">previewer</span>: api.previewer
				} );</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>Remove old control.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				oldControl.container.remove();
				api.control.remove( oldCustomizeId );</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Add new control to take its place.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				api.control.add( newCustomizeId, newControl );</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Delete the placeholder and preview the new setting.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				oldSetting.callbacks.disable(); <span class="hljs-comment">// Prevent setting triggering Customizer dirty state when set.</span>
				oldSetting.set( <span class="hljs-literal">false</span> );
				oldSetting.preview();
				newSetting.preview();
				oldSetting._dirty = <span class="hljs-literal">false</span>;

				newControl.container.toggleClass( <span class="hljs-string">'menu-item-edit-inactive'</span>, oldControl.container.hasClass( <span class="hljs-string">'menu-item-edit-inactive'</span> ) );
			}
		});

		<span class="hljs-comment">/*
		 * Update the settings for any nav_menu widgets that had selected a placeholder ID.
		 */</span>
		_.each( data.widget_nav_menu_updates, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> widgetSettingValue, widgetSettingId </span>) </span>{
			<span class="hljs-keyword">var</span> setting = api( widgetSettingId );
			<span class="hljs-keyword">if</span> ( setting ) {
				setting._value = widgetSettingValue;
				setting.preview(); <span class="hljs-comment">// Send to the preview now so that menu refresh will use the inserted menu.</span>
			}
		});
	};

	<span class="hljs-comment">/**
	 * Focus a menu item control.
	 *
	 * @param {string} menuItemId
	 */</span>
	api.Menus.focusMenuItemControl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItemId </span>) </span>{
		<span class="hljs-keyword">var</span> control = api.Menus.getMenuItemControl( menuItemId );
		<span class="hljs-keyword">if</span> ( control ) {
			control.focus();
		}
	};

	<span class="hljs-comment">/**
	 * Get the control for a given menu.
	 *
	 * @param menuId
	 * @return {wp.customize.controlConstructor.menus[]}
	 */</span>
	api.Menus.getMenuControl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuId </span>) </span>{
		<span class="hljs-keyword">return</span> api.control( <span class="hljs-string">'nav_menu['</span> + menuId + <span class="hljs-string">']'</span> );
	};

	<span class="hljs-comment">/**
	 * Given a menu item ID, get the control associated with it.
	 *
	 * @param {string} menuItemId
	 * @return {object|null}
	 */</span>
	api.Menus.getMenuItemControl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuItemId </span>) </span>{
		<span class="hljs-keyword">return</span> api.control( menuItemIdToSettingId( menuItemId ) );
	};

	<span class="hljs-comment">/**
	 * @param {String} menuItemId
	 */</span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">menuItemIdToSettingId</span>(<span class="hljs-params"> menuItemId </span>) </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'nav_menu_item['</span> + menuItemId + <span class="hljs-string">']'</span>;
	}

	<span class="hljs-comment">/**
	 * Apply sanitize_text_field()-like logic to the supplied name, returning a
	 * "unnammed" fallback string if the name is then empty.
	 *
	 * @param {string} name
	 * @returns {string}
	 */</span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayNavMenuName</span>(<span class="hljs-params"> name </span>) </span>{
		name = name || <span class="hljs-string">''</span>;
		name = $( <span class="hljs-string">'&lt;div&gt;'</span> ).text( name ).html(); <span class="hljs-comment">// Emulate esc_html() which is used in wp-admin/nav-menus.php.</span>
		name = $.trim( name );
		<span class="hljs-keyword">return</span> name || api.Menus.data.l10n.unnamed;
	}

})( wp.customize, wp, jQuery );</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
